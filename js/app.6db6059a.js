(function(){"use strict";var e={2246:function(e,t,a){var l=a(9242),o=a(3396),i=a(7718),n=a(8106),s=a(4454),d=a(3140);function r(e,t,a,l,r,m){const u=(0,o.up)("NavigationDrawer"),c=(0,o.up)("NavBar"),p=(0,o.up)("router-view");return(0,o.wg)(),(0,o.j4)(i.q,null,{default:(0,o.w5)((()=>[(0,o.Wm)(s.s,null,{default:(0,o.w5)((()=>[e.isLogin?((0,o.wg)(),(0,o.j4)(u,{key:0})):(0,o.kq)("",!0),e.isLogin?((0,o.wg)(),(0,o.j4)(n.L,{key:1},{default:(0,o.w5)((()=>[(0,o.Wm)(c)])),_:1})):(0,o.kq)("",!0),(0,o.Wm)(d.O,{class:"d-flex align-center justify-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(p)])),_:1})])),_:1})])),_:1})}var m=a(65),u=a(7312),c=a(3369),p=a(6824),h=a(8521);const w=(0,o._)("img",{class:"website-logo",src:"https://static.wixstatic.com/media/a2c5d8_c4200c39dc3647a0a3a0bebebd9ab1c3~mv2.png/v1/fill/w_640,h_184,al_c,q_85,usm_0.66_1.00_0.01,enc_auto/a2c5d8_c4200c39dc3647a0a3a0bebebd9ab1c3~mv2.png"},null,-1),f={class:"nav-items-card d-flex flex-row align-center justify-space-around"},g={class:"nav-item"};function y(e,t,a,l,i,n){const s=(0,o.up)("router-link");return(0,o.wg)(),(0,o.j4)(c.K,{fluid:""},{default:(0,o.w5)((()=>[(0,o.Wm)(p.o,{justify:"space-between",class:"nav-bar-card"},{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"4"},{default:(0,o.w5)((()=>[(0,o._)("div",null,[(0,o.Wm)(s,{to:"/"},{default:(0,o.w5)((()=>[w])),_:1})])])),_:1}),(0,o.Wm)(h.D,{cols:"2"},{default:(0,o.w5)((()=>[(0,o._)("div",f,[(0,o._)("div",g,[(0,o.Wm)(u.T,{variant:"outlined",color:"warning",onClick:t[0]||(t[0]=t=>e.$store.dispatch("onLogout"))},{default:(0,o.w5)((()=>[(0,o.Uk)(" Logout ")])),_:1})])])])),_:1})])),_:1})])),_:1})}var _={components:{},computed:{...(0,m.rn)(["isAdmin"])}},k=a(89);const v=(0,k.Z)(_,[["render",y]]);var D=v,W=a(4075),j=a(8777),b=a(6145),S=a(7754),C=a(9657);const I={class:"mb-5"},x={key:0};function V(e,t,a,l,i,n){const s=(0,o.up)("router-link");return(0,o.wg)(),(0,o.j4)(C.V,{"expand-on-hover":"",rail:""},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{to:"/profile",class:"router-link"},{default:(0,o.w5)((()=>[(0,o.Wm)(j.l,{"prepend-avatar":"https://media.istockphoto.com/id/1300845620/vector/user-icon-flat-isolated-on-white-background-user-symbol-vector-illustration.jpg?s=612x612&w=0&k=20&c=yBeyba0hUkh14_jgv1OKqIH0CCSWU_4ckRkAoy2p73o=",title:e.$store.state.employeeName,nav:"",active:n.isLinkActive("profile"),color:"primary"},null,8,["title","active"])])),_:1}),(0,o.Wm)(W.J),(0,o.Wm)(b.i,{density:"compact",nav:""},{default:(0,o.w5)((()=>[(0,o._)("div",I,[(0,o.Wm)(S.b,{class:"text-subtitle-1"},{default:(0,o.w5)((()=>[(0,o.Uk)("EMPLOYEE")])),_:1}),(0,o.Wm)(s,{to:"/submit_timesheet/",class:"router-link"},{default:(0,o.w5)((()=>[(0,o.Wm)(j.l,{active:n.isLinkActive("submit_timesheet"),"prepend-icon":"mdi-file-send",title:"Submit Timesheet",value:"home",color:"#6a70eb"},null,8,["active"])])),_:1}),(0,o.Wm)(s,{to:"/",class:"router-link"},{default:(0,o.w5)((()=>[(0,o.Wm)(j.l,{active:n.isLinkActive(""),"prepend-icon":"mdi-text-box-search",title:"Search Timesheet",value:"searchTimesheet",color:"#6a70eb"},null,8,["active"])])),_:1}),(0,o.Wm)(s,{to:"/review_timesheets",class:"router-link"},{default:(0,o.w5)((()=>[(0,o.Wm)(j.l,{active:n.isLinkActive("review_timesheets"),"prepend-icon":"mdi-file-check",title:"Review Timesheets",value:"reviewTimesheets",color:"#6a70eb"},null,8,["active"])])),_:1})]),e.isAdmin?((0,o.wg)(),(0,o.iD)("div",x,[(0,o.Wm)(S.b,{class:"text-subtitle-1"},{default:(0,o.w5)((()=>[(0,o.Uk)("Admin")])),_:1}),(0,o.Wm)(s,{to:"/employee_timesheets",class:"router-link"},{default:(0,o.w5)((()=>[(0,o.Wm)(j.l,{active:n.isLinkActive("employee_timesheets"),"prepend-icon":"mdi-account-search",title:"Employee Timesheet",value:"employeeTimesheet",color:"#6a70eb"},null,8,["active"])])),_:1}),(0,o.Wm)(s,{to:"/employees",class:"router-link"},{default:(0,o.w5)((()=>[(0,o.Wm)(j.l,{active:n.isLinkActive("employees"),"prepend-icon":"mdi-account-supervisor",title:"Employees",value:"employees",color:"#6a70eb"},null,8,["active"])])),_:1}),(0,o.Wm)(s,{to:"/customers",class:"router-link"},{default:(0,o.w5)((()=>[(0,o.Wm)(j.l,{active:n.isLinkActive("customers"),"prepend-icon":"mdi-domain",title:"Customers",value:"customers",color:"#6a70eb"},null,8,["active"])])),_:1}),(0,o.Wm)(s,{to:"/projects",class:"router-link"},{default:(0,o.w5)((()=>[(0,o.Wm)(j.l,{active:n.isLinkActive("projects"),"prepend-icon":"mdi-file-multiple",title:"Projects",value:"projects",color:"#6a70eb"},null,8,["active"])])),_:1}),(0,o.Wm)(s,{to:"/export",class:"router-link"},{default:(0,o.w5)((()=>[(0,o.Wm)(j.l,{active:n.isLinkActive("export"),"prepend-icon":"mdi-export",title:"Export Timesheet",value:"export",color:"#6a70eb"},null,8,["active"])])),_:1})])):(0,o.kq)("",!0)])),_:1})])),_:1})}var P={data(){return{}},components:{},computed:{...(0,m.rn)(["isAdmin"])},methods:{isLinkActive(e){return e===this.$route.path.split("/")[1]}}};const T=(0,k.Z)(P,[["render",V],["__scopeId","data-v-b73ced9a"]]);var L=T,E={name:"App",data:()=>({isUserLogin:!1}),components:{NavBar:D,NavigationDrawer:L},computed:{...(0,m.rn)(["isLogin"])},created(){this.$store.dispatch("checkUserValidity")}};const N=(0,k.Z)(E,[["render",r]]);var $=N,U=(a(7658),a(1597)),O=a(4537),R=a(6205),M=a(5477),A=a(9505),H=a(5159),z=a(2890),q=a(6511),Z=a(5174),F=a(4294),G=a(2483),Y=a(7139),B=a(6422),K=a(8694),J=a(4286),X=a(165),Q=a(8952);const ee=e=>((0,o.dD)("data-v-bc684cda"),e=e(),(0,o.Cn)(),e),te=ee((()=>(0,o._)("h1",{class:"user-login-heading"},"USER LOGIN",-1))),ae={class:"w-100 d-flex flex-row justify-end"},le=ee((()=>(0,o._)("br",null,null,-1))),oe={class:"error-msg"},ie=ee((()=>(0,o._)("h1",{class:"user-login-heading"},"RESET PASSWORD",-1))),ne={key:0},se=ee((()=>(0,o._)("p",{class:"reset-mail-para"}," Please enter your email address. We'll send you a link to reset your password ",-1))),de={key:1,class:"reset-mail-para"},re={class:"email-highlight"},me={class:"w-100 d-flex flex-row justify-end"},ue=ee((()=>(0,o._)("br",null,null,-1))),ce={class:"error-msg"};function pe(e,t,a,i,n,s){return(0,o.wg)(),(0,o.j4)(c.K,{fluid:"",class:"login-bg-container d-flex align-center justify-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(p.o,{justify:"center",align:"center",class:"row"},{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"12",sm:"12",md:"10",lg:"8",class:"column"},{default:(0,o.w5)((()=>[(0,o.Wm)(J.C,{class:"d-flex flex-row justify-center",height:"100%",rounded:""},{default:(0,o.w5)((()=>[(0,o.Wm)(J.C,{width:"55%",class:"pa-5 d-none d-sm-block",rounded:""},{default:(0,o.w5)((()=>[(0,o.Wm)(K.f,{class:"flex-grow-0",width:"100%",cover:"",src:"https://img.freepik.com/free-vector/time-management-successful-teamwork-deadline-stress-overcoming-with-task-planning-control-alarm-clock-flat-composition-vector-illustration_1284-30802.jpg?w=740&t=st=1694003246~exp=1694003846~hmac=19639599c6bb0ae75a0c689223304441d8bf319b08536ff2f287e8401382c940"})])),_:1}),(0,o.Wm)(J.C,{"min-width":"45%",class:"d-flex flex-row align-center justify-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(Q.Qn,null,{default:(0,o.w5)((()=>[n.isLoginView?((0,o.wg)(),(0,o.j4)(J.C,{key:0,"min-width":"95%",class:"form-sheet mx-auto pa-5 d-flex flex-column justify-center align-center",rounded:""},{default:(0,o.w5)((()=>[(0,o.Wm)(J.C,{width:"100%",class:"d-sm-none",rounded:""},{default:(0,o.w5)((()=>[(0,o.Wm)(K.f,{class:"flex-grow-0",width:"100%",cover:"",src:"https://img.freepik.com/premium-vector/woman-sitting-hourglass_165488-4217.jpg?w=740"})])),_:1}),te,(0,o.Wm)(B.O,{modelValue:n.form,"onUpdate:modelValue":t[3]||(t[3]=e=>n.form=e),onSubmit:(0,l.iM)(s.onSubmit,["prevent"]),class:"w-100"},{default:(0,o.w5)((()=>[(0,o.Wm)(X.h,{density:"compact",placeholder:"Employee Id","prepend-inner-icon":"mdi-account",variant:"outlined",rules:[e.fieldRules.required],class:"mb-3",modelValue:n.employeeId,"onUpdate:modelValue":t[0]||(t[0]=e=>n.employeeId=e)},null,8,["rules","modelValue"]),(0,o.Wm)(X.h,{"append-inner-icon":n.visible?"mdi-eye-off":"mdi-eye",type:n.visible?"text":"password",density:"compact",placeholder:"Password","prepend-inner-icon":"mdi-lock-outline",variant:"outlined","onClick:appendInner":t[1]||(t[1]=e=>n.visible=!n.visible),rules:[e.fieldRules.required,n.rules.min],modelValue:n.password,"onUpdate:modelValue":t[2]||(t[2]=e=>n.password=e)},null,8,["append-inner-icon","type","rules","modelValue"]),(0,o._)("div",ae,[(0,o.Wm)(u.T,{variant:"text",color:"blue",onClick:s.toggleLoginView},{default:(0,o.w5)((()=>[(0,o.Uk)("Forgot Password ?")])),_:1},8,["onClick"])]),le,(0,o._)("p",oe,(0,Y.zw)(n.errorMsg),1),(0,o.Wm)(u.T,{disabled:!n.form,loading:n.loading,block:"",color:"primary",size:"large",type:"submit",variant:"elevated"},{default:(0,o.w5)((()=>[(0,o.Uk)(" Log In ")])),_:1},8,["disabled","loading"])])),_:1},8,["modelValue","onSubmit"])])),_:1})):(0,o.kq)("",!0)])),_:1}),(0,o.Wm)(Q.Zy,null,{default:(0,o.w5)((()=>[n.isForgotView?((0,o.wg)(),(0,o.j4)(J.C,{key:0,"min-width":"95%",class:"form-sheet mx-auto pa-5 d-flex flex-column justify-center align-center",rounded:""},{default:(0,o.w5)((()=>[(0,o._)("div",null,[(0,o.Wm)(J.C,{width:"100%",class:"d-sm-none",rounded:""},{default:(0,o.w5)((()=>[(0,o.Wm)(K.f,{class:"flex-grow-0",width:"100%",cover:"",src:"https://img.freepik.com/premium-vector/woman-sitting-hourglass_165488-4217.jpg?w=740"})])),_:1}),ie,(0,o.Wm)(B.O,{modelValue:n.form,"onUpdate:modelValue":t[5]||(t[5]=e=>n.form=e),onSubmit:(0,l.iM)(s.onSubmit,["prevent"]),class:"w-100"},{default:(0,o.w5)((()=>[n.isEmailVerified?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",ne,[se,(0,o.Wm)(X.h,{density:"compact",placeholder:"Verify you Email","prepend-inner-icon":"mdi-email",variant:"outlined",rules:[e.fieldRules.required,e.fieldRules.email],class:"mb-3",modelValue:n.email,"onUpdate:modelValue":t[4]||(t[4]=e=>n.email=e)},null,8,["rules","modelValue"])])),n.isEmailVerified?((0,o.wg)(),(0,o.iD)("div",de,[(0,o._)("p",null,[(0,o.Uk)("Rest Password link sucessfully sent to "),(0,o._)("span",re,(0,Y.zw)(n.email),1)])])):(0,o.kq)("",!0),(0,o._)("div",me,[(0,o.Wm)(u.T,{variant:"text",color:"blue",onClick:s.goToLogin},{default:(0,o.w5)((()=>[(0,o.Uk)("Go To Login")])),_:1},8,["onClick"])]),ue,(0,o._)("p",ce,(0,Y.zw)(n.emailErrorMsg),1),n.isEmailVerified?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(u.T,{key:2,loading:n.emailVerifyLoading,block:"",color:"primary",size:"large",variant:"elevated",onClick:s.verifyAndSendLink},{default:(0,o.w5)((()=>[(0,o.Uk)(" Verify and Send ")])),_:1},8,["loading","onClick"]))])),_:1},8,["modelValue","onSubmit"])])])),_:1})):(0,o.kq)("",!0)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}var he={data(){return{visible:!1,loading:!1,form:!1,password:"",employeeId:"",errorMsg:"",isLoginView:!0,isForgotView:!1,emailErrorMsg:null,emailVerifyLoading:!1,isEmailVerified:!1,email:null,rules:{required:e=>!!e||"Required.",min:e=>e.length>=8||"Min 8 characters"},employeeIdRule:[e=>e.length>0||"Required"]}},computed:{...(0,m.rn)(["fieldRules"])},methods:{async onSubmit(){if(!this.form)return;this.loading=!0;const e={employeeId:this.employeeId,password:this.password},t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)},a=await fetch(`${this.$store.state.backendDomainUrl}/login`,t),l=await a.json();a.ok?await this.$store.dispatch("onSuccesfullLogin",l.jwtToken):this.errorMsg=l.text,this.loading=!1},toggleLoginView(){this.isLoginView=!this.isLoginView,setTimeout((()=>{this.isForgotView=!this.isForgotView}),400)},goToLogin(){this.isForgotView=!this.isForgotView,setTimeout((()=>{this.isLoginView=!this.isLoginView}),400),this.email=null,this.employeeId=null,this.password=null},async verifyAndSendLink(){this.emailVerifyLoading=!0;const e=`${this.$store.state.backendDomainUrl}/forgot-password/`,t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:this.email})},a=await fetch(e,t),l=await a.json();a.ok?(console.log(l),this.isEmailVerified=!0):this.emailErrorMsg=l.message,this.emailVerifyLoading=!1,console.log(l.message)}}};const we=(0,k.Z)(he,[["render",pe],["__scopeId","data-v-bc684cda"]]);var fe=we;const ge={class:"home-bg-container"};function ye(e,t,a,l,i,n){const s=(0,o.up)("SearchTimesheet");return(0,o.wg)(),(0,o.iD)("div",ge,[(0,o.Wm)(s)])}var _e=a(11),ke=a(6572),ve=a(1888),De=a(1334),We=a(9234),je=a(4592),be=a(4413),Se=a(7471),Ce=a(5030);const Ie=e=>((0,o.dD)("data-v-55afeeec"),e=e(),(0,o.Cn)(),e),xe={class:"d-flex flex-row align-center"},Ve={class:"d-flex flex-row align-center"},Pe=Ie((()=>(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("th",{class:"text-left"}," Timesheet Id "),(0,o._)("th",{class:"text-left"}," Employee Id "),(0,o._)("th",{class:"text-left"}," employee Name "),(0,o._)("th",{class:"text-center"}," Week "),(0,o._)("th",{class:"text-center"}," Log Hours "),(0,o._)("th",{class:"text-center"}," Status ")])],-1))),Te={class:"text-center"},Le={class:"text-center"},Ee={key:0,class:"d-flex flex-row justify-center align-center"},Ne=Ie((()=>(0,o._)("p",{class:"font-weight-medium"},"No Data Available",-1))),$e=[Ne];function Ue(e,t,a,l,i,n){const s=(0,o.up)("DateRange"),d=(0,o.up)("WeekSheet"),r=(0,o.up)("TimesheetStatus");return(0,o.wg)(),(0,o.j4)(c.K,{fluid:"",class:"w-100 h-100"},{default:(0,o.w5)((()=>[(0,o.Wm)(_e._,{width:"100%",height:"100%",variant:"elevated",elevation:"10",loading:e.loading},{default:(0,o.w5)((()=>[(0,o.Wm)(Se.i,{dark:"",color:"#6a70eb",height:"50"},{default:(0,o.w5)((()=>[(0,o.Wm)(Ce.q,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Search TimeSheet")])),_:1})])),_:1}),(0,o.Wm)(ke.E,null,{default:(0,o.w5)((()=>[(0,o.Wm)(p.o,{align:"end"},{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"12",md:"3"},{default:(0,o.w5)((()=>[(0,o._)("div",xe,[(0,o.Wm)(je.rL,{items:e.timePeriodOptions,"item-title":"title","item-value":"value",density:"compact",label:"Select a Time Period","hide-details":"",modelValue:e.timePeriod,"onUpdate:modelValue":[t[0]||(t[0]=t=>e.timePeriod=t),n.onupdateInput]},null,8,["items","modelValue","onUpdate:modelValue"])])])),_:1}),(0,o.Wm)(h.D,{cols:"12",md:"3"},{default:(0,o.w5)((()=>[(0,o.Wm)(je.rL,{items:e.statusOptions,"item-title":"title","item-value":"value",density:"compact",variant:"outlined",placeholder:"Status","hide-details":"",modelValue:e.status,"onUpdate:modelValue":[t[1]||(t[1]=t=>e.status=t),n.onupdateInput]},null,8,["items","modelValue","onUpdate:modelValue"])])),_:1}),"customDate"===e.timePeriod?((0,o.wg)(),(0,o.j4)(h.D,{key:0,cols:"12",md:"12"},{default:(0,o.w5)((()=>[(0,o._)("div",Ve,[(0,o.Wm)(s,{onUpdateDateRange:n.updateDateRange},null,8,["onUpdateDateRange"]),(0,o.Wm)(u.T,{variant:"text",icon:"mdi mdi-magnify",class:"mt-7",onClick:n.onupdateInput},null,8,["onClick"])])])),_:1})):(0,o.kq)("",!0)])),_:1})])),_:1}),(0,o.Wm)(ve.Z,null,{default:(0,o.w5)((()=>[(0,o.Wm)(be.Y,{density:"compact"},{default:(0,o.w5)((()=>[Pe,(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.timeSheets,(e=>((0,o.wg)(),(0,o.iD)("tr",{key:e.name},[(0,o._)("td",null,(0,Y.zw)(e.timeSheetId),1),(0,o._)("td",null,(0,Y.zw)(e.employeeId),1),(0,o._)("td",null,(0,Y.zw)(e.employeeName),1),(0,o._)("td",null,[(0,o.Wm)(d,{title:e.week,timeSheet:e,onGetTimeSheets:n.getTimeSheets},null,8,["title","timeSheet","onGetTimeSheets"])]),(0,o._)("td",Te,(0,Y.zw)(e.logHours),1),(0,o._)("td",Le,[(0,o.Wm)(r,{status:e.status},null,8,["status"])])])))),128))])])),_:1})])),_:1}),0===e.timeSheets.length?((0,o.wg)(),(0,o.iD)("div",Ee,$e)):(0,o.kq)("",!0),(0,o.Wm)(De.h,null,{default:(0,o.w5)((()=>[(0,o.Wm)(We.C)])),_:1})])),_:1},8,["loading"])])),_:1})}var Oe=a(1271),Re=a(3833);const Me=e=>((0,o.dD)("data-v-4c8b82a4"),e=e(),(0,o.Cn)(),e),Ae={class:"d-flex flex-row align-center"},He={class:"d-flex flex-column mr-3 w-50"},ze=Me((()=>(0,o._)("label",{class:"calender-input-label"},"Start Date",-1))),qe={class:"d-flex flex-column w-50"},Ze=Me((()=>(0,o._)("label",{class:"calender-input-label"},"End Date",-1)));function Fe(e,t,a,i,n,s){return(0,o.wg)(),(0,o.iD)("div",Ae,[(0,o._)("div",He,[ze,(0,o.wy)((0,o._)("input",{class:"calendar-input",type:"date","onUpdate:modelValue":t[0]||(t[0]=e=>n.startDate=e),onChange:t[1]||(t[1]=(...e)=>s.onDateChange&&s.onDateChange(...e))},null,544),[[l.nr,n.startDate]])]),(0,o._)("div",qe,[Ze,(0,o.wy)((0,o._)("input",{class:"calendar-input",type:"date","onUpdate:modelValue":t[2]||(t[2]=e=>n.endDate=e),onChange:t[3]||(t[3]=(...e)=>s.onDateChange&&s.onDateChange(...e))},null,544),[[l.nr,n.endDate]])])])}var Ge={data(){return{startDate:null,endDate:null}},methods:{onDateChange(){this.$emit("updateDateRange",{startDate:new Date(this.startDate),endDate:new Date(this.endDate)})}}};const Ye=(0,k.Z)(Ge,[["render",Fe],["__scopeId","data-v-4c8b82a4"]]);var Be=Ye,Ke=a(3601);const Je={class:"d-flex flex-row justify-space-between"},Xe={class:"text-h7"},Qe={style:{"font-size":"14px"}},et={class:"text-h9"},tt={key:0},at={key:1},lt={key:2};function ot(e,t,a,l,i,n){const s=(0,o.up)("NonEditableTable"),d=(0,o.up)("AdminButton"),r=(0,o.up)("router-link");return(0,o.wg)(),(0,o.j4)(p.o,{justify:"center"},{default:(0,o.w5)((()=>[(0,o.Wm)(Ke.B,{modelValue:e.dialog,"onUpdate:modelValue":t[1]||(t[1]=t=>e.dialog=t),persistent:"",width:"1024"},{activator:(0,o.w5)((({props:e})=>[(0,o.Wm)(u.T,(0,o.dG)({variant:"text"},e,{class:"week-number-link",onClick:n.onClickWeek}),{default:(0,o.w5)((()=>[(0,o.Uk)((0,Y.zw)(a.title),1)])),_:2},1040,["onClick"])])),default:(0,o.w5)((()=>[(0,o.Wm)(_e._,null,{default:(0,o.w5)((()=>[(0,o.Wm)(ke.E,null,{default:(0,o.w5)((()=>[(0,o._)("div",Je,[(0,o._)("span",Xe,"TimeSheet ID : "+(0,Y.zw)(a.timeSheet.timeSheetId),1),(0,o._)("p",Qe,(0,Y.zw)(e.getFormatedDateString(a.timeSheet.startDate))+" - "+(0,Y.zw)(e.getFormatedDateString(a.timeSheet.endDate)),1),(0,o._)("span",et,"Employee ID: "+(0,Y.zw)(a.timeSheet.employeeId),1)])])),_:1}),(0,o.Wm)(ve.Z,null,{default:(0,o.w5)((()=>[(0,o.Wm)(s,{timeSheetObj:a.timeSheet},null,8,["timeSheetObj"])])),_:1}),(0,o.Wm)(De.h,null,{default:(0,o.w5)((()=>[(0,o.Wm)(We.C),(0,o.Wm)(u.T,{color:"blue-darken-1",variant:"text",onClick:t[0]||(t[0]=t=>e.dialog=!1)},{default:(0,o.w5)((()=>[(0,o.Uk)(" Cancel ")])),_:1}),a.timeSheet.reportingManagerId!==e.employeeId&&!e.isAdmin||"submited"!==a.timeSheet.status?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",tt,[(0,o.Wm)(d,{color:"warning",text:"Re-open",onOnClickOpen:n.onClickOpen,loading:e.openLoading},null,8,["onOnClickOpen","loading"]),(0,o.Wm)(d,{color:"red",text:"Deny",onOnClickDeny:n.onClickDeny,loading:e.denyLoading},null,8,["onOnClickDeny","loading"]),(0,o.Wm)(d,{color:"green",text:"Approve",onOnClickApprove:n.onClickApprove,loading:e.approveLoading},null,8,["onOnClickApprove","loading"])])),e.isAdmin||"open"!==a.timeSheet.status?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",at,[(0,o.Wm)(r,{to:`submit_timesheet/?calendarValue=${a.timeSheet.week}`},{default:(0,o.w5)((()=>[(0,o.Wm)(u.T,{variant:"outlined",color:"green"},{default:(0,o.w5)((()=>[(0,o.Uk)(" Edit & Submit ")])),_:1})])),_:1},8,["to"])])),e.isAdmin||"denied"!==a.timeSheet.status?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",lt,[(0,o.Wm)(r,{to:`submit_timesheet/?calendarValue=${a.timeSheet.week}`},{default:(0,o.w5)((()=>[(0,o.Wm)(u.T,{variant:"outlined",color:"green"},{default:(0,o.w5)((()=>[(0,o.Uk)(" Re-Open ")])),_:1})])),_:1},8,["to"])]))])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}var it=a(3173);const nt=e=>((0,o.dD)("data-v-04b707b5"),e=e(),(0,o.Cn)(),e),st={key:0,class:"w-100 d-flex flex-row align-center justify-center",style:{height:"200px"}},dt=nt((()=>(0,o._)("th",{class:"text-left",width:"250px"}," Projects ",-1))),rt=nt((()=>(0,o._)("th",{style:{"font-size":"14px","font-weight":"bold",color:"black"}}," Total: ",-1))),mt={class:"mt-6 mb-6 font-weight-medium"},ut={class:"text-center"},ct={class:"text-center"},pt={class:"text-center"},ht={class:"text-center"},wt={class:"text-center"},ft={class:"text-center"},gt={class:"text-center"},yt={class:"text-center"},_t=nt((()=>(0,o._)("td",null,[(0,o._)("p",null," Total : ")],-1))),kt={class:"text-center"},vt={class:"text-center"},Dt={class:"text-center"},Wt={class:"text-center"},jt={class:"text-center"},bt={class:"text-center"},St={class:"text-center"},Ct={class:"text-center"};function It(e,t,a,l,i,n){const s=(0,o.up)("CommentPopup");return(0,o.wg)(),(0,o.iD)("div",null,[i.loading?((0,o.wg)(),(0,o.iD)("div",st,[(0,o.Wm)(it.L,{color:"primary",indeterminate:""})])):(0,o.kq)("",!0),i.loading?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(c.K,{key:1},{default:(0,o.w5)((()=>[(0,o.Wm)(p.o,null,{default:(0,o.w5)((()=>[(0,o.Wm)(be.Y,null,{default:(0,o.w5)((()=>[(0,o._)("thead",null,[(0,o._)("tr",null,[dt,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.$store.state.daysOfWeek,(e=>((0,o.wg)(),(0,o.iD)("th",{style:{"font-size":"13px"},class:"text-left",key:e},(0,Y.zw)(e),1)))),128)),rt])]),(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.timeSheetList,((e,t)=>((0,o.wg)(),(0,o.iD)("tr",{key:t},[(0,o._)("td",null,[(0,o._)("div",mt,[(0,o._)("p",null,(0,Y.zw)(e.projectName),1)])]),(0,o._)("td",ut,[(0,o.Wm)(s,{comment:e.mondayComment},{default:(0,o.w5)((()=>[(0,o._)("p",null,(0,Y.zw)(n.checkAndGetValue(e.monday)),1)])),_:2},1032,["comment"])]),(0,o._)("td",ct,[(0,o.Wm)(s,{comment:e.tuesdayComment},{default:(0,o.w5)((()=>[(0,o._)("p",null,(0,Y.zw)(n.checkAndGetValue(e.tuesday)),1)])),_:2},1032,["comment"])]),(0,o._)("td",pt,[(0,o.Wm)(s,{comment:e.wednesdayComment},{default:(0,o.w5)((()=>[(0,o._)("p",null,(0,Y.zw)(n.checkAndGetValue(e.wednesday)),1)])),_:2},1032,["comment"])]),(0,o._)("td",ht,[(0,o.Wm)(s,{comment:e.thursdayComment},{default:(0,o.w5)((()=>[(0,o._)("p",null,(0,Y.zw)(n.checkAndGetValue(e.thursday)),1)])),_:2},1032,["comment"])]),(0,o._)("td",wt,[(0,o.Wm)(s,{comment:e.fridayComment},{default:(0,o.w5)((()=>[(0,o._)("p",null,(0,Y.zw)(n.checkAndGetValue(e.friday)),1)])),_:2},1032,["comment"])]),(0,o._)("td",ft,[(0,o.Wm)(s,{comment:e.satuardayComment},{default:(0,o.w5)((()=>[(0,o._)("p",null,(0,Y.zw)(n.checkAndGetValue(e.satuarday)),1)])),_:2},1032,["comment"])]),(0,o._)("td",gt,[(0,o.Wm)(s,{comment:e.sundayComment},{default:(0,o.w5)((()=>[(0,o._)("p",null,(0,Y.zw)(n.checkAndGetValue(e.sunday)),1)])),_:2},1032,["comment"])]),(0,o._)("td",yt,[(0,o._)("p",null,(0,Y.zw)(e.total),1)])])))),128)),(0,o._)("tr",null,[_t,(0,o._)("td",kt,(0,Y.zw)(n.getTotalHoursOfDay("monday")),1),(0,o._)("td",vt,(0,Y.zw)(n.getTotalHoursOfDay("tuesday")),1),(0,o._)("td",Dt,(0,Y.zw)(n.getTotalHoursOfDay("wednesday")),1),(0,o._)("td",Wt,(0,Y.zw)(n.getTotalHoursOfDay("thursday")),1),(0,o._)("td",jt,(0,Y.zw)(n.getTotalHoursOfDay("friday")),1),(0,o._)("td",bt,(0,Y.zw)(n.getTotalHoursOfDay("satuarday")),1),(0,o._)("td",St,(0,Y.zw)(n.getTotalHoursOfDay("sunday")),1),(0,o._)("td",Ct,(0,Y.zw)(n.getTotal),1)])])])),_:1})])),_:1})])),_:1}))])}const xt={class:"d-flex flex-row align-center justify-center"};function Vt(e,t,a,l,i,n){return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(_e._,{variant:"text"},{default:(0,o.w5)((()=>[(0,o._)("div",xt,[(0,o.WI)(e.$slots,"default"),n.isCommentValid?((0,o.wg)(),(0,o.j4)(u.T,{key:0,variant:"text",icon:"mdi-comment",size:"small",onClick:n.onClickIcon},null,8,["onClick"])):(0,o.kq)("",!0)])])),_:3}),(0,o.Wm)(Ke.B,{width:"500",modelValue:i.dialog,"onUpdate:modelValue":t[0]||(t[0]=e=>i.dialog=e)},{default:(0,o.w5)((()=>[(0,o.Wm)(_e._,null,{default:(0,o.w5)((()=>[(0,o.Wm)(ve.Z,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,Y.zw)(a.comment),1)])),_:1}),(0,o.Wm)(De.h,null,{default:(0,o.w5)((()=>[(0,o.Wm)(We.C),(0,o.Wm)(u.T,{text:"Close",onClick:n.onClose},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}var Pt={data(){return{dialog:!1}},props:["comment"],computed:{isCommentValid(){return"null"!==this.comment&&""!==this.comment&&null!==this.comment}},methods:{onClickIcon(){this.dialog=!0},onClose(){this.dialog=!1}}};const Tt=(0,k.Z)(Pt,[["render",Vt]]);var Lt=Tt,Et={data(){return{selectValue:"",loading:!1,timeSheetList:[],sheetObj:this.timeSheetObj}},props:["timeSheetObj"],components:{CommentPopup:Lt},watch:{timeSheetObj(e){this.sheetObj=e,this.getTimeSheetData()}},computed:{...(0,m.Se)(["getHeaders"]),getTotal(){const e=this.timeSheetList;let t=0;return e.forEach((e=>{t+=e.monday+e.tuesday+e.wednesday+e.thursday+e.friday+e.satuarday+e.sunday})),t.toFixed(1)}},methods:{getTotalHoursOfDay(e){const t=this.timeSheetList;let a=0;return t.forEach((t=>{a+=t[e]})),a.toFixed(1)},async getTimeSheetData(){this.loading=!0;const e=`${this.$store.state.backendDomainUrl}/timesheet/projects/${this.sheetObj.timeSheetId}`,t={method:"GET",...this.getHeaders};try{const a=await fetch(e,t);if(a.ok){const e=await a.json();this.timeSheetList=e}}catch(a){console.log(a)}this.loading=!1},checkAndGetValue(e){return 0===e?null:e}},mounted(){this.getTimeSheetData()}};const Nt=(0,k.Z)(Et,[["render",It],["__scopeId","data-v-04b707b5"]]);var $t=Nt,Ut=a(4842);function Ot(e,t,a,l,i,n){return(0,o.wg)(),(0,o.j4)(Ke.B,{modelValue:i.dialog,"onUpdate:modelValue":t[1]||(t[1]=e=>i.dialog=e),width:"500",persistent:""},{activator:(0,o.w5)((({props:e})=>[(0,o.Wm)(u.T,(0,o.dG)(e,{variant:"outlined",color:a.color,text:a.text,loading:a.loading}),null,16,["color","text","loading"])])),default:(0,o.w5)((({isActive:e})=>[(0,o.Wm)(_e._,{title:`Comment for ${a.text}`},{default:(0,o.w5)((()=>[(0,o.Wm)(ve.Z,null,{default:(0,o.w5)((()=>[(0,o.Wm)(Ut.z,{name:"input-7-1",variant:"outlined","auto-grow":"",modelValue:i.comment,"onUpdate:modelValue":t[0]||(t[0]=e=>i.comment=e),rules:i.commentRules},null,8,["modelValue","rules"])])),_:1}),(0,o.Wm)(De.h,null,{default:(0,o.w5)((()=>[(0,o.Wm)(We.C),(0,o.Wm)(u.T,{text:"Cancel",onClick:t=>e.value=!1},null,8,["onClick"]),(0,o.Wm)(u.T,{variant:"outlined",onClick:n.onClickActionButton,text:a.text,color:a.color,disabled:i.comment.length<1},null,8,["onClick","text","color","disabled"])])),_:2},1024)])),_:2},1032,["title"])])),_:1},8,["modelValue"])}var Rt={data(){return{dialog:!1,comment:"",commentRules:[e=>e.length>0||"Comment Required"]}},props:["color","text","loading"],methods:{async onClickActionButton(){"Approve"===this.text?this.$emit("onClickApprove",this.comment):"Deny"===this.text?this.$emit("onClickDeny",this.comment):"Re-open"===this.text&&this.$emit("onClickOpen",this.comment),this.dialog=!1}}};const Mt=(0,k.Z)(Rt,[["render",Ot]]);var At=Mt,Ht=a(8914),zt=(a(3579),{data:()=>({dialog:!1,isLoading:!1,approveLoading:!1,denyLoading:!1,openLoading:!1}),computed:{...(0,m.rn)(["employeeId","employeeName","isAdmin"]),...(0,m.Se)(["getFormatedDateString"])},components:{NonEditableTable:$t,AdminButton:At},props:["title","timeSheet"],methods:{onClickWeek(){this.$store.dispatch("updateSelectedWeek",this.timeSheet.week)},async onClickApprove(e){const{timeSheetId:t,employeeName:a,startDate:l,endDate:o,officialMail:i}=this.timeSheet;this.approveLoading=!0,await this.$store.dispatch("approveTimeSheet",this.timeSheet.timeSheetId),await this.$store.dispatch("sendEmailOnAction",{timeSheetId:t,employeeName:a,startDate:l,endDate:o,message:e,officialMail:i,action:"Approved"}),this.$emit("getTimeSheets"),this.dialog=!1,this.approveLoading=!1,this.dialog=!1},async onClickOpen(e){const{timeSheetId:t,employeeName:a,startDate:l,endDate:o,officialMail:i}=this.timeSheet;this.openLoading=!0,await this.$store.dispatch("openTimeSheet",this.timeSheet.timeSheetId),await this.$store.dispatch("sendEmailOnAction",{timeSheetId:t,employeeName:a,startDate:l,endDate:o,message:e,officialMail:i,action:"Re-Opened"}),this.$emit("getTimeSheets"),this.openLoading=!1,this.dialog=!1},async onClickDeny(e){const{timeSheetId:t,employeeName:a,startDate:l,endDate:o,officialMail:i}=this.timeSheet;this.denyLoading=!0,await this.$store.dispatch("denyTimeSheet",this.timeSheet.timeSheetId),await this.$store.dispatch("sendEmailOnAction",{timeSheetId:t,employeeName:a,startDate:l,endDate:o,message:e,officialMail:i,action:"Denied"}),this.$emit("getTimeSheets"),this.denyLoading=!1,this.dialog=!1},async downloadPDF(){const e=new Ht["default"];e.text(`Employee ID : ${this.timeSheet.employeeId}`,10,10),e.text(`Employee Name : ${this.timeSheet.employeeName}`,10,20),e.text(`Period : ${this.getFormatedDateString(this.timeSheet.startDate)} - ${this.getFormatedDateString(this.timeSheet.endDate)}`,10,30);const t={method:"GET","Content-Type":"application/json"},a=await fetch(`${this.$store.state.backendDomainUrl}/timesheet/export/${this.timeSheet.timeSheetId}`,t);if(a.ok){const t=await a.json(),l=["Project Id","Project Name","Hours","Cost (Euros)"];let o=0,i=0;const n=t.map((e=>(o+=e.cost,i+=e.total,[e.projectId,e.projectName,e.total,e.cost])));n.push(["Total","",i,o]),e.autoTable({head:[l],body:n,startY:50}),e.save("weekly_timesheet_report.pdf"),this.$store.dispatch("showNotification","Pdf Downloading..")}}}});const qt=(0,k.Z)(zt,[["render",ot],["__scopeId","data-v-070dd06e"]]);var Zt=qt,Ft=a(7103);function Gt(e,t,a,l,i,n){return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(Ft.v,{class:"ma-2",color:n.colorName},{default:(0,o.w5)((()=>[(0,o.Uk)((0,Y.zw)(n.statusName),1)])),_:1},8,["color"])])}var Yt={props:["status"],computed:{colorName(){return"open"===this.status?"blue":"submited"===this.status?"success":"approved"===this.status?"teal":"denied"===this.status?"red":""},statusName(){return"open"===this.status?"Open":"submited"===this.status?"Submitted":"approved"===this.status?"Approved":"denied"===this.status?"Denied":"invalid"}}};const Bt=(0,k.Z)(Yt,[["render",Gt]]);var Kt=Bt,Jt={name:"TimeSheet",data:()=>({dialog:!1,loading:!1,status:"",dateRange:{startDate:new Date,endDate:new Date},statusOptions:[{title:"All",value:""},{title:"Open",value:"open"},{title:"Submited",value:"submited"},{title:"Approved",value:"approved"},{title:"Denied",value:"denied"}],timePeriodOptions:[{value:"month1",title:"Last 1 Month"},{value:"month3",title:"Last 3 Months"},{value:"month6",title:"Last 6 Months"},{value:"lastYear",title:"Previous Year"},{value:"currentYear",title:"Current Year"},{value:"customDate",title:"Custom Date"}],timePeriod:null,timeSheets:[{timeSheetId:1,employeeId:1001,employeeName:"vinith kumar",week:"2023-W37",logHours:"40",status:"open"},{timeSheetId:2,employeeId:1002,employeeName:"Rahul",week:"2023-W36",logHours:"39",status:"submited"}]}),components:{DateRange:Be,WeekSheet:Zt,TimesheetStatus:Kt},computed:{...(0,m.rn)(["employeeId"]),...(0,m.Se)(["getHeaders"])},methods:{onupdateInput(){this.getTimeSheets()},getStartAndEndDate(){const e=new Date;let t=null,a=e;switch(this.timePeriod){case"month1":t=(0,Oe.Z)(e,30);break;case"month3":t=(0,Oe.Z)(e,90);break;case"month6":t=(0,Oe.Z)(e,180);break;case"lastYear":t=(0,Re.Z)(new Date(e.getFullYear(),0,1),1),a=(0,Re.Z)(new Date(e.getFullYear(),11,31),1);break;case"currentYear":t=new Date(e.getFullYear(),0,1);break;case"customDate":t=this.dateRange.startDate,a=this.dateRange.endDate;break;default:t=new Date(e.getFullYear(),0,1);break}return{startDate:(0,q.Z)(t,"yyyy-MM-dd"),endDate:(0,q.Z)(a,"yyyy-MM-dd")}},async getTimeSheets(){this.loading=!0;const{startDate:e,endDate:t}=this.getStartAndEndDate(),a=`${this.$store.state.backendDomainUrl}/timesheets?employee_id=${this.employeeId}&&start_date=${e}&&end_date=${t}&&status=${this.status}`,l={method:"GET",...this.getHeaders},o=await fetch(a,l);if(o.ok){const e=await o.json();this.timeSheets=e}this.loading=!1},updateDateRange(e){this.dateRange=e}},mounted(){this.getTimeSheets()}};const Xt=(0,k.Z)(Jt,[["render",Ue],["__scopeId","data-v-55afeeec"]]);var Qt=Xt,ea={components:{SearchTimesheet:Qt}};const ta=(0,k.Z)(ea,[["render",ye],["__scopeId","data-v-5e4c60e1"]]);var aa=ta;const la=e=>((0,o.dD)("data-v-31f41c5a"),e=e(),(0,o.Cn)(),e),oa={class:"d-flex flex-row align-center"},ia=la((()=>(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("th",null," TimeSheet Id "),(0,o._)("th",{class:"text-left"}," Employee Id "),(0,o._)("th",{class:"text-left"}," employee Name "),(0,o._)("th",{class:"text-center"}," Week "),(0,o._)("th",{class:"text-center"}," Log Hours "),(0,o._)("th",{class:"text-center"}," Status ")])],-1))),na={class:"text-left pa-0",width:"200px"},sa={class:"text-left pa-0",width:"200px"},da={class:"text-left pa-0"},ra={class:"text-left pa-0",width:"250px"},ma={class:"text-center pa-0",width:"150px"},ua={class:"text-center pa-0"},ca={class:"text-center"},pa={class:"text-center"},ha={class:"text-center"},wa={key:0,class:"d-flex flex-row justify-center align-center"},fa=la((()=>(0,o._)("p",{class:"font-weight-medium"},"No Data Available",-1))),ga=[fa];function ya(e,t,a,l,i,n){const s=(0,o.up)("DateRange"),d=(0,o.up)("WeekSheet"),r=(0,o.up)("TimesheetStatus");return(0,o.wg)(),(0,o.j4)(c.K,{fluid:"",class:"w-100 h-100"},{default:(0,o.w5)((()=>[(0,o.Wm)(_e._,{width:"100%",height:"100%",variant:"elevated",elevation:"10",loading:e.loading},{default:(0,o.w5)((()=>[(0,o.Wm)(Se.i,{dark:"",color:"#6a70eb",height:"50"},{default:(0,o.w5)((()=>[(0,o.Wm)(Ce.q,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Employee TimeSheet")])),_:1})])),_:1}),(0,o.Wm)(ke.E,null,{default:(0,o.w5)((()=>[(0,o.Wm)(p.o,{align:"end"},{default:(0,o.w5)((()=>["customDate"===e.timePeriod?((0,o.wg)(),(0,o.j4)(h.D,{key:0,cols:"12",md:"6"},{default:(0,o.w5)((()=>[(0,o._)("div",oa,[(0,o.Wm)(s,{onUpdateDateRange:n.updateDateRange},null,8,["onUpdateDateRange"]),(0,o.Wm)(u.T,{variant:"text",icon:"mdi mdi-magnify",class:"mt-7",onClick:n.onupdateInput},null,8,["onClick"])])])),_:1})):(0,o.kq)("",!0)])),_:1})])),_:1}),(0,o.Wm)(ve.Z,null,{default:(0,o.w5)((()=>[(0,o.Wm)(be.Y,{density:"compact"},{default:(0,o.w5)((()=>[ia,(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("th",na,[(0,o.Wm)(X.h,{loading:e.loading,density:"compact",variant:"outlined","hide-details":"",placeholder:"Search TimeSheet Id",type:"number",modelValue:e.timeSheetId,"onUpdate:modelValue":t[0]||(t[0]=t=>e.timeSheetId=t),onInput:n.onupdateInput},null,8,["loading","modelValue","onInput"])]),(0,o._)("th",sa,[(0,o.Wm)(X.h,{loading:e.loading,density:"compact",variant:"outlined","hide-details":"",placeholder:"Search Employee Id",modelValue:e.employeeId,"onUpdate:modelValue":t[1]||(t[1]=t=>e.employeeId=t),onInput:n.onupdateInput},null,8,["loading","modelValue","onInput"])]),(0,o._)("th",da,[(0,o.Wm)(X.h,{loading:e.loading,density:"compact",variant:"outlined","hide-details":"",placeholder:"Search Name",modelValue:e.employeeName,"onUpdate:modelValue":t[2]||(t[2]=t=>e.employeeName=t),onInput:n.onupdateInput},null,8,["loading","modelValue","onInput"])]),(0,o._)("th",ra,[(0,o.Wm)(je.rL,{items:e.timePeriodOptions,"item-title":"title","item-value":"value",density:"compact",variant:"outlined",placeholder:"Select a Time Period","hide-details":"",modelValue:e.timePeriod,"onUpdate:modelValue":[t[3]||(t[3]=t=>e.timePeriod=t),n.onupdateInput]},null,8,["items","modelValue","onUpdate:modelValue"])]),(0,o._)("th",ma,[(0,o.Wm)(X.h,{loading:e.loading,density:"compact",variant:"outlined","hide-details":"",placeholder:"Search Hours",type:"number",modelValue:e.logHours,"onUpdate:modelValue":t[4]||(t[4]=t=>e.logHours=t),onInput:n.onupdateInput},null,8,["loading","modelValue","onInput"])]),(0,o._)("th",ua,[(0,o.Wm)(je.rL,{items:e.statusOptions,"item-title":"title","item-value":"value",density:"compact",variant:"outlined",placeholder:"Status","hide-details":"",modelValue:e.status,"onUpdate:modelValue":[t[5]||(t[5]=t=>e.status=t),n.onupdateInput]},null,8,["items","modelValue","onUpdate:modelValue"])])])]),(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.timeSheets,(e=>((0,o.wg)(),(0,o.iD)("tr",{key:e.name},[(0,o._)("td",null,(0,Y.zw)(e.timeSheetId),1),(0,o._)("td",null,(0,Y.zw)(e.employeeId),1),(0,o._)("td",null,(0,Y.zw)(e.employeeName),1),(0,o._)("td",ca,[(0,o.Wm)(d,{title:e.week,timeSheet:e,onGetTimeSheets:n.getTimeSheets},null,8,["title","timeSheet","onGetTimeSheets"])]),(0,o._)("td",pa,(0,Y.zw)(e.logHours),1),(0,o._)("td",ha,[(0,o.Wm)(r,{status:e.status},null,8,["status"])])])))),128))])])),_:1})])),_:1}),0===e.timeSheets.length?((0,o.wg)(),(0,o.iD)("div",wa,ga)):(0,o.kq)("",!0),(0,o.Wm)(De.h,null,{default:(0,o.w5)((()=>[(0,o.Wm)(We.C)])),_:1})])),_:1},8,["loading"])])),_:1})}var _a={name:"TimeSheet",data:()=>({dialog:!1,loading:!1,timeSheetId:"",employeeId:"",employeeName:"",logHours:"",status:"",statusOptions:[{title:"All",value:""},{title:"Open",value:"open"},{title:"Submited",value:"submited"},{title:"Approved",value:"approved"},{title:"Denied",value:"denied"}],dateRange:{startDate:new Date,endDate:new Date},timePeriodOptions:[{value:"month1",title:"Last 1 Month"},{value:"month3",title:"Last 3 Months"},{value:"month6",title:"Last 6 Months"},{value:"lastYear",title:"Previous Year"},{value:"currentYear",title:"Current Year"},{value:"customDate",title:"Custom Date"}],timePeriod:null,timeSheets:[{employeeId:1001,employeeName:"vinith kumar",week:"2023-W37",logHours:"40",status:"Pending"},{employeeId:1002,employeeName:"Rahul",week:"2023-W36",logHours:"39",status:"submited"}]}),components:{DateRange:Be,WeekSheet:Zt,TimesheetStatus:Kt},watch:{timeSheetId(e){null===e&&(this.timeSheetId="")},employeeId(e){null===e&&(this.employeeId="")},employeeName(e){null===e&&(this.employeeName="")},logHours(e){null===e&&(this.logHours="")},status(e){null===e&&(this.filterStatus="")}},computed:{...(0,m.Se)(["getHeaders"])},methods:{async onupdateInput(){this.loading=!0,await this.getTimeSheets(),this.loading=!1},getStartAndEndDate(){const e=new Date;let t=null,a=e;switch(this.timePeriod){case"month1":t=(0,Oe.Z)(e,30);break;case"month3":t=(0,Oe.Z)(e,90);break;case"month6":t=(0,Oe.Z)(e,180);break;case"lastYear":t=(0,Re.Z)(new Date(e.getFullYear(),0,1),1),a=(0,Re.Z)(new Date(e.getFullYear(),11,31),1);break;case"currentYear":t=new Date(e.getFullYear(),0,1);break;case"customDate":t=this.dateRange.startDate,a=this.dateRange.endDate;break;default:t=new Date(e.getFullYear(),0,1);break}return{startDate:(0,q.Z)(t,"yyyy-MM-dd"),endDate:(0,q.Z)(a,"yyyy-MM-dd")}},async getTimeSheets(){const{startDate:e,endDate:t}=this.getStartAndEndDate(),a=`${this.$store.state.backendDomainUrl}/timesheets?timesheet_id=${this.timeSheetId}&&employee_id=${this.employeeId}&&employee_name=${this.employeeName}&&log_hours=${this.logHours}&&start_date=${e}&&end_date=${t}&&status=${this.status}`,l={method:"GET",...this.getHeaders},o=await fetch(a,l);if(o.ok){const e=await o.json();this.timeSheets=e}},updateDateRange(e){this.dateRange=e},async exportMonthly(){const e=`${this.$store.state.backendDomainUrl}/timesheet/monthly_report/1001`,t={method:"GET",...this.getHeaders},a=await fetch(e,t);if(a.ok){const e=await a.json();this.downloadPDF(e)}},async downloadPDF(e){const t=new Ht["default"],a=["Project Id","Project Name","Hours","Cost"];let l=0,o=0;const i=e.map((e=>(l+=e.cost,o+=e.total,[e.projectId,e.projectName,e.total,e.cost])));i.push(["Total","",o,l]),t.autoTable({head:[a],body:i,startY:50}),t.save("monthly_timesheet_report.pdf"),this.$store.dispatch("showNotification","Pdf Downloading..")}},mounted(){this.getTimeSheets()}};const ka=(0,k.Z)(_a,[["render",ya],["__scopeId","data-v-31f41c5a"]]);var va=ka,Da=a(1222),Wa=a(4846),ja=a(1275);const ba=e=>((0,o.dD)("data-v-0fa79bae"),e=e(),(0,o.Cn)(),e),Sa={class:"d-flex flex-row align-center"},Ca={key:0},Ia={key:1},xa={key:2},Va={class:"errorMsg text-subtitle-2"},Pa={class:"errorMsg"},Ta={class:"errorMsg"},La=ba((()=>(0,o._)("th",null," Employee Id ",-1))),Ea=ba((()=>(0,o._)("th",null," Employee Name ",-1))),Na=ba((()=>(0,o._)("th",null," Email ",-1))),$a=ba((()=>(0,o._)("th",null," Position ",-1)));function Ua(e,t,a,i,n,s){const d=(0,o.up)("DateRange");return(0,o.wg)(),(0,o.j4)(c.K,{fluid:"",class:"w-100",style:{height:"100vh"}},{default:(0,o.w5)((()=>[(0,o.Wm)(_e._,{class:"overflow-y-auto",width:"100%",height:"100%",variant:"elevated",elevation:"10"},{default:(0,o.w5)((()=>[(0,o.Wm)(Se.i,{dark:"",color:"#6a70eb",height:"50"},{default:(0,o.w5)((()=>[(0,o.Wm)(Ce.q,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Export Timesheet")])),_:1})])),_:1}),(0,o.Wm)(ke.E,null,{default:(0,o.w5)((()=>[(0,o.Wm)(p.o,null,{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"12",md:"3"},{default:(0,o.w5)((()=>[(0,o._)("div",Sa,[(0,o.Wm)(je.rL,{items:n.timePeriodOptions,"item-title":"title","item-value":"value",density:"compact",variant:"outlined",placeholder:"Time Period","hide-details":"",modelValue:n.timePeriod,"onUpdate:modelValue":[t[0]||(t[0]=e=>n.timePeriod=e),s.onSelectTimePeriod]},null,8,["items","modelValue","onUpdate:modelValue"])])])),_:1}),(0,o.Wm)(h.D,{cols:"12",md:"3"},{default:(0,o.w5)((()=>["week"===n.timePeriod?((0,o.wg)(),(0,o.iD)("div",Ca,[(0,o.wy)((0,o._)("input",{type:"week",class:"week-calendar-input","onUpdate:modelValue":t[1]||(t[1]=e=>n.weekValue=e)},null,512),[[l.nr,n.weekValue]])])):(0,o.kq)("",!0),"month"===n.timePeriod?((0,o.wg)(),(0,o.iD)("div",Ia,[(0,o.wy)((0,o._)("input",{type:"month",class:"week-calendar-input","onUpdate:modelValue":t[2]||(t[2]=e=>n.monthValue=e)},null,512),[[l.nr,n.monthValue]])])):(0,o.kq)("",!0),"custom"===n.timePeriod?((0,o.wg)(),(0,o.iD)("div",xa,[(0,o.Wm)(d,{onUpdateDateRange:s.updateDateRange},null,8,["onUpdateDateRange"])])):(0,o.kq)("",!0)])),_:1})])),_:1}),(0,o.Wm)(p.o,null,{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"2"},{default:(0,o.w5)((()=>[(0,o._)("div",null,[(0,o.Wm)(ja.r,{modelValue:n.exportType,"onUpdate:modelValue":t[3]||(t[3]=e=>n.exportType=e),inline:""},{default:(0,o.w5)((()=>[(0,o.Wm)(Wa.R,{label:"PDF",value:"pdf"}),(0,o.Wm)(Wa.R,{label:"EXCEL",value:"excel"})])),_:1},8,["modelValue"])])])),_:1}),(0,o.Wm)(h.D,{cols:"2"},{default:(0,o.w5)((()=>[(0,o._)("div",null,[(0,o.Wm)(u.T,{color:"success",onClick:s.onClickExportButton,loading:n.exportLoading},{default:(0,o.w5)((()=>[(0,o.Uk)(" Export ")])),_:1},8,["onClick","loading"]),(0,o._)("p",Va,(0,Y.zw)(n.emptyMsg),1)])])),_:1})])),_:1}),(0,o.Wm)(p.o,{justify:"end"},{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"12",md:"3"},{default:(0,o.w5)((()=>[(0,o._)("div",null,[(0,o.Wm)(X.h,{density:"compact",variant:"outlined",type:"number","hide-details":"",placeholder:"Search Employee Id",modelValue:n.searchEmployeeId,"onUpdate:modelValue":t[4]||(t[4]=e=>n.searchEmployeeId=e),onInput:s.onupdateinput},null,8,["modelValue","onInput"]),(0,o._)("p",Pa,(0,Y.zw)(n.employeeIdMsg),1)])])),_:1}),(0,o.Wm)(h.D,{cols:"12",md:"3"},{default:(0,o.w5)((()=>[(0,o._)("div",null,[(0,o.Wm)(X.h,{density:"compact",variant:"outlined","hide-details":"",placeholder:"Search Employee Name",modelValue:n.searchEmployeeName,"onUpdate:modelValue":t[5]||(t[5]=e=>n.searchEmployeeName=e),onInput:s.onupdateinput},null,8,["modelValue","onInput"]),(0,o._)("p",Ta,(0,Y.zw)(n.employeeIdMsg),1)])])),_:1})])),_:1})])),_:1}),(0,o.Wm)(be.Y,{density:"compact"},{default:(0,o.w5)((()=>[(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("th",null,[(0,o.Wm)(Da.x,{modelValue:n.isSelectAll,"onUpdate:modelValue":[t[6]||(t[6]=e=>n.isSelectAll=e),s.onClickSelectAll],label:"All",color:"primary","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),La,Ea,Na,$a])]),(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.employeesList,(e=>((0,o.wg)(),(0,o.iD)("tr",{key:e},[(0,o._)("td",null,[(0,o.Wm)(Da.x,{modelValue:n.selectedEmployeeIds,"onUpdate:modelValue":t[7]||(t[7]=e=>n.selectedEmployeeIds=e),color:"primary",value:e.employeeId,"hide-details":""},null,8,["modelValue","value"])]),(0,o._)("td",null,(0,Y.zw)(e.employeeId),1),(0,o._)("td",null,(0,Y.zw)(e.employeeName),1),(0,o._)("td",null,(0,Y.zw)(e.employeeEmail),1),(0,o._)("td",null,(0,Y.zw)(e.positionName),1)])))),128))])])),_:1}),(0,o.Wm)(ve.Z),(0,o.Wm)(De.h,null,{default:(0,o.w5)((()=>[(0,o.Wm)(We.C)])),_:1})])),_:1})])),_:1})}var Oa=a(7092),Ra={data(){return{weekValue:"",monthValue:"",timePeriod:null,exportLoading:!1,emptyMsg:"",employeeIdMsg:"",searchEmployeeId:"",searchEmployeeName:"",employeesList:[],exportType:null,timePeriodOptions:[{title:"Export By Week",value:"week"},{title:"Export By Month",value:"month"},{title:"Custom Date",value:"custom"}],selectedEmployeeIds:[],isSelectAll:!1,startDate:null,endDate:null}},components:{DateRange:Be},computed:{...(0,m.Se)(["getEmployeeDetails","getFormatedDateString","getHeaders"])},watch:{selectedEmployeeIds(e){e.length!==this.employeesList.length?this.isSelectAll=!1:this.isSelectAll=!0}},methods:{onClickSelectAll(e){this.selectedEmployeeIds=e?this.employeesList.map((e=>e.employeeId)):[]},onSelectTimePeriod(e){this.timePeriod=e},onupdateinput(){this.getEmployees()},updateDateRange({startDate:e,endDate:t}){this.startDate=(0,q.Z)(e,"yyyy-MM-dd"),this.endDate=(0,q.Z)(t,"yyyy-MM-dd")},async onClickExportButton(){this.emptyMsg="",this.employeeIdMsg="",this.exportLoading=!0;let e=[];for(let t of this.selectedEmployeeIds){const a=await this.getEmployeeDetails(t);let l=[];"week"===this.timePeriod?l=await this.getWeekData(t):"month"===this.timePeriod?l=await this.getMonthData(t):"custom"===this.timePeriod&&(l=await this.getCustomDateData(t)),e.push({employeeData:a,data:l})}0!==e.length?"pdf"===this.exportType?this.downloadPDF(e):this.downloadExcel(e):this.emptyMsg="Select Atleast One",this.exportLoading=!1},async getWeekData(e){const t=`${this.$store.state.backendDomainUrl}/timesheet/employee/${e}/weekly_export/${this.weekValue}`,a={method:"GET",...this.getHeaders},l=await fetch(t,a);return l.ok?await l.json():[]},getPeriod(){if("week"===this.timePeriod){const[e,t]=this.weekValue.split("-W"),a=new Date(e,0,1);let l;l=(0,U.Z)(a)?a:(0,O.Z)(a)||(0,R.Z)(a)||(0,M.Z)(a)?(0,A.Z)(a):(0,H.Z)(a);const o=(0,z.Z)(l,t-1),i=(0,Z.Z)(o,6);return`${(0,q.Z)(o,"MMM dd")} - ${(0,q.Z)(i,"MMM dd")} (${this.weekValue})`}if("month"===this.timePeriod){const[e,t]=this.monthValue.split("-"),a=new Date(e,t-1,1);return(0,q.Z)(a,"LLL-yyyy")}return"custom"===this.timePeriod?`${this.getFormatedDateString(this.startDate)} - ${this.getFormatedDateString(this.endDate)}`:"-"},async getMonthData(e){const t=`${this.$store.state.backendDomainUrl}/timesheet/employee/${e}/monthly_export/${this.monthValue}`,a={method:"GET",...this.getHeaders},l=await fetch(t,a);if(l.ok){const e=await l.json();return e}return[]},async getCustomDateData(e){const t=`${this.$store.state.backendDomainUrl}/timesheet/employee/${e}/custom_export/?startDate=${this.startDate}&&endDate=${this.endDate}`,a={method:"GET",...this.getHeaders},l=await fetch(t,a);if(l.ok){const e=await l.json();return e}return[]},async downloadPDF(e){const t=new Ht["default"];for(let a of e){const{employeeData:l,data:o}=a;t.text(`Employee ID : ${l.employeeId}`,10,10),t.text(`Employee Name : ${l.employeeName}`,10,20),t.text(`Position : ${l.position}`,10,30),t.text(`Period : ${this.getPeriod()}`,10,40);const i=["Project Id","Project Name","Type","Role","Hours","Rate","Cost","Currency","Customer","Cost Type"];let n=0,s=0;const d=o.map((e=>(n+="Billable"===e.projectType?e.total:0,s+="Non-Billable"===e.projectType?e.total:0,[e.projectId,e.projectName,e.projectType,e.positionName,e.total,e.rate,e.cost,e.currency,e.customerName,e.costType])));d.push([]),d.push(["Total","","Billable","",n,""]),d.push(["Total","","Non-Billable","",s,"",""]),t.autoTable({head:[i],body:d,startY:50}),e[e.length-1]!==a&&t.addPage()}"week"===this.timePeriod?t.save("weekly_report_report.pdf"):"month"===this.timePeriod?t.save("monthly_report.pdf"):"custom"===this.timePeriod&&t.save("custom_date_report.pdf"),this.$store.dispatch("showNotification","Pdf Downloading..")},downloadExcel(e){const t=Oa.P6.book_new();for(let a of e){const{employeeData:e,data:l}=a;let o=0,i=0;const n=l.map((e=>(o+="Billable"===e.projectType?e.total:0,i+="Non-Billable"===e.projectType?e.total:0,[e.projectId,e.projectName,e.projectType,e.positionName,e.total,e.rate,e.cost,e.currency,e.customerName,e.costType]))),s=[["Employee Id",e.employeeId],["Employee name",e.employeeName],["Position",e.position],["Period",this.getPeriod()],[],["Project Id","Project Name","Type","Role","Hours","Rate","Cost","Currency","Customer","Cost Type"],...n,[],["Total","","Billable","",o],["Total","","Non-Billable","",i]],d=Oa.P6.json_to_sheet(s);Oa.P6.book_append_sheet(t,d,e.employeeName)}"week"===this.timePeriod?(0,Oa.NC)(t,"weekly_timesheet_report.xlsx"):"month"===this.timePeriod?(0,Oa.NC)(t,"monthly_timesheet_report.xlsx"):"custom"===this.timePeriod&&(0,Oa.NC)(t,"custom_date_timesheet_report.xlsx")},async getEmployees(){this.loading=!0;const e=`${this.$store.state.backendDomainUrl}/employees?employeeId=${this.searchEmployeeId}&&employeeName=${this.searchEmployeeName}`,t={method:"GET",...this.getHeaders},a=await fetch(e,t);if(a.ok){const e=await a.json();this.employeesList=e,this.loading=!1}}},mounted(){this.getEmployees()}};const Ma=(0,k.Z)(Ra,[["render",Ua],["__scopeId","data-v-0fa79bae"]]);var Aa=Ma;const Ha={key:0,class:"d-flex flex-row align-center justify-center",style:{height:"200px",width:"100%",border:"1px solid red"}},za={class:"d-flex flex-row justify-space-between"},qa={class:"text-h7"},Za={style:{"font-size":"14px"}},Fa={class:"text-h9"},Ga={key:0};function Ya(e,t,a,l,i,n){const s=(0,o.up)("NonEditableTable"),d=(0,o.up)("AdminButton");return(0,o.wg)(),(0,o.j4)(c.K,{class:"w-100 h-100 d-flex flex-row justify-center align-start"},{default:(0,o.w5)((()=>[i.loading?((0,o.wg)(),(0,o.iD)("div",Ha)):(0,o.kq)("",!0),i.loading?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(_e._,{key:1,width:"1024",variant:"elevated",elevation:"10",loading:i.loading},{default:(0,o.w5)((()=>[(0,o.Wm)(Se.i,{dark:"",color:"#6a70eb",height:"50"},{default:(0,o.w5)((()=>[(0,o.Wm)(Ce.q,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Week TimeSheet")])),_:1})])),_:1}),(0,o.Wm)(ke.E,null,{default:(0,o.w5)((()=>[(0,o._)("div",za,[(0,o._)("span",qa,"TimeSheet ID : "+(0,Y.zw)(e.$route.params.timeSheetId),1),(0,o._)("p",Za,(0,Y.zw)(e.getFormatedDateString(e.timeSheet.startDate))+" - "+(0,Y.zw)(e.getFormatedDateString(e.timeSheet.endDate)),1),(0,o._)("span",Fa,"Employee ID: "+(0,Y.zw)(e.timeSheet.employeeId),1)])])),_:1}),(0,o.Wm)(ve.Z,null,{default:(0,o.w5)((()=>[(0,o._)("div",null,[(0,o.Wm)(s,{timeSheetObj:e.timeSheet},null,8,["timeSheetObj"])])])),_:1}),(0,o.Wm)(De.h,null,{default:(0,o.w5)((()=>[(0,o.Wm)(We.C),e.timeSheet.reportingManagerId!==e.employeeId&&!e.isAdmin||"submited"!==e.timeSheet.status?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",Ga,[(0,o.Wm)(d,{color:"warning",text:"Re-open",onOnClickOpen:n.onClickOpen,loading:i.openLoading},null,8,["onOnClickOpen","loading"]),(0,o.Wm)(d,{color:"red",text:"Deny",onOnClickDeny:n.onClickDeny,loading:i.denyLoading},null,8,["onOnClickDeny","loading"]),(0,o.Wm)(d,{color:"green",text:"Approve",onOnClickApprove:n.onClickApprove,loading:i.approveLoading},null,8,["onOnClickApprove","loading"])]))])),_:1})])),_:1},8,["loading"]))])),_:1})}var Ba={data(){return{loading:!0,timesheet:{},openLoading:!1,denyLoading:!1,approveLoading:!1,submitLoading:!1}},components:{NonEditableTable:$t,AdminButton:At},computed:{...(0,m.rn)(["isAdmin","employeeId"]),...(0,m.Se)(["getFormatedDateString","getHeaders"])},methods:{async getTimeSheet(){this.loading=!0;const e=`${this.$store.state.backendDomainUrl}/timesheet/${this.$route.params.timeSheetId}`,t={method:"GET",...this.getHeaders},a=await fetch(e,t);if(a.ok){const e=await a.json();console.log(e),this.timeSheet=e,this.loading=!1}},async onClickApprove(e){const{timeSheetId:t,employeeName:a,startDate:l,endDate:o,officialMail:i}=this.timeSheet;this.approveLoading=!0,await this.$store.dispatch("approveTimeSheet",this.timeSheet.timeSheetId),await this.$store.dispatch("sendEmailOnAction",{timeSheetId:t,employeeName:a,startDate:l,endDate:o,message:e,officialMail:i,action:"Approved"}),this.getTimeSheet(),this.approveLoading=!1},async onClickSubmit(){this.submitLoading=!0,await this.$store.dispatch("submitTimeSheet",this.timeSheet.timeSheetId),await this.$store.dispatch("sendEmail",{timeSheetId:this.timeSheet.timeSheetId,startDate:this.timeSheet.startDate,endDate:this.timeSheet.endDate}),this.getTimeSheet(),this.submitLoading=!1,this.dialog=!1},async onClickOpen(e){const{timeSheetId:t,employeeName:a,startDate:l,endDate:o,officialMail:i}=this.timeSheet;this.openLoading=!0,await this.$store.dispatch("openTimeSheet",this.timeSheet.timeSheetId),await this.$store.dispatch("sendEmailOnAction",{timeSheetId:t,employeeName:a,startDate:l,endDate:o,message:e,officialMail:i,action:"Re-Opened"}),this.getTimeSheet(),this.openLoading=!1,this.dialog=!1},async onClickDeny(e){const{timeSheetId:t,employeeName:a,startDate:l,endDate:o,officialMail:i}=this.timeSheet;this.denyLoading=!0,await this.$store.dispatch("denyTimeSheet",this.timeSheet.timeSheetId),await this.$store.dispatch("sendEmailOnAction",{timeSheetId:t,employeeName:a,startDate:l,endDate:o,message:e,officialMail:i,action:"Denied"}),this.getTimeSheet(),this.denyLoading=!1,this.dialog=!1}},async mounted(){await this.getTimeSheet(),this.$store.dispatch("updateSelectedWeek",this.timeSheet.week)}};const Ka=(0,k.Z)(Ba,[["render",Ya]]);var Ja=Ka;const Xa={key:1,class:"d-flex flex-row justify-center"},Qa={key:0,style:{height:"400px",width:"100%"},class:"d-flex flex-row align-center justify-center"};function el(e,t,a,l,i,n){const s=(0,o.up)("NewEmployeePopup"),d=(0,o.up)("router-link"),r=(0,o.up)("DeleteButton");return(0,o.wg)(),(0,o.j4)(c.K,{fluid:"",class:"w-100",style:{height:"100vh"}},{default:(0,o.w5)((()=>[(0,o.Wm)(_e._,{class:"h-100 overflow-y-auto",variant:"elevated",elevation:"10"},{default:(0,o.w5)((()=>[(0,o.Wm)(Se.i,{dark:"",color:"#6a70eb",height:"50"},{default:(0,o.w5)((()=>[(0,o.Wm)(Ce.q,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Employees List")])),_:1})])),_:1}),(0,o.Wm)(ke.E,null,{default:(0,o.w5)((()=>[(0,o.Wm)(p.o,null,{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"12",md:"3"},{default:(0,o.w5)((()=>[(0,o.Wm)(X.h,{loading:i.loading,density:"compact",variant:"outlined","hide-details":"",placeholder:"Search Employee Id",modelValue:i.employeeId,"onUpdate:modelValue":t[0]||(t[0]=e=>i.employeeId=e),onInput:n.onupdateInput},null,8,["loading","modelValue","onInput"])])),_:1}),(0,o.Wm)(h.D,{cols:"12",md:"3"},{default:(0,o.w5)((()=>[(0,o.Wm)(X.h,{loading:i.loading,density:"compact",variant:"outlined","hide-details":"",placeholder:"Search Name",modelValue:i.employeeName,"onUpdate:modelValue":t[1]||(t[1]=e=>i.employeeName=e),onInput:n.onupdateInput},null,8,["loading","modelValue","onInput"])])),_:1})])),_:1}),(0,o.Wm)(p.o,null,{default:(0,o.w5)((()=>[(0,o.Wm)(s,{onGetEmployees:n.getEmployees},null,8,["onGetEmployees"])])),_:1})])),_:1}),(0,o.Wm)(ve.Z,null,{default:(0,o.w5)((()=>[i.loading?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(b.i,{key:0},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.employeesList,(e=>((0,o.wg)(),(0,o.j4)(j.l,{key:e.employeeId,title:`${e.employeeId} - ${e.employeeName}`,subtitle:`Position : ${e.positionName}`,elevation:"4",lines:"three",variant:"elevated",class:"mb-2",rounded:!0},{default:(0,o.w5)((()=>[(0,o.Wm)(p.o,{justify:"end"},{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"2"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{to:`project_assignment/${e.employeeId}`},{default:(0,o.w5)((()=>[(0,o.Wm)(u.T,{color:"primary"},{default:(0,o.w5)((()=>[(0,o.Uk)("Assign Projects")])),_:1})])),_:2},1032,["to"])])),_:2},1024),(0,o.Wm)(h.D,{cols:"2"},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{onOnRemove:n.deleteEmployee,id:e.employeeId,text:"employee"},{default:(0,o.w5)((({onOpenDialog:e})=>[(0,o.Wm)(u.T,{color:"#ab1e02",onClick:e},{default:(0,o.w5)((()=>[(0,o.Uk)("DELETE EMPLOYEE")])),_:2},1032,["onClick"])])),_:2},1032,["onOnRemove","id"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["title","subtitle"])))),128))])),_:1})),0===i.employeesList.length?((0,o.wg)(),(0,o.iD)("div",Xa," No Data Found ")):(0,o.kq)("",!0)])),_:1}),i.loading?((0,o.wg)(),(0,o.iD)("div",Qa,[(0,o.Wm)(it.L,{indeterminate:"",color:"primary"})])):(0,o.kq)("",!0)])),_:1})])),_:1})}function tl(e,t,a,l,i,n){return(0,o.wg)(),(0,o.j4)(c.K,null,{default:(0,o.w5)((()=>[(0,o.Wm)(Ke.B,{modelValue:i.dialog,"onUpdate:modelValue":t[11]||(t[11]=e=>i.dialog=e),persistent:"",width:"1024"},{activator:(0,o.w5)((({props:e})=>[(0,o.Wm)(u.T,(0,o.dG)({variant:"outlined","prepend-icon":"mdi-plus",color:"primary"},e),{default:(0,o.w5)((()=>[(0,o.Uk)(" New ")])),_:2},1040)])),default:(0,o.w5)((()=>[(0,o.Wm)(_e._,null,{default:(0,o.w5)((()=>[(0,o.Wm)(ke.E,null,{default:(0,o.w5)((()=>[(0,o.Uk)(" Add Employee ")])),_:1}),(0,o.Wm)(ve.Z,null,{default:(0,o.w5)((()=>[(0,o.Wm)(B.O,{modelValue:i.form,"onUpdate:modelValue":t[9]||(t[9]=e=>i.form=e)},{default:(0,o.w5)((()=>[(0,o.Wm)(p.o,{align:"center"},{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"4"},{default:(0,o.w5)((()=>[(0,o.Wm)(X.h,{density:"compact",variant:"outlined",label:"Employee Name",rules:[i.rules.required],placeholder:"Employee Name",modelValue:i.employeeName,"onUpdate:modelValue":t[0]||(t[0]=e=>i.employeeName=e)},null,8,["rules","modelValue"])])),_:1}),(0,o.Wm)(h.D,{cols:"4"},{default:(0,o.w5)((()=>[(0,o.Wm)(X.h,{density:"compact",variant:"outlined",label:"Contact Number",type:"number",rules:[i.rules.required],placeholder:"Contact Number",modelValue:i.contactNumber,"onUpdate:modelValue":t[1]||(t[1]=e=>i.contactNumber=e)},null,8,["rules","modelValue"])])),_:1})])),_:1}),(0,o.Wm)(p.o,null,{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"4"},{default:(0,o.w5)((()=>[(0,o.Wm)(X.h,{density:"compact",variant:"outlined",label:"Personal Main Id",rules:[i.rules.required,i.rules.email],placeholder:"Personal Mail Id",modelValue:i.personalMail,"onUpdate:modelValue":t[2]||(t[2]=e=>i.personalMail=e)},null,8,["rules","modelValue"])])),_:1}),(0,o.Wm)(h.D,{cols:"4"},{default:(0,o.w5)((()=>[(0,o.Wm)(X.h,{density:"compact",variant:"outlined",label:"Official Mail Id",rules:[i.rules.required,i.rules.email],placeholder:"Official Mail Id",modelValue:i.officialMail,"onUpdate:modelValue":t[3]||(t[3]=e=>i.officialMail=e)},null,8,["rules","modelValue"])])),_:1})])),_:1}),(0,o.Wm)(p.o,null,{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"4"},{default:(0,o.w5)((()=>[(0,o.Wm)(X.h,{density:"compact",variant:"outlined",rules:[i.rules.required],placeholder:"Date Of Joining",label:"Date of Joining",modelValue:i.doj,"onUpdate:modelValue":t[4]||(t[4]=e=>i.doj=e),type:"date"},null,8,["rules","modelValue"])])),_:1}),(0,o.Wm)(h.D,{cols:"4"},{default:(0,o.w5)((()=>[(0,o.Wm)(je.rL,{density:"compact",variant:"outlined",label:"Reporting Manger",items:i.employeesList,"item-value":"employeeId","item-title":"employeeName",rules:[i.rules.required],placeholder:"Reporting Manager",modelValue:i.reportingManagerId,"onUpdate:modelValue":t[5]||(t[5]=e=>i.reportingManagerId=e)},null,8,["items","rules","modelValue"])])),_:1})])),_:1}),(0,o.Wm)(p.o,null,{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"4"},{default:(0,o.w5)((()=>[(0,o.Wm)(je.rL,{density:"compact",variant:"outlined",items:i.positionsList,"item-value":"positionId","item-title":"positionName",rules:[i.rules.required],placeholder:"Designation",modelValue:i.positionId,"onUpdate:modelValue":t[6]||(t[6]=e=>i.positionId=e)},null,8,["items","rules","modelValue"])])),_:1}),(0,o.Wm)(h.D,{cols:"4"},{default:(0,o.w5)((()=>[(0,o.Wm)(je.rL,{density:"compact",variant:"outlined",items:i.departmentsList,"item-value":"departmentId","item-title":"departmentName",rules:[i.rules.required],placeholder:"Department",modelValue:i.departmentId,"onUpdate:modelValue":t[7]||(t[7]=e=>i.departmentId=e)},null,8,["items","rules","modelValue"])])),_:1})])),_:1}),(0,o.Wm)(p.o,null,{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"8"},{default:(0,o.w5)((()=>[(0,o.Wm)(Ut.z,{density:"compact",variant:"outlined",label:"Address",placeholder:"Address",modelValue:i.address,"onUpdate:modelValue":t[8]||(t[8]=e=>i.address=e),rules:[i.rules.required]},null,8,["modelValue","rules"])])),_:1})])),_:1}),(0,o.Wm)(p.o)])),_:1},8,["modelValue"])])),_:1}),(0,o.Wm)(De.h,null,{default:(0,o.w5)((()=>[(0,o.Wm)(We.C),(0,o.Wm)(u.T,{color:"blue-darken-1",variant:"text",onClick:t[10]||(t[10]=e=>i.dialog=!1)},{default:(0,o.w5)((()=>[(0,o.Uk)(" Cancel ")])),_:1}),(0,o.Wm)(u.T,{disabled:!i.form,color:"primary",variant:"outlined",onClick:n.onAddEmployee,loading:i.addLoading},{default:(0,o.w5)((()=>[(0,o.Uk)(" Add ")])),_:1},8,["disabled","onClick","loading"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}var al={data(){return{dialog:!1,form:!1,employeeName:null,contactNumber:null,personalMail:null,officialMail:null,doj:null,address:null,positionId:null,positionsList:[],departmentId:null,departmentsList:[],reportingManagerId:null,employeesList:[],addLoading:!1,rules:{required(e){return null!==e&&""!==e||"Required"},email(e){return!(!e.includes("@")||!e.includes(".com"))||"Invalid Email Address"}}}},computed:{...(0,m.Se)(["getHeaders"])},methods:{async onAddEmployee(){this.addLoading=!0;const e=`${this.$store.state.backendDomainUrl}/employee/create/`,t={employeeName:this.employeeName,contactNumber:this.contactNumber,personalMail:this.personalMail,officialMail:this.officialMail,doj:this.doj,positionId:this.positionId,positionsList:[],departmentId:this.departmentId,address:this.address,reportingManagerId:this.reportingManagerId},a={method:"POST",...this.getHeaders,body:JSON.stringify(t)},l=await fetch(e,a);if(l.ok){const e=await l.json();console.log(`new employee id : ${e.employeeId}`),this.addLoading=!1,this.dialog=!1,this.employeeName=null,this.contactNumber=null,this.email=null,this.doj=null,this.designation=null,this.department=null,this.address=null,this.$emit("getEmployees")}},async getEmployeesList(){const e=`${this.$store.state.backendDomainUrl}/employees/`,t={method:"GET",...this.getHeaders},a=await fetch(e,t);if(a.ok){const e=await a.json();this.employeesList=e}},async getPositionsList(){const e=`${this.$store.state.backendDomainUrl}/positions`,t={method:"GET",...this.getHeaders},a=await fetch(e,t);if(a.ok){const e=await a.json();this.positionsList=e}},async getDepartementsList(){const e=`${this.$store.state.backendDomainUrl}/departments`,t={method:"GET",...this.getHeaders},a=await fetch(e,t);if(a.ok){const e=await a.json();this.departmentsList=e}}},created(){this.getEmployeesList(),this.getPositionsList(),this.getDepartementsList()}};const ll=(0,k.Z)(al,[["render",tl]]);var ol=ll;function il(e,t,a,l,i,n){return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.WI)(e.$slots,"default",{onOpenDialog:n.onOpenDialog}),(0,o.Wm)(Ke.B,{modelValue:i.dialog,"onUpdate:modelValue":t[0]||(t[0]=e=>i.dialog=e),width:"300px",persistent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(_e._,null,{default:(0,o.w5)((()=>[(0,o.Wm)(ve.Z,null,{default:(0,o.w5)((()=>[(0,o.Uk)(" Are you sure want to remove "+(0,Y.zw)(a.text),1)])),_:1}),(0,o.Wm)(De.h,null,{default:(0,o.w5)((()=>[(0,o.Wm)(We.C),(0,o.Wm)(u.T,{text:"Remove",color:"red",onClick:n.onClickRemove},null,8,["onClick"]),(0,o.Wm)(u.T,{text:"Cancel",onClick:n.onCloseDialog},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}var nl={data(){return{dialog:!1}},props:["id","text"],methods:{onOpenDialog(){this.dialog=!0},onCloseDialog(){this.dialog=!1},onClickRemove(){this.dialog=!1,this.$emit("onRemove",this.id)}}};const sl=(0,k.Z)(nl,[["render",il]]);var dl=sl,rl={data(){return{loading:!0,employeeId:"",employeeName:"",employeesList:[]}},components:{NewEmployeePopup:ol,DeleteButton:dl},computed:{...(0,m.Se)(["getHeaders"])},methods:{onupdateInput(){this.getEmployees()},async getEmployees(){this.loading=!0;const e=`${this.$store.state.backendDomainUrl}/employees?employeeId=${this.employeeId}&&employeeName=${this.employeeName}`,t={method:"GET",...this.getHeaders},a=await fetch(e,t);if(a.ok){const e=await a.json();this.employeesList=e,this.loading=!1,console.log(e)}},async deleteEmployee(e){const t=`${this.$store.state.backendDomainUrl}/employee/delete/${e}`,a={method:"DELETE",...this.getHeaders},l=await fetch(t,a);l.ok&&this.getEmployees()}},mounted(){this.getEmployees()}};const ml=(0,k.Z)(rl,[["render",el]]);var ul=ml;const cl={class:"d-flex flex-row align-center"},pl=(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("th",null," Project Id "),(0,o._)("th",null," Project Name "),(0,o._)("th",null," Type "),(0,o._)("th",{class:"text-center"}," Start Date "),(0,o._)("th",{class:"text-center"}," End Date "),(0,o._)("th",{class:"text-center"}," Description "),(0,o._)("th",null," Customer "),(0,o._)("th",{class:"text-center"}," Cost ")])],-1),hl={class:"text-center"},wl={class:"text-center"},fl={class:"d-flex flex-row aling-center"},gl={key:0},yl={key:0,style:{"font-size":"12px"}},_l={key:0,class:"d-flex flex-row justify-center align-center"},kl=(0,o._)("p",{class:"font-weight-medium"},"No Data Available",-1),vl=[kl];function Dl(e,t,a,l,i,n){const s=(0,o.up)("NewProjectPopup"),d=(0,o.up)("CommentPopup"),r=(0,o.up)("DeleteButton");return(0,o.wg)(),(0,o.j4)(c.K,{fluid:"",class:"w-100 h-100"},{default:(0,o.w5)((()=>[(0,o.Wm)(_e._,{width:"100%",height:"100%",variant:"elevated",elevation:"10",loading:i.searchLoading},{default:(0,o.w5)((()=>[(0,o.Wm)(Se.i,{dark:"",color:"#6a70eb",height:"50"},{default:(0,o.w5)((()=>[(0,o.Wm)(Ce.q,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Projects")])),_:1})])),_:1}),(0,o.Wm)(ke.E,null,{default:(0,o.w5)((()=>[(0,o.Wm)(p.o,{justify:"space-between",align:"center"},{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"12",md:"6"},{default:(0,o.w5)((()=>[(0,o._)("div",cl,[(0,o.Wm)(s,{onGetProjectsList:n.getProjectsList},null,8,["onGetProjectsList"])])])),_:1}),(0,o.Wm)(h.D,{cols:"3"},{default:(0,o.w5)((()=>[(0,o._)("div",null,[(0,o.Wm)(X.h,{loading:i.searchLoading,density:"compact",variant:"outlined","prepend-icon":"mdi-filter","hide-details":"",placeholder:"Search Project Name",modelValue:i.searchProjectName,"onUpdate:modelValue":t[0]||(t[0]=e=>i.searchProjectName=e),onInput:n.onupdateInput},null,8,["loading","modelValue","onInput"])])])),_:1})])),_:1})])),_:1}),(0,o.Wm)(ve.Z,null,{default:(0,o.w5)((()=>[(0,o.Wm)(be.Y,{density:"compact"},{default:(0,o.w5)((()=>[pl,(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.projectsList,(t=>((0,o.wg)(),(0,o.iD)("tr",{key:t},[(0,o._)("td",null,(0,Y.zw)(t.projectId),1),(0,o._)("td",null,(0,Y.zw)(t.projectName),1),(0,o._)("td",null,(0,Y.zw)(t.projectType),1),(0,o._)("td",hl,(0,Y.zw)(e.getFormatedDateString(t.startDate)),1),(0,o._)("td",wl,(0,Y.zw)(e.getFormatedDateString(t.endDate)),1),(0,o._)("td",null,[(0,o.Wm)(d,{comment:t.description},null,8,["comment"])]),(0,o._)("td",null,(0,Y.zw)(t.customer),1),(0,o._)("td",null,[(0,o._)("div",null,[(0,o._)("div",fl,[(0,o.Uk)((0,Y.zw)(t.cost),1),null!==t.cost?((0,o.wg)(),(0,o.iD)("p",gl,"("+(0,Y.zw)(t.currency)+")",1)):(0,o.kq)("",!0)]),"Billable"===t.projectType&&"Time & Material"===t.costType?((0,o.wg)(),(0,o.iD)("div",yl,"Time & Material")):(0,o.kq)("",!0)])]),(0,o._)("td",null,[(0,o.Wm)(r,{onOnRemove:n.onRemove,id:t.projectId,text:"project"},{default:(0,o.w5)((({onOpenDialog:e})=>[(0,o.Wm)(u.T,{icon:"mdi-delete",variant:"text",color:"#a11a1a",onClick:e},null,8,["onClick"])])),_:2},1032,["onOnRemove","id"])])])))),128))])])),_:1})])),_:1}),0===i.projectsList.length?((0,o.wg)(),(0,o.iD)("div",_l,vl)):(0,o.kq)("",!0),(0,o.Wm)(De.h,null,{default:(0,o.w5)((()=>[(0,o.Wm)(We.C)])),_:1})])),_:1},8,["loading"])])),_:1})}function Wl(e,t,a,l,i,n){const s=(0,o.up)("DateRange");return(0,o.wg)(),(0,o.j4)(c.K,null,{default:(0,o.w5)((()=>[(0,o.Wm)(Ke.B,{modelValue:i.dialog,"onUpdate:modelValue":t[9]||(t[9]=e=>i.dialog=e),persistent:"",width:"1024"},{activator:(0,o.w5)((({props:e})=>[(0,o.Wm)(u.T,(0,o.dG)({variant:"outlined","prepend-icon":"mdi-plus",color:"primary"},e),{default:(0,o.w5)((()=>[(0,o.Uk)(" New ")])),_:2},1040)])),default:(0,o.w5)((()=>[(0,o.Wm)(_e._,null,{default:(0,o.w5)((()=>[(0,o.Wm)(ke.E,null,{default:(0,o.w5)((()=>[(0,o.Uk)(" Add Project ")])),_:1}),(0,o.Wm)(ve.Z,null,{default:(0,o.w5)((()=>[(0,o.Wm)(B.O,{modelValue:i.form,"onUpdate:modelValue":t[7]||(t[7]=e=>i.form=e)},{default:(0,o.w5)((()=>[(0,o.Wm)(p.o,{align:"center"},{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"4"},{default:(0,o.w5)((()=>[(0,o.Wm)(X.h,{density:"compact",variant:"outlined",rules:i.projectNameRules,placeholder:"Select Project Name",modelValue:i.projectName,"onUpdate:modelValue":t[0]||(t[0]=e=>i.projectName=e)},null,8,["rules","modelValue"])])),_:1}),(0,o.Wm)(h.D,{cols:"4"},{default:(0,o.w5)((()=>[(0,o.Wm)(je.rL,{density:"compact",variant:"outlined",rules:i.projectTypeRules,placeholder:"Project Type",modelValue:i.projectType,"onUpdate:modelValue":t[1]||(t[1]=e=>i.projectType=e),items:["Billable","Non-Billable"]},null,8,["rules","modelValue"])])),_:1})])),_:1}),"Billable"===i.projectType?((0,o.wg)(),(0,o.j4)(p.o,{key:0},{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"3"},{default:(0,o.w5)((()=>[(0,o.Wm)(je.rL,{density:"compact",variant:"outlined",items:i.customersList,"item-title":"name","item-value":"customerId",placeholder:"Customers",modelValue:i.customerId,"onUpdate:modelValue":t[2]||(t[2]=e=>i.customerId=e)},null,8,["items","modelValue"])])),_:1}),(0,o.Wm)(h.D,{cols:"3"},{default:(0,o.w5)((()=>[(0,o.Wm)(je.rL,{density:"compact",variant:"outlined",items:["Fixed Cost","Time & Material"],"item-title":"name","item-value":"customerId",placeholder:"Cost Type",modelValue:i.costType,"onUpdate:modelValue":t[3]||(t[3]=e=>i.costType=e)},null,8,["modelValue"])])),_:1}),"Fixed Cost"===i.costType?((0,o.wg)(),(0,o.j4)(h.D,{key:0,cols:"3"},{default:(0,o.w5)((()=>[(0,o.Wm)(X.h,{density:"compact",variant:"outlined",type:"number",rules:i.projectNameRules,placeholder:"cost",modelValue:i.cost,"onUpdate:modelValue":t[4]||(t[4]=e=>i.cost=e)},null,8,["rules","modelValue"])])),_:1})):(0,o.kq)("",!0),"Fixed Cost"===i.costType?((0,o.wg)(),(0,o.j4)(h.D,{key:1,cols:"3"},{default:(0,o.w5)((()=>[(0,o.Wm)(je.rL,{density:"compact",variant:"outlined",rules:i.projectTypeRules,placeholder:"Currency",modelValue:i.currency,"onUpdate:modelValue":t[5]||(t[5]=e=>i.currency=e),items:["USD","Euro","INR","CHF"]},null,8,["rules","modelValue"])])),_:1})):(0,o.kq)("",!0)])),_:1})):(0,o.kq)("",!0),(0,o.Wm)(p.o,null,{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"8"},{default:(0,o.w5)((()=>[(0,o.Wm)(Ut.z,{density:"compact",variant:"outlined",label:"Description",placeholder:"Description",modelValue:i.description,"onUpdate:modelValue":t[6]||(t[6]=e=>i.description=e),rules:i.projectNameRules},null,8,["modelValue","rules"])])),_:1})])),_:1}),(0,o.Wm)(p.o,null,{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"8"},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{onUpdateDateRange:n.updateDateRange},null,8,["onUpdateDateRange"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,o.Wm)(De.h,null,{default:(0,o.w5)((()=>[(0,o.Wm)(We.C),(0,o.Wm)(u.T,{color:"blue-darken-1",variant:"text",onClick:t[8]||(t[8]=e=>i.dialog=!1)},{default:(0,o.w5)((()=>[(0,o.Uk)(" Cancel ")])),_:1}),(0,o.Wm)(u.T,{disabled:!i.form,color:"primary",variant:"outlined",onClick:n.onAddProject,loading:i.addLoading},{default:(0,o.w5)((()=>[(0,o.Uk)(" Add ")])),_:1},8,["disabled","onClick","loading"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}var jl={data(){return{dialog:!1,form:!1,projectName:null,addLoading:!1,projectNameRules:[e=>null!==e&&""!==e||"Required"],projectType:null,projectTypeRules:[e=>null!==e&&""!==e||"Required"],costType:null,customerId:null,customersList:[],cost:null,currency:null,description:null,startDate:null,endDate:null}},components:{DateRange:Be},computed:{...(0,m.Se)(["getHeaders"])},methods:{updateDateRange({startDate:e,endDate:t}){this.startDate=(0,q.Z)(e,"yyyy-MM-dd"),this.endDate=(0,q.Z)(t,"yyyy-MM-dd")},async onAddProject(){this.addLoading=!0;const e=`${this.$store.state.backendDomainUrl}/project/create/`,t={projectName:this.projectName,projectType:this.projectType,customerId:"Billable"===this.projectType?this.customerId:null,costType:"Billable"===this.projectType?this.costType:null,cost:"Fixed Cost"===this.costType&&"Non-Billable"!==this.projectType?this.cost:null,currency:"Fixed Cost"===this.costType&&"Non-Billable"!==this.projectType?this.currency:null,description:this.description,startDate:this.startDate,endDate:this.endDate},a={method:"POST",...this.getHeaders,body:JSON.stringify(t)},l=await fetch(e,a);if(l.ok){const e=await l.json();console.log(`new project id : ${e.projectId}`),this.addLoading=!1,this.dialog=!1,this.projectName=null,this.projectType=null,this.customerId=null,this.cost=null,this.currency=null,this.description=null,this.startDate=null,this.endDate=null,this.$emit("getProjectsList")}},async getCustomersList(){const e=`${this.$store.state.backendDomainUrl}/customers/`,t={method:"GET",...this.getHeaders},a=await fetch(e,t);if(a.ok){const e=await a.json();this.customersList=e}}},created(){this.getCustomersList()}};const bl=(0,k.Z)(jl,[["render",Wl]]);var Sl=bl,Cl={data(){return{searchProjectName:"",searchLoading:!1,projectsList:""}},components:{CommentPopup:Lt,DeleteButton:dl,NewProjectPopup:Sl},computed:{...(0,m.Se)(["getFormatedDateString","getHeaders"])},methods:{onupdateInput(){this.getProjectsList()},async getProjectsList(){this.searchLoading=!0;const e=`${this.$store.state.backendDomainUrl}/projects?projectName=${this.searchProjectName}`,t={method:"GET",...this.getHeaders},a=await fetch(e,t);if(a.ok){const e=await a.json();this.projectsList=e,this.searchLoading=!1}},async onRemove(e){console.log("project delete"),console.log(e);const t=`${this.$store.state.backendDomainUrl}/project/delete/${e}`,a={method:"DELETE",...this.getHeaders},l=await fetch(t,a);if(l.ok){const e=await l.json();console.log(e.message),this.getProjectsList()}}},mounted(){this.getProjectsList()}};const Il=(0,k.Z)(Cl,[["render",Dl]]);var xl=Il;const Vl={class:"d-flex flex-row align-center"},Pl=(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("th",null," Id "),(0,o._)("th",null," Name "),(0,o._)("th",null," Email "),(0,o._)("th",null," Contact Person "),(0,o._)("th",null," Contact No "),(0,o._)("th",{class:"text-center"}," Address ")])],-1),Tl={key:0,class:"d-flex flex-row justify-center align-center"},Ll=(0,o._)("p",{class:"font-weight-medium"},"No Data Available",-1),El=[Ll];function Nl(e,t,a,l,i,n){const s=(0,o.up)("NewCustomerPopup"),d=(0,o.up)("CommentPopup"),r=(0,o.up)("DeleteButton");return(0,o.wg)(),(0,o.j4)(c.K,{fluid:"",class:"w-100 h-100"},{default:(0,o.w5)((()=>[(0,o.Wm)(_e._,{width:"100%",height:"100%",variant:"elevated",elevation:"10",loading:i.searchLoading},{default:(0,o.w5)((()=>[(0,o.Wm)(Se.i,{dark:"",color:"#6a70eb",height:"50"},{default:(0,o.w5)((()=>[(0,o.Wm)(Ce.q,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Customers")])),_:1})])),_:1}),(0,o.Wm)(ke.E,null,{default:(0,o.w5)((()=>[(0,o.Wm)(p.o,{justify:"space-between",align:"center"},{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"12",md:"6"},{default:(0,o.w5)((()=>[(0,o._)("div",Vl,[(0,o.Wm)(s,{onGetCustomersList:n.getCustomersList},null,8,["onGetCustomersList"])])])),_:1}),(0,o.Wm)(h.D,{cols:"3"},{default:(0,o.w5)((()=>[(0,o._)("div",null,[(0,o.Wm)(X.h,{loading:i.searchLoading,density:"compact",variant:"outlined","prepend-icon":"mdi-filter","hide-details":"",placeholder:"Search Customer",modelValue:i.searchCustomer,"onUpdate:modelValue":t[0]||(t[0]=e=>i.searchCustomer=e),onInput:n.onupdateInput},null,8,["loading","modelValue","onInput"])])])),_:1})])),_:1})])),_:1}),(0,o.Wm)(ve.Z,null,{default:(0,o.w5)((()=>[(0,o.Wm)(be.Y,{density:"compact"},{default:(0,o.w5)((()=>[Pl,(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.customersList,(e=>((0,o.wg)(),(0,o.iD)("tr",{key:e},[(0,o._)("td",null,(0,Y.zw)(e.customerId),1),(0,o._)("td",null,(0,Y.zw)(e.name),1),(0,o._)("td",null,(0,Y.zw)(e.email),1),(0,o._)("td",null,(0,Y.zw)(e.contactPerson),1),(0,o._)("td",null,(0,Y.zw)(e.contactNumber),1),(0,o._)("td",null,[(0,o.Wm)(d,{comment:e.address},null,8,["comment"])]),(0,o._)("td",null,[(0,o.Wm)(r,{onOnRemove:n.onRemove,id:e.customerId,text:"customer"},{default:(0,o.w5)((({onOpenDialog:e})=>[(0,o.Wm)(u.T,{icon:"mdi-delete",variant:"text",color:"#a11a1a",onClick:e},null,8,["onClick"])])),_:2},1032,["onOnRemove","id"])])])))),128))])])),_:1})])),_:1}),0===i.customersList.length?((0,o.wg)(),(0,o.iD)("div",Tl,El)):(0,o.kq)("",!0),(0,o.Wm)(De.h,null,{default:(0,o.w5)((()=>[(0,o.Wm)(We.C)])),_:1})])),_:1},8,["loading"])])),_:1})}function $l(e,t,a,l,i,n){return(0,o.wg)(),(0,o.j4)(c.K,null,{default:(0,o.w5)((()=>[(0,o.Wm)(Ke.B,{modelValue:i.dialog,"onUpdate:modelValue":t[7]||(t[7]=e=>i.dialog=e),persistent:"",width:"1024"},{activator:(0,o.w5)((({props:e})=>[(0,o.Wm)(u.T,(0,o.dG)({variant:"outlined","prepend-icon":"mdi-plus",color:"primary"},e),{default:(0,o.w5)((()=>[(0,o.Uk)(" New ")])),_:2},1040)])),default:(0,o.w5)((()=>[(0,o.Wm)(_e._,null,{default:(0,o.w5)((()=>[(0,o.Wm)(ke.E,null,{default:(0,o.w5)((()=>[(0,o.Uk)(" Add Customer ")])),_:1}),(0,o.Wm)(ve.Z,null,{default:(0,o.w5)((()=>[(0,o.Wm)(B.O,{modelValue:i.form,"onUpdate:modelValue":t[5]||(t[5]=e=>i.form=e)},{default:(0,o.w5)((()=>[(0,o.Wm)(p.o,{align:"center"},{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"4"},{default:(0,o.w5)((()=>[(0,o.Wm)(X.h,{density:"compact",variant:"outlined",label:"Customer",rules:[i.rules.required],placeholder:"Customer",modelValue:i.name,"onUpdate:modelValue":t[0]||(t[0]=e=>i.name=e)},null,8,["rules","modelValue"])])),_:1}),(0,o.Wm)(h.D,null,{default:(0,o.w5)((()=>[(0,o.Wm)(X.h,{density:"compact",variant:"outlined",label:"Contact Person",rules:[i.rules.required],placeholder:"Contact Person",modelValue:i.contactPerson,"onUpdate:modelValue":t[1]||(t[1]=e=>i.contactPerson=e)},null,8,["rules","modelValue"])])),_:1}),(0,o.Wm)(h.D,{cols:"4"},{default:(0,o.w5)((()=>[(0,o.Wm)(X.h,{density:"compact",variant:"outlined",label:"Contact Number",type:"number",rules:[i.rules.required],placeholder:"Contact Number",modelValue:i.number,"onUpdate:modelValue":t[2]||(t[2]=e=>i.number=e)},null,8,["rules","modelValue"])])),_:1})])),_:1}),(0,o.Wm)(p.o,null,{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"4"},{default:(0,o.w5)((()=>[(0,o.Wm)(X.h,{density:"compact",variant:"outlined",label:"Email",rules:[i.rules.required,i.rules.email],placeholder:"Email",modelValue:i.email,"onUpdate:modelValue":t[3]||(t[3]=e=>i.email=e)},null,8,["rules","modelValue"])])),_:1})])),_:1}),(0,o.Wm)(p.o,null,{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"8"},{default:(0,o.w5)((()=>[(0,o.Wm)(Ut.z,{density:"compact",variant:"outlined",label:"Address",placeholder:"Address",modelValue:i.address,"onUpdate:modelValue":t[4]||(t[4]=e=>i.address=e),rules:[i.rules.required]},null,8,["modelValue","rules"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,o.Wm)(De.h,null,{default:(0,o.w5)((()=>[(0,o.Wm)(We.C),(0,o.Wm)(u.T,{color:"blue-darken-1",variant:"text",onClick:t[6]||(t[6]=e=>i.dialog=!1)},{default:(0,o.w5)((()=>[(0,o.Uk)(" Cancel ")])),_:1}),(0,o.Wm)(u.T,{disabled:!i.form,color:"primary",variant:"outlined",onClick:n.onAddCustomer,loading:i.addLoading},{default:(0,o.w5)((()=>[(0,o.Uk)(" Add ")])),_:1},8,["disabled","onClick","loading"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}var Ul={data(){return{dialog:!1,form:!1,name:null,number:null,email:null,contactPerson:null,addLoading:!1,rules:{required(e){return null!==e&&""!==e||"Required"},email(e){return!(!e.includes("@")||!e.includes(".com"))||"Invalid Email Address"}},address:null}},computed:{...(0,m.Se)(["getHeaders"])},methods:{async onAddCustomer(){this.addLoading=!0;const e=`${this.$store.state.backendDomainUrl}/customer/create/`,t={name:this.name,contactPerson:this.contactPerson,contactNumber:this.number,email:this.email,address:this.address},a={method:"POST",...this.getHeaders,body:JSON.stringify(t)},l=await fetch(e,a);if(l.ok){const e=await l.json();console.log(`new customer id : ${e.customerId}`),this.addLoading=!1,this.$emit("getCustomersList"),this.dialog=!1}}}};const Ol=(0,k.Z)(Ul,[["render",$l]]);var Rl=Ol,Ml={data(){return{searchCustomer:"",searchLoading:!1,customersList:""}},components:{CommentPopup:Lt,DeleteButton:dl,NewCustomerPopup:Rl},computed:{...(0,m.Se)(["getFormatedDateString","getHeaders"])},methods:{onupdateInput(){this.getCustomersList()},async getCustomersList(){this.searchLoading=!0;const e=`${this.$store.state.backendDomainUrl}/customers?name=${this.searchCustomer}`,t={method:"GET",...this.getHeaders},a=await fetch(e,t);if(a.ok){const e=await a.json();this.customersList=e,this.searchLoading=!1}},async onRemove(e){const t=`${this.$store.state.backendDomainUrl}/customer/delete/${e}`,a={method:"DELETE",...this.getHeaders},l=await fetch(t,a);if(l.ok){const e=await l.json();console.log(e.message),this.getCustomersList()}}},mounted(){this.getCustomersList()}};const Al=(0,k.Z)(Ml,[["render",Nl]]);var Hl=Al;const zl=e=>((0,o.dD)("data-v-84cb8ec6"),e=e(),(0,o.Cn)(),e),ql={class:"w-100 d-flex flex-row justify-space-between"},Zl=zl((()=>(0,o._)("span",{class:"text-h5"},"TimeSheet",-1))),Fl={key:0,class:"w-100 mt-5"},Gl={key:0,class:"create-sheet-card d-flex flex-row align-center justify-center"};function Yl(e,t,a,i,n,s){const d=(0,o.up)("TimesheetStatus"),r=(0,o.up)("EditableTable"),m=(0,o.up)("NonEditableTable");return(0,o.wg)(),(0,o.j4)(_e._,{width:"1080","max-height":"600",variant:"elevated",elevation:"10"},{default:(0,o.w5)((()=>[(0,o.Wm)(Se.i,{dark:"",color:"#6a70eb",height:"50"},{default:(0,o.w5)((()=>[(0,o.Wm)(Ce.q,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Submit Timesheet")])),_:1})])),_:1}),(0,o.Wm)(ke.E,null,{default:(0,o.w5)((()=>[(0,o._)("div",ql,[Zl,void 0!==e.timeSheetObj?((0,o.wg)(),(0,o.j4)(d,{key:0,status:e.timeSheetObj.status},null,8,["status"])):(0,o.kq)("",!0),(0,o.wy)((0,o._)("input",{class:"week-calendar-input",type:"week","onUpdate:modelValue":t[0]||(t[0]=t=>e.calendarValue=t),onChange:t[1]||(t[1]=(...e)=>s.onChangeWeek&&s.onChangeWeek(...e))},null,544),[[l.nr,e.calendarValue]])]),void 0!==e.timeSheetObj&&"denied"===e.timeSheetObj.status?((0,o.wg)(),(0,o.iD)("div",Fl,[(0,o.Wm)(u.T,{color:"#a83299",loading:e.createSheetLoading,onClick:s.onClickReCreate},{default:(0,o.w5)((()=>[(0,o.Uk)(" Re-create Sheet ")])),_:1},8,["loading","onClick"])])):(0,o.kq)("",!0)])),_:1}),(0,o.Wm)(ve.Z,null,{default:(0,o.w5)((()=>[(0,o._)("div",null,[void 0===e.timeSheetObj?((0,o.wg)(),(0,o.iD)("div",Gl,[(0,o.Wm)(u.T,{color:"#a83299",onClick:s.createSheet,loading:e.createSheetLoading},{default:(0,o.w5)((()=>[(0,o.Uk)(" Create Sheet ")])),_:1},8,["onClick","loading"])])):"open"===e.timeSheetObj.status?((0,o.wg)(),(0,o.j4)(r,{key:1,timeSheetObj:e.timeSheetObj,onGetTimeSheet:s.getTimeSheet},null,8,["timeSheetObj","onGetTimeSheet"])):((0,o.wg)(),(0,o.j4)(m,{key:2,timeSheetObj:e.timeSheetObj},null,8,["timeSheetObj"]))])])),_:1}),(0,o.Wm)(De.h,null,{default:(0,o.w5)((()=>[(0,o.Wm)(We.C)])),_:1})])),_:1})}const Bl=e=>((0,o.dD)("data-v-16c20628"),e=e(),(0,o.Cn)(),e),Kl={class:"w-100 d-flex flex-row align-center justify-end"},Jl={class:"d-flex flex-row justify-space-between"},Xl={class:"text-h7"},Ql={class:"text-h9"},eo=Bl((()=>(0,o._)("th",{class:"text-left",width:"250px"}," Projects ",-1))),to=Bl((()=>(0,o._)("th",{style:{"font-size":"14px","font-weight":"bold",color:"black"}}," Total: ",-1))),ao={class:"text-center pa-1",style:{width:"95px"}},lo={class:"text-center pa-1",style:{width:"95px"}},oo={class:"text-center pa-1",style:{width:"95px"}},io={class:"text-center pa-1",style:{width:"95px"}},no={class:"text-center pa-1",style:{width:"95px"}},so={class:"text-center pa-1",style:{width:"95px"}},ro={class:"text-center pa-1",style:{width:"95px"}},mo={class:"text-center"},uo={class:"pa-0"},co=Bl((()=>(0,o._)("td",null,[(0,o._)("p",null," Total : ")],-1))),po={key:0,class:"error-message error"},ho={class:"text-center"},wo={key:0,class:"error-message error"},fo={class:"mt-4 d-flex flex-row align-center justify-space-between"},go=Bl((()=>(0,o._)("div",null,[(0,o._)("p",{class:"error-message"},"*Maxmium 8 hours per day allowed"),(0,o._)("p",{class:"error-message"},"*40 hours per week allowed")],-1)));function yo(e,t,a,l,i,n){const s=(0,o.up)("ReviewTable"),d=(0,o.up)("InputField");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o._)("div",Kl,[!i.isSaved&&!n.isMoreEightHours&&n.getTotal<=40?((0,o.wg)(),(0,o.j4)(u.T,{key:0,color:"primary",class:"mr-2",onClick:n.onClickSave,loading:i.saveLodaing,disabled:!i.form},{default:(0,o.w5)((()=>[(0,o.Uk)(" Save ")])),_:1},8,["onClick","loading","disabled"])):(0,o.kq)("",!0),(0,o.Wm)(Ke.B,{modelValue:i.dialog,"onUpdate:modelValue":t[1]||(t[1]=e=>i.dialog=e),persistent:"",width:"auto"},{activator:(0,o.w5)((({props:e})=>[(0,o.Wm)(u.T,(0,o.dG)({variant:"outlined",color:"#b93bd9"},e,{disabled:!i.isSaved||n.isMoreEightHours||n.getTotal<40||n.getTotal>40||n.isTimeSheetValid||!i.form}),{default:(0,o.w5)((()=>[(0,o.Uk)(" Review and Submit ")])),_:2},1040,["disabled"])])),default:(0,o.w5)((()=>[(0,o.Wm)(_e._,null,{default:(0,o.w5)((()=>[(0,o.Wm)(ke.E,{class:"text-h5"},{default:(0,o.w5)((()=>[(0,o._)("div",Jl,[(0,o._)("span",Xl,"TimeSheet ID : "+(0,Y.zw)(i.sheetObj.timeSheetId),1),(0,o._)("span",Ql,"Employee ID: "+(0,Y.zw)(e.employeeId),1)])])),_:1}),(0,o.Wm)(ve.Z,null,{default:(0,o.w5)((()=>[(0,o.Wm)(s,{weekData:i.timeSheetList},null,8,["weekData"])])),_:1}),(0,o.Wm)(De.h,null,{default:(0,o.w5)((()=>[(0,o.Wm)(We.C),(0,o.Wm)(u.T,{variant:"text",onClick:t[0]||(t[0]=e=>i.dialog=!1),color:"#454df5"},{default:(0,o.w5)((()=>[(0,o.Uk)(" Cancel ")])),_:1}),(0,o.Wm)(u.T,{variant:"outlined",color:"#b93bd9",loading:i.submitLoading,onClick:n.onClickSubmit},{default:(0,o.w5)((()=>[(0,o.Uk)(" Submit ")])),_:1},8,["loading","onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])]),(0,o.Wm)(c.K,null,{default:(0,o.w5)((()=>[(0,o.Wm)(B.O,{modelValue:i.form,"onUpdate:modelValue":t[2]||(t[2]=e=>i.form=e)},{default:(0,o.w5)((()=>[(0,o.Wm)(p.o,null,{default:(0,o.w5)((()=>[(0,o.Wm)(be.Y,{height:"400px"},{default:(0,o.w5)((()=>[(0,o._)("thead",null,[(0,o._)("tr",null,[eo,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.$store.state.daysOfWeek,(e=>((0,o.wg)(),(0,o.iD)("th",{style:{"font-size":"13px"},class:"text-left",key:e},(0,Y.zw)(e),1)))),128)),to])]),(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.timeSheetList,(e=>((0,o.wg)(),(0,o.iD)("tr",{key:e.id},[(0,o._)("td",null,[(0,o._)("div",null,[(0,o.Wm)(je.rL,{class:"mt-6",label:"Select Project",items:i.localProjectsList,variant:"outlined","model-value":e.projectName,rules:i.projectSelectRules,"onUpdate:modelValue":t=>n.setProjectValue(t,{rowId:e.id,name:"projectName"})},null,8,["items","model-value","rules","onUpdate:modelValue"])])]),(0,o._)("td",ao,[(0,o.Wm)(d,{comment:e.mondayComment,obj:{rowId:e.id,name:"mondayComment"},onSetRowValue:n.setRowValue},{default:(0,o.w5)((({isHovered:t,onClickIcon:a})=>[(0,o.Wm)(X.h,{variant:"outlined",density:"comfortable","hide-details":"",onInput:t=>n.restrictChar(t,{rowId:e.id,name:"monday"}),"model-value":e.monday,type:"number","v-model":e.monday,"append-inner-icon":t?"mdi-comment":"","onClick:appendInner":a},null,8,["onInput","model-value","v-model","append-inner-icon","onClick:appendInner"])])),_:2},1032,["comment","obj","onSetRowValue"])]),(0,o._)("td",lo,[(0,o.Wm)(d,{comment:e.tuesdayComment,obj:{rowId:e.id,name:"tuesdayComment"},onSetRowValue:n.setRowValue},{default:(0,o.w5)((({isHovered:t,onClickIcon:a})=>[(0,o.Wm)(X.h,{variant:"outlined",density:"comfortable","hide-details":"",onInput:t=>n.restrictChar(t,{rowId:e.id,name:"tuesday"}),"model-value":e.tuesday,type:"number","append-inner-icon":t?"mdi-comment":"","onClick:appendInner":a},null,8,["onInput","model-value","append-inner-icon","onClick:appendInner"])])),_:2},1032,["comment","obj","onSetRowValue"])]),(0,o._)("td",oo,[(0,o.Wm)(d,{comment:e.wednesdayComment,obj:{rowId:e.id,name:"wednesdayComment"},onSetRowValue:n.setRowValue},{default:(0,o.w5)((({isHovered:t,onClickIcon:a})=>[(0,o.Wm)(X.h,{variant:"outlined",density:"comfortable","hide-details":"",onInput:t=>n.restrictChar(t,{rowId:e.id,name:"wednesday"}),"model-value":e.wednesday,type:"number","append-inner-icon":t?"mdi-comment":"","onClick:appendInner":a},null,8,["onInput","model-value","append-inner-icon","onClick:appendInner"])])),_:2},1032,["comment","obj","onSetRowValue"])]),(0,o._)("td",io,[(0,o.Wm)(d,{comment:e.thursdayComment,obj:{rowId:e.id,name:"thursdayComment"},onSetRowValue:n.setRowValue},{default:(0,o.w5)((({isHovered:t,onClickIcon:a})=>[(0,o.Wm)(X.h,{variant:"outlined",density:"comfortable","hide-details":"",onInput:t=>n.restrictChar(t,{rowId:e.id,name:"thursday"}),"model-value":e.thursday,type:"number","append-inner-icon":t?"mdi-comment":"","onClick:appendInner":a},null,8,["onInput","model-value","append-inner-icon","onClick:appendInner"])])),_:2},1032,["comment","obj","onSetRowValue"])]),(0,o._)("td",no,[(0,o.Wm)(d,{comment:e.fridayComment,obj:{rowId:e.id,name:"fridayComment"},onSetRowValue:n.setRowValue},{default:(0,o.w5)((({isHovered:t,onClickIcon:a})=>[(0,o.Wm)(X.h,{variant:"outlined",density:"comfortable","hide-details":"",onInput:t=>n.restrictChar(t,{rowId:e.id,name:"friday"}),"model-value":e.friday,type:"number","append-inner-icon":t?"mdi-comment":"","onClick:appendInner":a},null,8,["onInput","model-value","append-inner-icon","onClick:appendInner"])])),_:2},1032,["comment","obj","onSetRowValue"])]),(0,o._)("td",so,[(0,o.Wm)(d,{comment:e.satuardayComment,obj:{rowId:e.id,name:"satuardayComment"},onSetRowValue:n.setRowValue},{default:(0,o.w5)((({isHovered:t,onClickIcon:a})=>[(0,o.Wm)(X.h,{variant:"outlined",density:"comfortable","hide-details":"",onInput:t=>n.restrictChar(t,{rowId:e.id,name:"satuarday"}),"model-value":e.satuarday,type:"number","append-inner-icon":t?"mdi-comment":"","onClick:appendInner":a},null,8,["onInput","model-value","append-inner-icon","onClick:appendInner"])])),_:2},1032,["comment","obj","onSetRowValue"])]),(0,o._)("td",ro,[(0,o.Wm)(d,{comment:e.sundayComment,obj:{rowId:e.id,name:"sundayComment"},onSetRowValue:n.setRowValue},{default:(0,o.w5)((({isHovered:t,onClickIcon:a})=>[(0,o.Wm)(X.h,{variant:"outlined",density:"comfortable","hide-details":"",onInput:t=>n.restrictChar(t,{rowId:e.id,name:"sunday"}),"model-value":e.sunday,type:"number","append-inner-icon":t?"mdi-comment":"","onClick:appendInner":a},null,8,["onInput","model-value","append-inner-icon","onClick:appendInner"])])),_:2},1032,["comment","obj","onSetRowValue"])]),(0,o._)("td",mo,[(0,o._)("p",null,(0,Y.zw)(n.totalHoursOnProject(e)),1)]),(0,o._)("td",uo,[(0,o.Wm)(u.T,{icon:"mdi-close",variant:"text",size:"small",onClick:t=>n.onClickDelete(e.id)},null,8,["onClick"])])])))),128)),(0,o._)("tr",null,[co,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.daysList,(e=>((0,o.wg)(),(0,o.iD)("td",{class:"text-center",key:e},[(0,o._)("div",null,[(0,o._)("p",{class:(0,Y.C_)(n.getTotalHoursOfDay(e)>8?"error":"")},(0,Y.zw)(n.getTotalHoursOfDay(e)),3),n.getTotalHoursOfDay(e)>8?((0,o.wg)(),(0,o.iD)("p",po,"8 Hours allowed")):(0,o.kq)("",!0)])])))),128)),(0,o._)("td",ho,[(0,o._)("p",{class:(0,Y.C_)(n.getTotal>40?"error":"")},(0,Y.zw)(n.getTotal),3),n.getTotal>40?((0,o.wg)(),(0,o.iD)("p",wo,"40HRS allowed")):(0,o.kq)("",!0)])])])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o._)("div",fo,[i.timeSheetList.length<e.projectList.length?((0,o.wg)(),(0,o.j4)(u.T,{key:0,color:"#0047ba","prepend-icon":"mdi-plus",onClick:n.addNewRow},{default:(0,o.w5)((()=>[(0,o.Uk)(" New Row ")])),_:1},8,["onClick"])):(0,o.kq)("",!0),go])])),_:1})])}var _o=a(3029);const ko=(0,o._)("th",{class:"text-left",width:"250px"}," Projects ",-1),vo=(0,o._)("th",{style:{"font-size":"14px","font-weight":"bold",color:"black"}}," Total: ",-1),Do={class:"mt-6 mb-6 font-weight-medium"},Wo={class:"text-center"},jo={class:"text-center"},bo={class:"text-center"},So={class:"text-center"},Co={class:"text-center"},Io={class:"text-center"},xo={class:"text-center"},Vo={class:"text-center"},Po=(0,o._)("td",null,[(0,o._)("p",null," Total : ")],-1),To={class:"text-center"},Lo={class:"text-center"},Eo={class:"text-center"},No={class:"text-center"},$o={class:"text-center"},Uo={class:"text-center"},Oo={class:"text-center"},Ro={class:"text-center"};function Mo(e,t,a,l,i,n){const s=(0,o.up)("CommentPopup");return(0,o.wg)(),(0,o.j4)(c.K,null,{default:(0,o.w5)((()=>[(0,o.Wm)(p.o,null,{default:(0,o.w5)((()=>[(0,o.Wm)(be.Y,null,{default:(0,o.w5)((()=>[(0,o._)("thead",null,[(0,o._)("tr",null,[ko,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.$store.state.daysOfWeek,(e=>((0,o.wg)(),(0,o.iD)("th",{style:{"font-size":"13px"},class:"text-left",key:e},(0,Y.zw)(e),1)))),128)),vo])]),(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.timeSheetList,((e,t)=>((0,o.wg)(),(0,o.iD)("tr",{key:t},[(0,o._)("td",null,[(0,o._)("div",Do,[(0,o._)("p",null,(0,Y.zw)(n.getProjectName(e.projectId)),1)])]),(0,o._)("td",Wo,[(0,o.Wm)(s,{comment:e.mondayComment},{default:(0,o.w5)((()=>[(0,o._)("p",null,(0,Y.zw)(n.checkAndGetValue(e.monday)),1)])),_:2},1032,["comment"])]),(0,o._)("td",jo,[(0,o.Wm)(s,{comment:e.tuesdayComment},{default:(0,o.w5)((()=>[(0,o._)("p",null,(0,Y.zw)(n.checkAndGetValue(e.tuesday)),1)])),_:2},1032,["comment"])]),(0,o._)("td",bo,[(0,o.Wm)(s,{comment:e.wednesdayComment},{default:(0,o.w5)((()=>[(0,o._)("p",null,(0,Y.zw)(n.checkAndGetValue(e.wednesday)),1)])),_:2},1032,["comment"])]),(0,o._)("td",So,[(0,o.Wm)(s,{comment:e.thursdayComment},{default:(0,o.w5)((()=>[(0,o._)("p",null,(0,Y.zw)(n.checkAndGetValue(e.thursday)),1)])),_:2},1032,["comment"])]),(0,o._)("td",Co,[(0,o.Wm)(s,{comment:e.fridayComment},{default:(0,o.w5)((()=>[(0,o._)("p",null,(0,Y.zw)(n.checkAndGetValue(e.friday)),1)])),_:2},1032,["comment"])]),(0,o._)("td",Io,[(0,o.Wm)(s,{comment:e.satuardayComment},{default:(0,o.w5)((()=>[(0,o._)("p",null,(0,Y.zw)(n.checkAndGetValue(e.satuarday)),1)])),_:2},1032,["comment"])]),(0,o._)("td",xo,[(0,o.Wm)(s,{comment:e.sundayComment},{default:(0,o.w5)((()=>[(0,o._)("p",null,(0,Y.zw)(n.checkAndGetValue(e.sunday)),1)])),_:2},1032,["comment"])]),(0,o._)("td",Vo,[(0,o._)("p",null,(0,Y.zw)(n.totalHoursOnProject(e)),1)])])))),128)),(0,o._)("tr",null,[Po,(0,o._)("td",To,(0,Y.zw)(n.getTotalHoursOfDay("monday")),1),(0,o._)("td",Lo,(0,Y.zw)(n.getTotalHoursOfDay("tuesday")),1),(0,o._)("td",Eo,(0,Y.zw)(n.getTotalHoursOfDay("wednesday")),1),(0,o._)("td",No,(0,Y.zw)(n.getTotalHoursOfDay("thursday")),1),(0,o._)("td",$o,(0,Y.zw)(n.getTotalHoursOfDay("friday")),1),(0,o._)("td",Uo,(0,Y.zw)(n.getTotalHoursOfDay("satuarday")),1),(0,o._)("td",Oo,(0,Y.zw)(n.getTotalHoursOfDay("sunday")),1),(0,o._)("td",Ro,(0,Y.zw)(n.getTotal),1)])])])),_:1})])),_:1})])),_:1})}var Ao={data(){return{timeSheetList:this.weekData}},props:["weekData"],components:{CommentPopup:Lt},watch:{weekData(e){this.timeSheetList=e}},computed:{...(0,m.rn)(["projectList"]),getTotal(){const e=this.timeSheetList;let t=0;return e.forEach((e=>{t+=e.monday+e.tuesday+e.wednesday+e.thursday+e.friday+e.satuarday+e.sunday})),t.toFixed(1)}},methods:{getTotalHoursOfDay(e){const t=this.timeSheetList;let a=0;return t.forEach((t=>{a+=t[e]})),a.toFixed(1)},totalHoursOnProject(e){const t=e.monday+e.tuesday+e.wednesday+e.thursday+e.friday+e.satuarday+e.sunday;return t.toFixed(1)},getProjectName(e){const t=this.projectList.find((t=>t.projectId===e));return t.projectName},checkAndGetValue(e){return 0===e?null:e}}};const Ho=(0,k.Z)(Ao,[["render",Mo]]);var zo=Ho;function qo(e,t,a,l,i,n){return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(_e._,{onMouseenter:n.onHover,onMouseleave:n.offHover},{default:(0,o.w5)((()=>[(0,o.WI)(e.$slots,"default",{isHovered:i.isHovered,onClickIcon:n.onClickIcon})])),_:3},8,["onMouseenter","onMouseleave"]),(0,o.Wm)(Ke.B,{width:"500",modelValue:i.dialog,"onUpdate:modelValue":t[1]||(t[1]=e=>i.dialog=e),persistent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(_e._,{title:"Add Comment"},{default:(0,o.w5)((()=>[(0,o.Wm)(Ut.z,{variant:"outlined",modelValue:i.newComment,"onUpdate:modelValue":t[0]||(t[0]=e=>i.newComment=e)},null,8,["modelValue"]),(0,o.Wm)(De.h,null,{default:(0,o.w5)((()=>[(0,o.Wm)(We.C),(0,o.Wm)(u.T,{text:"Save Changes",onClick:n.onSaveClicked,color:"#4287f5"},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}var Zo={data(){return{isHovered:!1,dialog:!1,newComment:this.comment}},props:["comment","obj"],watch:{comment(e){this.newComment=e,console.log(e),console.log(this.newComment)}},methods:{onHover(){this.isHovered=!0},offHover(){this.isHovered=!1},onClickIcon(){this.dialog=!0},onSaveClicked(){this.dialog=!1,this.$emit("setRowValue",this.newComment,this.obj)}}};const Fo=(0,k.Z)(Zo,[["render",qo]]);var Go=Fo,Yo={data(){return{form:!0,isHovering:!1,dialog:!1,sheetObj:this.timeSheetObj,saveLodaing:!1,isSaved:!0,timeSheetList:[],localProjectsList:[],submitLoading:!1,daysList:["monday","tuesday","wednesday","thursday","friday","satuarday","sunday"],projectSelectRules:[e=>{const t=this.projectList.find((t=>t.projectName===e));return void 0===t?"Select Project":t.startDate>this.endDate?"Project Not yet Started":!(t.endDate<this.startDate)||"Project Deadline Exceeded"}]}},props:["timeSheetObj"],watch:{timeSheetObj(e){this.sheetObj=e,this.getTimeSheetData()},timeSheetList(){this.updateLocalProjectList()}},components:{ReviewTable:zo,InputField:Go},computed:{...(0,m.rn)(["employeeId","employeeName","selectedWeek","projectList","startDate","endDate"]),...(0,m.Se)(["getHeaders"]),getTotal(){const e=this.timeSheetList;let t=0;return e.forEach((e=>{t+=e.monday+e.tuesday+e.wednesday+e.thursday+e.friday+e.satuarday+e.sunday})),t.toFixed(1)},isMoreEightHours(){for(let e of this.daysList)if(this.getTotalHoursOfDay(e)>8)return!0;return!1},isTimeSheetValid(){return!(this.timeSheetList.length>0)||null===this.timeSheetList[0].projectId}},methods:{restrictChar(e,t){let a=e.target.value;(parseFloat(a)>8||parseFloat(a)<0)&&(e.target.value=null,a=null),a=isNaN(parseFloat(a))?null:parseFloat(parseFloat(a).toFixed(1)),this.setRowValue(a,t)},isTotalMoreThanEight(e,t){const{rowId:a,name:l}=t,o=this.timeSheetList.map((t=>{if(t.id===a){const a={...t};return a[l]=e,a}return{...t}}));let i=0;return o.forEach((e=>{i+=e[l]})),i>8},getTotalHoursOfDay(e){const t=this.timeSheetList;let a=0;return t.forEach((t=>{a+=t[e]})),a.toFixed(1)},addNewRow(){const e={id:(0,_o.Z)(),projectId:null,projectName:null,monday:null,tuesday:null,wednesday:null,thursday:null,friday:null,satuarday:null,sunday:null,total:null,mondayComment:null,tuesdayComment:null,wednesdayComment:null,thursdayComment:null,fridayComment:null,satuardayComment:null,sundayComment:null};this.timeSheetList=[...this.timeSheetList,e]},setProjectValue(e,t){const a=this.projectList.find((t=>t.projectName===e));this.setRowValue(a.projectId,{...t,name:"projectId"}),this.setRowValue(a.projectName,t),this.updateLocalProjectList()},setRowValue(e,t){const{rowId:a,name:l}=t,o=this.timeSheetList.find((e=>e.id===a));o&&(o[l]=e),this.isSaved=!1},updateLocalProjectList(){const e=this.projectList.filter((e=>{const t=this.timeSheetList.every((t=>t.projectId!==e.projectId));return t}));this.localProjectsList=e.map((e=>e.projectName))},totalHoursOnProject(e){const t=e.monday+e.tuesday+e.wednesday+e.thursday+e.friday+e.satuarday+e.sunday;return t.toFixed(1)},onClickDelete(e){this.isSaved=!1;const t=this.timeSheetList.filter((t=>t.id!==e));this.timeSheetList=t},async getProjectData(){await this.$store.dispatch("getProjectData"),this.localProjectsList=this.projectList.map((e=>e.projectName))},async getTimeSheetData(){const e=`${this.$store.state.backendDomainUrl}/timesheet/projects/${this.sheetObj.timeSheetId}`,t={method:"GET",...this.getHeaders},a=await fetch(e,t);if(a.ok){const e=await a.json();this.timeSheetList=e,0===this.timeSheetList.length&&this.addNewRow()}},async onClickSave(){this.saveLodaing=!0;const e=`${this.$store.state.backendDomainUrl}/timesheet/save/${this.sheetObj.timeSheetId}`,t={method:"PUT",...this.getHeaders,body:JSON.stringify({arr:this.timeSheetList})},a=await fetch(e,t);if(a.ok){const e=await a.json();console.log(e.text)}this.saveLodaing=!1,this.isSaved=!0},async onClickSubmit(){this.submitLoading=!0,await this.$store.dispatch("submitTimeSheet",this.sheetObj.timeSheetId),await this.$store.dispatch("sendEmail",{timeSheetId:this.sheetObj.timeSheetId,startDate:this.sheetObj.startDate,endDate:this.sheetObj.endDate}),this.dialog=!1,this.submitLoading=!1,this.$emit("getTimeSheet")}},created(){this.getProjectData(),this.getTimeSheetData()}};const Bo=(0,k.Z)(Yo,[["render",yo],["__scopeId","data-v-16c20628"]]);var Ko=Bo,Jo=a(5374),Xo={name:"TimeSheet",data:()=>({createSheetLoading:!1,calendarValue:"",timeSheetObj:void 0}),components:{EditableTable:Ko,NonEditableTable:$t,TimesheetStatus:Kt},computed:{...(0,m.rn)(["startDate","endDate","employeeId"]),...(0,m.Se)(["getHeaders"]),checkWeekDataExist(){return this.$store.getters.isWeekDataExist}},methods:{onChangeWeek(){""!==this.calendarValue&&(this.$store.dispatch("updateSelectedWeek",this.calendarValue),this.getTimeSheet())},async getTimeSheet(){const e=`${this.$store.state.backendDomainUrl}/timesheet/employee/${this.employeeId}?start_date=${this.startDate}&&end_date=${this.endDate}`,t={method:"GET",...this.getHeaders},a=await fetch(e,t);if(a.ok){const e=await a.json();this.timeSheetObj=e.data}},async createSheet(){this.createSheetLoading=!0;const e=`${this.$store.state.backendDomainUrl}/timesheet/create`,t={employeeId:this.employeeId,week:this.calendarValue,startDate:this.startDate,endDate:this.endDate},a={method:"POST",...this.getHeaders,body:JSON.stringify(t)},l=await fetch(e,a);if(l.ok){const e=await l.json();console.log(e.timeSheetId),this.timeSheetObj={timeSheetId:e.timeSheetId,week:this.calendarValue,status:"open"}}this.createSheetLoading=!1},async onClickReCreate(){this.createSheetLoading=!0;const e=`${this.$store.state.backendDomainUrl}/timesheet/recreate/${this.timeSheetObj.timeSheetId}`,t=await fetch(e,{method:"POST",...this.getHeaders});if(t.ok){const e=await t.json();console.log(e.message),this.getTimeSheet()}this.createSheetLoading=!1}},created(){if(void 0!==this.$route.query.calendarValue)this.calendarValue=this.$route.query.calendarValue;else{const e=new Date;let t=`${e.getFullYear()}-W${(0,Jo.Z)(e,{weekStartsOn:1,firstWeekContainsDate:2})}`,[a,l]=t.split("-W");1===l.length&&(t=a+"-W0"+l),this.calendarValue=t}this.$store.dispatch("updateSelectedWeek",this.calendarValue)},mounted(){this.getTimeSheet(),this.$store.commit("updateDaysOfWeek")}};const Qo=(0,k.Z)(Xo,[["render",Yl],["__scopeId","data-v-84cb8ec6"]]);var ei=Qo;const ti=e=>((0,o.dD)("data-v-25e12231"),e=e(),(0,o.Cn)(),e),ai={class:"d-flex flex-row align-center"},li={class:"d-flex flex-row align-center"},oi=ti((()=>(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("th",{class:"text-left"}," Timesheet Id "),(0,o._)("th",{class:"text-left"}," Employee Id "),(0,o._)("th",{class:"text-left"}," employee Name "),(0,o._)("th",{class:"text-center"}," Week "),(0,o._)("th",{class:"text-center"}," Log Hours "),(0,o._)("th",{class:"text-center"}," Status ")])],-1))),ii={class:"text-center"},ni={class:"text-center"},si={key:0,class:"d-flex flex-row justify-center align-center"},di=ti((()=>(0,o._)("p",{class:"font-weight-medium"},"No Data Available",-1))),ri=[di];function mi(e,t,a,l,i,n){const s=(0,o.up)("DateRange"),d=(0,o.up)("WeekSheet"),r=(0,o.up)("TimesheetStatus");return(0,o.wg)(),(0,o.j4)(c.K,{fluid:"",class:"w-100 h-100"},{default:(0,o.w5)((()=>[(0,o.Wm)(_e._,{width:"100%",height:"100%",variant:"elevated",elevation:"10",loading:e.loading},{default:(0,o.w5)((()=>[(0,o.Wm)(Se.i,{dark:"",color:"#6a70eb",height:"50"},{default:(0,o.w5)((()=>[(0,o.Wm)(Ce.q,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Review TimeSheet")])),_:1})])),_:1}),(0,o.Wm)(ke.E,null,{default:(0,o.w5)((()=>[(0,o.Wm)(p.o,{align:"end"},{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"12",md:"3"},{default:(0,o.w5)((()=>[(0,o._)("div",ai,[(0,o.Wm)(je.rL,{items:e.timePeriodOptions,"item-title":"title","item-value":"value",density:"compact",label:"Select a Time Period","hide-details":"",modelValue:e.timePeriod,"onUpdate:modelValue":[t[0]||(t[0]=t=>e.timePeriod=t),n.onupdateInput]},null,8,["items","modelValue","onUpdate:modelValue"])])])),_:1}),(0,o.Wm)(h.D,{cols:"12",md:"3"},{default:(0,o.w5)((()=>[(0,o.Wm)(X.h,{density:"compact",variant:"outlined",placeholder:"Employee Id",type:"number","hide-details":"",modelValue:e.searchEmployeeId,"onUpdate:modelValue":[t[1]||(t[1]=t=>e.searchEmployeeId=t),n.onupdateInput]},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,o.Wm)(h.D,{cols:"12",md:"3"},{default:(0,o.w5)((()=>[(0,o.Wm)(X.h,{density:"compact",variant:"outlined",placeholder:"Employee Name",type:"number","hide-details":"",modelValue:e.searchEmployeeId,"onUpdate:modelValue":[t[2]||(t[2]=t=>e.searchEmployeeId=t),n.onupdateInput]},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),"customDate"===e.timePeriod?((0,o.wg)(),(0,o.j4)(h.D,{key:0,cols:"12",md:"12"},{default:(0,o.w5)((()=>[(0,o._)("div",li,[(0,o.Wm)(s,{onUpdateDateRange:n.updateDateRange},null,8,["onUpdateDateRange"]),(0,o.Wm)(u.T,{variant:"text",icon:"mdi mdi-magnify",class:"mt-7",onClick:n.onupdateInput},null,8,["onClick"])])])),_:1})):(0,o.kq)("",!0)])),_:1})])),_:1}),(0,o.Wm)(ve.Z,null,{default:(0,o.w5)((()=>[(0,o.Wm)(be.Y,{density:"compact"},{default:(0,o.w5)((()=>[oi,(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.timeSheets,(e=>((0,o.wg)(),(0,o.iD)("tr",{key:e.name},[(0,o._)("td",null,(0,Y.zw)(e.timeSheetId),1),(0,o._)("td",null,(0,Y.zw)(e.employeeId),1),(0,o._)("td",null,(0,Y.zw)(e.employeeName),1),(0,o._)("td",null,[(0,o.Wm)(d,{title:e.week,timeSheet:e,onGetTimeSheets:n.getTimeSheets},null,8,["title","timeSheet","onGetTimeSheets"])]),(0,o._)("td",ii,(0,Y.zw)(e.logHours),1),(0,o._)("td",ni,[(0,o.Wm)(r,{status:e.status},null,8,["status"])])])))),128))])])),_:1})])),_:1}),0===e.timeSheets.length?((0,o.wg)(),(0,o.iD)("div",si,ri)):(0,o.kq)("",!0),(0,o.Wm)(De.h,null,{default:(0,o.w5)((()=>[(0,o.Wm)(We.C)])),_:1})])),_:1},8,["loading"])])),_:1})}var ui={name:"TimeSheet",data:()=>({dialog:!1,loading:!1,status:"",searchEmployeeId:"",searchEmployeeName:"",dateRange:{startDate:new Date,endDate:new Date},statusOptions:[{title:"All",value:""},{title:"Open",value:"open"},{title:"Submited",value:"submited"},{title:"Approved",value:"approved"},{title:"Denied",value:"denied"}],timePeriodOptions:[{value:"month1",title:"Last 1 Month"},{value:"month3",title:"Last 3 Months"},{value:"month6",title:"Last 6 Months"},{value:"lastYear",title:"Previous Year"},{value:"currentYear",title:"Current Year"},{value:"customDate",title:"Custom Date"}],timePeriod:null,timeSheets:[]}),components:{DateRange:Be,WeekSheet:Zt,TimesheetStatus:Kt},computed:{...(0,m.rn)(["employeeId"]),...(0,m.Se)(["getHeaders"])},methods:{onupdateInput(){this.getTimeSheets()},getStartAndEndDate(){const e=new Date;let t=null,a=e;switch(this.timePeriod){case"month1":t=(0,Oe.Z)(e,30);break;case"month3":t=(0,Oe.Z)(e,90);break;case"month6":t=(0,Oe.Z)(e,180);break;case"lastYear":t=(0,Re.Z)(new Date(e.getFullYear(),0,1),1),a=(0,Re.Z)(new Date(e.getFullYear(),11,31),1);break;case"currentYear":t=new Date(e.getFullYear(),0,1);break;case"customDate":t=this.dateRange.startDate,a=this.dateRange.endDate;break;default:t=new Date(e.getFullYear(),0,1);break}return{startDate:(0,q.Z)(t,"yyyy-MM-dd"),endDate:(0,q.Z)(a,"yyyy-MM-dd")}},async getTimeSheets(){this.loading=!0;const{startDate:e,endDate:t}=this.getStartAndEndDate(),a=`${this.$store.state.backendDomainUrl}/reporting_manager/employees/pending_timesheets/${this.employeeId}?employee_id=${this.searchEmployeeId}&&employee_name=${this.searchEmployeeName}&&start_date=${e}&&end_date=${t}&&status=${this.status}`,l={method:"GET",...this.getHeaders},o=await fetch(a,l);if(o.ok){const e=await o.json();this.timeSheets=e,console.log(this.timeSheets)}this.loading=!1},updateDateRange(e){this.dateRange=e}},mounted(){this.getTimeSheets()}};const ci=(0,k.Z)(ui,[["render",mi],["__scopeId","data-v-25e12231"]]);var pi=ci,hi=a(4108),wi=a(3446),fi=a(4580),gi=a(6191),yi=a(1615);const _i={class:"font-weight-medium text-uppercase"},ki={class:"font-weight-medium text-uppercase"},vi={class:"text-subtitle-2 font-weight-light"},Di={key:0,class:"d-flex justify-center text-subtitle-1"},Wi={key:0,class:"d-flex justify-center text-subtitle-1"},ji={key:1,style:{height:"400px",width:"100%"},class:"d-flex flex-row align-center justify-center"};function bi(e,t,a,l,i,n){const s=(0,o.up)("ProjectAssignmentExpansion");return(0,o.wg)(),(0,o.j4)(c.K,{fluid:"",class:"h-100 w-100"},{default:(0,o.w5)((()=>[i.loading?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(J.C,{key:0,variant:"elevated"},{default:(0,o.w5)((()=>[(0,o.Wm)(Se.i,{height:"50",theme:"dark",color:"primary"},{default:(0,o.w5)((()=>[(0,o.Wm)(Ce.q,null,{default:(0,o.w5)((()=>[(0,o.Uk)("PROJECT ASSIGNMENT")])),_:1}),(0,o.Wm)(yi.l)])),_:1}),(0,o.Wm)(c.K,{fluid:""},{default:(0,o.w5)((()=>[(0,o.Wm)(p.o,null,{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"12"},{default:(0,o.w5)((()=>[(0,o._)("div",_i,(0,Y.zw)(`Employee id : ${i.employeeObj.employeeId}`),1),(0,o._)("div",ki,(0,Y.zw)(`Name : ${i.employeeObj.employeeName}`),1),(0,o._)("div",null,(0,Y.zw)(`Email : ${i.employeeObj.employeeEmail}`),1),(0,o._)("div",vi,(0,Y.zw)(`Position :${i.employeeObj.position}`),1)])),_:1})])),_:1}),(0,o.Wm)(p.o,null,{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"6"},{default:(0,o.w5)((()=>[(0,o.Wm)(_e._,null,{default:(0,o.w5)((()=>[(0,o.Wm)(Se.i,{dark:"",color:"#6a70eb",height:"40"},{default:(0,o.w5)((()=>[(0,o.Wm)(Ce.q,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Projects List")])),_:1})])),_:1}),(0,o.Wm)(_e._,{height:"500",class:"overflow-y-auto"},{default:(0,o.w5)((()=>[(0,o.Wm)(ke.E,null,{default:(0,o.w5)((()=>[(0,o.Wm)(X.h,{variant:"outlined",placeholder:"Search Project",onInput:n.onSearchProjects,modelValue:i.searchProjectName,"onUpdate:modelValue":t[0]||(t[0]=e=>i.searchProjectName=e)},null,8,["onInput","modelValue"])])),_:1}),(0,o.Wm)(ve.Z,null,{default:(0,o.w5)((()=>[(0,o.Wm)(hi.Vc,null,{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.distinctProjectsList,(e=>((0,o.wg)(),(0,o.j4)(wi.M,{key:e.projectId,title:e.projectName},{default:(0,o.w5)((()=>[(0,o.Wm)(fi.H,null,{default:(0,o.w5)((()=>[(0,o.Wm)(s,{projectData:{projectId:e.projectId,projectType:e.projectType,startDate:null,endDate:null,roleId:null}},{default:(0,o.w5)((({form:e,projectDetails:t})=>[(0,o.Wm)(p.o,{justify:"end"},{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"2",class:"mt-1"},{default:(0,o.w5)((()=>[(0,o.Wm)(u.T,{disabled:!e,onClick:e=>n.onClickAddProject(t),color:"primary",loading:i.addLoading},{default:(0,o.w5)((()=>[(0,o.Uk)(" Add ")])),_:2},1032,["disabled","onClick","loading"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["projectData"])])),_:2},1024)])),_:2},1032,["title"])))),128))])),_:1}),0===n.distinctProjectsList.length?((0,o.wg)(),(0,o.iD)("div",Di," No Projects Available ")):(0,o.kq)("",!0)])),_:1})])),_:1})])),_:1})])),_:1}),(0,o.Wm)(h.D,{cols:"6"},{default:(0,o.w5)((()=>[(0,o.Wm)(_e._,null,{default:(0,o.w5)((()=>[(0,o.Wm)(Se.i,{dark:"",color:"#95d3f0",height:"40"},{default:(0,o.w5)((()=>[(0,o.Wm)(Ce.q,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Assigned Projects")])),_:1})])),_:1}),(0,o.Wm)(_e._,{height:"500",class:"overflow-y-auto"},{default:(0,o.w5)((()=>[(0,o.Wm)(ve.Z,null,{default:(0,o.w5)((()=>[(0,o.Wm)(hi.Vc,null,{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.employeeProjectsList,(e=>((0,o.wg)(),(0,o.j4)(wi.M,{key:e.projectId},{default:(0,o.w5)((()=>[(0,o.Wm)(gi.V,null,{default:(0,o.w5)((()=>[(0,o.Wm)(p.o,{"no-gutters":"",justify:"space-between"},{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"4"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,Y.zw)(e.projectName),1)])),_:2},1024),(0,o.Wm)(h.D,{cols:"4"},{default:(0,o.w5)((()=>[(0,o._)("div",{style:(0,Y.j5)({color:n.getProjectStatusColor(e)})},(0,Y.zw)(n.getProjectStatus(e)),5)])),_:2},1024)])),_:2},1024)])),_:2},1024),(0,o.Wm)(fi.H,null,{default:(0,o.w5)((()=>[(0,o.Wm)(s,{projectData:e},{default:(0,o.w5)((({form:t,projectDetails:a})=>[(0,o.Wm)(p.o,{justify:"end"},{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"3"},{default:(0,o.w5)((()=>[(0,o.Wm)(u.T,{disabled:!t,color:"primary",variant:"outlined",onClick:e=>n.onClickUpdateProject(a),loading:i.updateLoading},{default:(0,o.w5)((()=>[(0,o.Uk)(" Update ")])),_:2},1032,["disabled","onClick","loading"])])),_:2},1024),(0,o.Wm)(h.D,{cols:"3"},{default:(0,o.w5)((()=>[(0,o.Wm)(u.T,{color:"red",variant:"outlined",onClick:t=>n.onClickRemoveProject(e.projectId),loading:i.removeLoading},{default:(0,o.w5)((()=>[(0,o.Uk)(" Remove ")])),_:2},1032,["onClick","loading"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["projectData"])])),_:2},1024)])),_:2},1024)))),128))])),_:1}),0===i.employeeProjectsList.length?((0,o.wg)(),(0,o.iD)("div",Wi," No Projects Available ")):(0,o.kq)("",!0)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})),i.loading?((0,o.wg)(),(0,o.iD)("div",ji,[(0,o.Wm)(it.L,{indeterminate:"",color:"primary"})])):(0,o.kq)("",!0)])),_:1})}function Si(e,t,a,l,i,n){return(0,o.wg)(),(0,o.j4)(B.O,{modelValue:i.form,"onUpdate:modelValue":t[5]||(t[5]=e=>i.form=e)},{default:(0,o.w5)((()=>[(0,o.Wm)(p.o,null,{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"12"},{default:(0,o.w5)((()=>[(0,o.Wm)(je.rL,{density:"compact",variant:"outlined",items:i.positionsList,"item-value":"positionId","item-title":"positionName",rules:[e.fieldRules.required],placeholder:"Select Role",modelValue:i.projectDetails.roleId,"onUpdate:modelValue":t[0]||(t[0]=e=>i.projectDetails.roleId=e)},null,8,["items","rules","modelValue"])])),_:1})])),_:1}),"Billable"===i.projectDetails.projectType?((0,o.wg)(),(0,o.j4)(p.o,{key:0},{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"6"},{default:(0,o.w5)((()=>[(0,o.Wm)(X.h,{density:"compact",variant:"outlined",type:"number",rules:[e.fieldRules.required],placeholder:"rate",modelValue:i.projectDetails.rate,"onUpdate:modelValue":t[1]||(t[1]=e=>i.projectDetails.rate=e)},null,8,["rules","modelValue"])])),_:1}),(0,o.Wm)(h.D,{cols:"6"},{default:(0,o.w5)((()=>[(0,o.Wm)(je.rL,{density:"compact",variant:"outlined",rules:[e.fieldRules.required],placeholder:"Currency",modelValue:i.projectDetails.currency,"onUpdate:modelValue":t[2]||(t[2]=e=>i.projectDetails.currency=e),items:["USD","Euro","INR","CHF"]},null,8,["rules","modelValue"])])),_:1})])),_:1})):(0,o.kq)("",!0),(0,o.Wm)(p.o,null,{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"6"},{default:(0,o.w5)((()=>[(0,o.Wm)(X.h,{rules:[e.fieldRules.required],label:"Start date",type:"date",modelValue:i.projectDetails.startDate,"onUpdate:modelValue":t[3]||(t[3]=e=>i.projectDetails.startDate=e)},null,8,["rules","modelValue"])])),_:1}),(0,o.Wm)(h.D,{cols:"6"},{default:(0,o.w5)((()=>[(0,o.Wm)(X.h,{rules:[e.fieldRules.required],label:"End date",type:"date",modelValue:i.projectDetails.endDate,"onUpdate:modelValue":t[4]||(t[4]=e=>i.projectDetails.endDate=e)},null,8,["rules","modelValue"])])),_:1})])),_:1}),(0,o.WI)(e.$slots,"default",{form:i.form,projectDetails:i.projectDetails})])),_:3},8,["modelValue"])}var Ci={data(){return{form:!1,projectDetails:{projectId:this.projectData.projectId,projectType:this.projectData.projectType,startDate:this.projectData.startDate,endDate:this.projectData.endDate,roleId:this.projectData.roleId,rate:this.projectData.rate,currency:this.projectData.currency},positionsList:[]}},props:["projectData"],computed:{...(0,m.rn)(["fieldRules"]),...(0,m.Se)(["getHeaders"])},methods:{async getPositionsList(){const e=`${this.$store.state.backendDomainUrl}/positions`,t={method:"GET",...this.getHeaders},a=await fetch(e,t);if(a.ok){const e=await a.json();this.positionsList=e}}},mounted(){this.getPositionsList()}};const Ii=(0,k.Z)(Ci,[["render",Si]]);var xi=Ii,Vi={data(){return{employeeObj:{},loading:!1,projectsLoading:!1,employeeProjectsLoading:!1,addLoading:!1,removeLoading:!1,updateLoading:!1,projectsList:[],employeeProjectsList:[],searchProjectName:"",costPerHour:null,role:null,positionsList:[],positionId:null}},props:[],components:{ProjectAssignmentExpansion:xi},computed:{...(0,m.rn)(["fieldRules"]),...(0,m.Se)(["getEmployeeDetails","getHeaders"]),distinctProjectsList(){return this.projectsList.filter((e=>this.employeeProjectsList.every((t=>t.projectId!==e.projectId))))}},methods:{openDialog(){this.dialog=!0},onSearchProjects(){this.getProjectsList()},getProjectStatusColor(e){const t=this.getProjectStatus(e);return"Deadline Exceeded"===t?"red":"Not Yet Started"===t?"blue":"In Progress"===t?"green":""},getProjectStatus(e){const t=new Date,a=(0,q.Z)(t,"yyyy-MM-dd");return e.endDate<a?"Deadline Exceeded":e.startDate>a?"Not Yet Started":"In Progress"},async onClickAddProject(e){this.addLoading=!0;const t=`${this.$store.state.backendDomainUrl}/project/employee/save/${this.employeeObj.employeeId}`,a={method:"PUT",...this.getHeaders,body:JSON.stringify(e)},l=await fetch(t,a);l.ok&&(this.getEmployeeProjectsList(),this.$store.dispatch("showNotification","Project Added")),this.addLoading=!1},async onClickRemoveProject(e){this.removeLoading=!0;const t=`${this.$store.state.backendDomainUrl}/project/employee/remove/${this.employeeObj.employeeId}`,a={projectId:e},l={method:"DELETE",...this.getHeaders,body:JSON.stringify(a)},o=await fetch(t,l);o.ok&&(this.getEmployeeProjectsList(),this.$store.dispatch("showNotification","Project Removed")),this.removeLoading=!1},async onClickUpdateProject(e){this.updateLoading=!0;const t=`${this.$store.state.backendDomainUrl}/project/employee/update/${this.employeeObj.employeeId}`,a={method:"PUT",...this.getHeaders,body:JSON.stringify(e)},l=await fetch(t,a);l.ok&&(this.getEmployeeProjectsList(),this.$store.dispatch("showNotification","Project updated")),this.updateLoading=!1},async onClickSave(){const e=`${this.$store.state.backendDomainUrl}/projects/save/${this.employeeObj.employeeId}`,t={method:"PUT",...this.getHeaders,body:JSON.stringify({projectsList:this.employeeProjectsList})},a=await fetch(e,t);a.ok&&(this.dialog=!1,this.$store.dispatch("showNotification","Projects List Updated"))},async getEmployeeData(){const e=await this.getEmployeeDetails(this.$route.params.employeeId);this.employeeObj=e},async getProjectsList(){this.projectsLoading=!0;const e=`${this.$store.state.backendDomainUrl}/projects?projectName=${this.searchProjectName}`,t={method:"GET",...this.getHeaders},a=await fetch(e,t);if(a.ok){const e=await a.json();this.projectsList=e,this.projectsLoading=!1}},async getEmployeeProjectsList(){this.employeeProjectsLoading=!0;const e=`${this.$store.state.backendDomainUrl}/projects/employee/${this.employeeObj.employeeId}`,t={method:"GET",...this.getHeaders},a=await fetch(e,t);if(a.ok){const e=await a.json();this.employeeProjectsList=e,this.employeeProjectsLoading=!1}}},async mounted(){await this.getEmployeeData(),await this.getProjectsList(),await this.getEmployeeProjectsList()}};const Pi=(0,k.Z)(Vi,[["render",bi]]);var Ti=Pi,Li=a(652);const Ei={class:"text-h5"},Ni={class:"text-h5"},$i={class:"w-100 d-flex flex-row align-center justify-space-between"},Ui={style:{"font-size":"11px",color:"red"}},Oi=(0,o._)("span",{class:"font-weight-medium"},"Personal Mail: ",-1),Ri=(0,o._)("span",{class:"font-weight-medium"},"Official Mail: ",-1),Mi=(0,o._)("span",{class:"font-weight-medium"},"Position : ",-1),Ai=(0,o._)("span",{class:"font-weight-medium"},"Department : ",-1),Hi=(0,o._)("span",{class:"font-weight-medium"},"Admin : ",-1),zi=(0,o._)("span",{class:"font-weight-medium"},"Reporting Manager : ",-1);function qi(e,t,a,i,n,s){return(0,o.wg)(),(0,o.j4)(c.K,{fluid:"",class:"h-100 w-100"},{default:(0,o.w5)((()=>[(0,o.Wm)(J.C,{variant:"elevated"},{default:(0,o.w5)((()=>[(0,o.Wm)(Se.i,{height:"50",theme:"dark",color:"primary"},{default:(0,o.w5)((()=>[(0,o.Wm)(Ce.q,null,{default:(0,o.w5)((()=>[(0,o.Uk)("PROFILE")])),_:1}),(0,o.Wm)(yi.l)])),_:1}),(0,o.Wm)(c.K,{fluid:""},{default:(0,o.w5)((()=>[(0,o.Wm)(p.o,{justify:"center"},{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"1"},{default:(0,o.w5)((()=>[(0,o.Wm)(Li.V,{color:"brown",size:"large"},{default:(0,o.w5)((()=>[(0,o._)("span",Ei,(0,Y.zw)(e.employeeDetails.employeeName[0]),1)])),_:1})])),_:1}),(0,o.Wm)(h.D,{cols:"3"},{default:(0,o.w5)((()=>[(0,o._)("div",Ni,(0,Y.zw)(e.employeeDetails.employeeName),1),(0,o._)("div",null,(0,Y.zw)(`Id:  ${e.employeeDetails.employeeId} `),1)])),_:1}),(0,o.Wm)(h.D,{cols:"4"},{default:(0,o.w5)((()=>[(0,o.Wm)(Ke.B,{height:"480",width:"400"},{activator:(0,o.w5)((({props:e})=>[(0,o.Wm)(u.T,(0,o.dG)({variant:"text",color:"blue"},e),{default:(0,o.w5)((()=>[(0,o.Uk)(" Change Password ")])),_:2},1040)])),default:(0,o.w5)((({isActive:a})=>[(0,o.Wm)(_e._,{width:"400",height:"480"},{default:(0,o.w5)((()=>[(0,o.Wm)(ke.E,null,{default:(0,o.w5)((()=>[(0,o._)("div",$i,[(0,o.Uk)(" Change Password "),(0,o.Wm)(u.T,{onClick:e=>s.onCloseDialog(a),icon:"mdi-close",variant:"text"},null,8,["onClick"])])])),_:2},1024),(0,o.Wm)(ve.Z,null,{default:(0,o.w5)((()=>[(0,o.Wm)(B.O,{modelValue:n.changePasswordForm,"onUpdate:modelValue":t[6]||(t[6]=e=>n.changePasswordForm=e),onSubmit:(0,l.iM)((e=>s.onClickChangePassword(a)),["prevent"])},{default:(0,o.w5)((()=>[(0,o.Wm)(p.o,null,{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"12"},{default:(0,o.w5)((()=>[(0,o.Wm)(X.h,{modelValue:n.currentPassword,"onUpdate:modelValue":t[0]||(t[0]=e=>n.currentPassword=e),label:"Current Password",type:n.currentPasswordVisible?"text":"password","append-inner-icon":n.currentPasswordVisible?"mdi-eye-off":"mdi-eye","onClick:appendInner":t[1]||(t[1]=e=>n.currentPasswordVisible=!n.currentPasswordVisible),rules:[e.fieldRules.required,e.fieldRules.password]},null,8,["modelValue","type","append-inner-icon","rules"])])),_:1}),(0,o.Wm)(h.D,{cols:"12"},{default:(0,o.w5)((()=>[(0,o.Wm)(X.h,{modelValue:n.newPassword,"onUpdate:modelValue":t[2]||(t[2]=e=>n.newPassword=e),label:"New Password",type:n.newPasswordVisible?"text":"password","append-inner-icon":n.newPasswordVisible?"mdi-eye-off":"mdi-eye","onClick:appendInner":t[3]||(t[3]=e=>n.newPasswordVisible=!n.newPasswordVisible),rules:[e.fieldRules.required,e.fieldRules.password]},null,8,["modelValue","type","append-inner-icon","rules"])])),_:1}),(0,o.Wm)(h.D,{cols:"12"},{default:(0,o.w5)((()=>[(0,o.Wm)(X.h,{label:"Confirm New Password",modelValue:n.confirmNewPassword,"onUpdate:modelValue":t[4]||(t[4]=e=>n.confirmNewPassword=e),rules:[e.fieldRules.required,n.passwordMatchRule],type:n.confirmNewPasswordVisible?"text":"password","append-inner-icon":n.confirmNewPasswordVisible?"mdi-eye-off":"mdi-eye","onClick:appendInner":t[5]||(t[5]=e=>n.confirmNewPasswordVisible=!n.confirmNewPasswordVisible)},null,8,["modelValue","rules","type","append-inner-icon"])])),_:1})])),_:1}),(0,o.Wm)(p.o,null,{default:(0,o.w5)((()=>[n.isPasswordValid?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(h.D,{key:0},{default:(0,o.w5)((()=>[(0,o._)("p",Ui,(0,Y.zw)(n.passwordError),1)])),_:1})),(0,o.Wm)(h.D,{cols:"12"},{default:(0,o.w5)((()=>[(0,o.Wm)(u.T,{type:"submit",block:"",color:"blue",text:"Change Password",disabled:!n.changePasswordForm,loading:n.changePasswordLoading},null,8,["disabled","loading"])])),_:1})])),_:1})])),_:2},1032,["modelValue","onSubmit"])])),_:2},1024)])),_:2},1024)])),_:1})])),_:1})])),_:1}),(0,o.Wm)(p.o,{justify:"center"},{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"4"},{default:(0,o.w5)((()=>[(0,o._)("div",null,[Oi,(0,o.Uk)(" "+(0,Y.zw)(`${e.employeeDetails.personalMail} `),1)])])),_:1}),(0,o.Wm)(h.D,{cols:"4"},{default:(0,o.w5)((()=>[(0,o._)("div",null,[Ri,(0,o.Uk)(" "+(0,Y.zw)(` ${e.employeeDetails.officialMail} `),1)])])),_:1})])),_:1}),(0,o.Wm)(p.o,{justify:"center"},{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"4"},{default:(0,o.w5)((()=>[(0,o._)("div",null,[Mi,(0,o.Uk)(" "+(0,Y.zw)(` ${e.employeeDetails.positionName} `),1)])])),_:1}),(0,o.Wm)(h.D,{cols:"4"},{default:(0,o.w5)((()=>[(0,o._)("div",null,[Ai,(0,o.Uk)(" "+(0,Y.zw)(` ${e.employeeDetails.departmentName} `),1)])])),_:1})])),_:1}),(0,o.Wm)(p.o,{justify:"center"},{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"4"},{default:(0,o.w5)((()=>[Hi,(0,o.Uk)(" "+(0,Y.zw)(" "+(1===e.employeeDetails.isAdmin?"Yes":"No")),1)])),_:1}),(0,o.Wm)(h.D,{cols:"4"},{default:(0,o.w5)((()=>[(0,o._)("div",null,[zi,(0,o.Uk)(" "+(0,Y.zw)(`${e.employeeDetails.reportingManagerName} `),1)])])),_:1})])),_:1}),(0,o.Wm)(p.o,null,{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"6"},{default:(0,o.w5)((()=>[(0,o.Wm)(_e._,{"min-width":"400",height:"400",class:"overflow-y-auto"},{default:(0,o.w5)((()=>[(0,o.Wm)(Se.i,null,{default:(0,o.w5)((()=>[(0,o.Wm)(Ce.q,null,{default:(0,o.w5)((()=>[(0,o.Uk)(" Assigned Projects ")])),_:1})])),_:1}),(0,o.Wm)(ve.Z,null,{default:(0,o.w5)((()=>[(0,o.Wm)(b.i,{lines:"one"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.projectList,((e,t)=>((0,o.wg)(),(0,o.j4)(j.l,{key:e.projectId,title:`${t+1} ${e.projectName}`},null,8,["title"])))),128)),0===e.projectList.length?((0,o.wg)(),(0,o.j4)(j.l,{key:0,title:"No Projects Assigned"})):(0,o.kq)("",!0)])),_:1})])),_:1})])),_:1})])),_:1}),(0,o.Wm)(h.D,{cols:"6"},{default:(0,o.w5)((()=>[(0,o.Wm)(_e._,{"min-width":"400",height:"400",class:"overflow-y-auto"},{default:(0,o.w5)((()=>[(0,o.Wm)(Se.i,null,{default:(0,o.w5)((()=>[(0,o.Wm)(Ce.q,null,{default:(0,o.w5)((()=>[(0,o.Uk)(" Assigned Employees ")])),_:1})])),_:1}),(0,o.Wm)(ve.Z,null,{default:(0,o.w5)((()=>[(0,o.Wm)(b.i,{lines:"one"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.reportingManagerEmployeesList,(e=>((0,o.wg)(),(0,o.j4)(j.l,{key:e.employeeId,title:`${e.employeeId} - ${e.employeeName}`},null,8,["title"])))),128)),0===n.reportingManagerEmployeesList.length?((0,o.wg)(),(0,o.j4)(j.l,{key:0,title:"No Employees Assigned"})):(0,o.kq)("",!0)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}var Zi={data(){return{changePasswordForm:!1,currentPassword:null,newPassword:null,confirmNewPassword:null,reportingManagerEmployeesList:[],currentPasswordVisible:!1,newPasswordVisible:!1,confirmNewPasswordVisible:!1,isPasswordValid:!0,passwordError:null,changePasswordLoading:!1,passwordMatchRule:()=>this.newPassword===this.confirmNewPassword||"Password Doesn't Match"}},computed:{...(0,m.rn)(["employeeDetails","projectList","employeeId","fieldRules"]),...(0,m.Se)(["getHeaders"])},methods:{async getReportingManagerEmployees(){const e=`${this.$store.state.backendDomainUrl}/reporting_manager/employees/${this.employeeId}`,t={method:"GET",...this.getHeaders},a=await fetch(e,t);a.ok&&(this.reportingManagerEmployeesList=await a.json())},async onClickChangePassword(e){this.changePasswordLoading=!0;const t=`${this.$store.state.backendDomainUrl}/password/reset`,a={method:"PUT",...this.getHeaders,body:JSON.stringify({currentPassword:this.currentPassword,newPassword:this.newPassword})},l=await fetch(t,a),o=await l.json();l.ok?this.onCloseDialog(e):(this.isPasswordValid=!1,this.passwordError=o.message,console.log(o.message)),this.changePasswordLoading=!1},onCloseDialog(e){e.value=!1,this.changePasswordForm=!1,this.currentPassword=null,this.newPassword=null,this.confirmNewPassword=null,this.currentPasswordVisible=!1,this.newPasswordVisible=!1,this.confirmNewPasswordVisible=!1,this.isPasswordValid=!0,this.passwordError=null}},mounted(){this.getReportingManagerEmployees()}};const Fi=(0,k.Z)(Zi,[["render",qi]]);var Gi=Fi;function Yi(e,t){return(0,o.wg)(),(0,o.j4)(c.K,{fluid:"",class:"h-100 w-100 d-flex flex-row align-center justify-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(_e._,{variant:"text"},{default:(0,o.w5)((()=>[(0,o.Wm)(K.f,{src:"https://img.freepik.com/free-vector/page-found-with-people-connecting-plug-concept-illustration_114360-1939.jpg?w=740&t=st=1697115751~exp=1697116351~hmac=a36924e825b54a15fae1862dac081aaca0c951eed47c80bd0df93c72c19b2015",width:"500",height:"500"})])),_:1})])),_:1})}const Bi={},Ki=(0,k.Z)(Bi,[["render",Yi]]);var Ji=Ki;const Xi={class:"w-50 d-none d-md-block"},Qi={key:0,style:{"min-width":"50%"}},en=(0,o._)("h1",{class:"user-login-heading"},"RESET PASSWORD",-1),tn=(0,o._)("br",null,null,-1),an={class:"error-msg"},ln={key:1};function on(e,t,a,i,n,s){return(0,o.wg)(),(0,o.j4)(c.K,{fluid:"",class:"container w-100 h-100 d-flex flex-row justify-center align-center"},{default:(0,o.w5)((()=>[200===n.responseStatus?((0,o.wg)(),(0,o.j4)(J.C,{key:0,"min-width":"55%",class:"form-sheet mx-auto pa-5 d-flex flex-row justify-center align-center",rounded:""},{default:(0,o.w5)((()=>[(0,o._)("div",Xi,[(0,o.Wm)(K.f,{class:"flex-grow-0",cover:"",src:"https://img.freepik.com/free-vector/forgot-password-concept-illustration_114360-1123.jpg?w=740&t=st=1698296974~exp=1698297574~hmac=40d9021866084c2ec121b0099c9ca32ae990d76c3d02080043fdc18d554f8f72"})]),n.isPasswordReset?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",Qi,[en,(0,o.Wm)(B.O,{modelValue:n.form,"onUpdate:modelValue":t[3]||(t[3]=e=>n.form=e),onSubmit:(0,l.iM)(s.onResetPassword,["prevent"]),class:"w-100"},{default:(0,o.w5)((()=>[(0,o.Wm)(X.h,{density:"compact",placeholder:"New Password","prepend-inner-icon":"mdi-lock-outline",variant:"outlined",rules:[e.fieldRules.required,e.fieldRules.password],class:"mb-3",modelValue:n.newPassword,"onUpdate:modelValue":t[0]||(t[0]=e=>n.newPassword=e),"append-inner-icon":n.visible?"mdi-eye-off":"mdi-eye","onClick:appendInner":t[1]||(t[1]=e=>n.visible=!n.visible),type:n.visible?"text":"password"},null,8,["rules","modelValue","append-inner-icon","type"]),(0,o.Wm)(X.h,{density:"compact",placeholder:"Confirm Password","prepend-inner-icon":"mdi-lock-outline",variant:"outlined",rules:[e.fieldRules.required,e.fieldRules.password,n.confirmPasswordRule],modelValue:n.confirmPassword,"onUpdate:modelValue":t[2]||(t[2]=e=>n.confirmPassword=e)},null,8,["rules","modelValue"]),tn,(0,o._)("p",an,(0,Y.zw)(n.errorMsg),1),(0,o.Wm)(u.T,{disabled:!n.form,block:"",color:"primary",size:"large",type:"submit",variant:"elevated",loading:n.buttonLoading},{default:(0,o.w5)((()=>[(0,o.Uk)(" Reset Password ")])),_:1},8,["disabled","loading"])])),_:1},8,["modelValue","onSubmit"])])),n.isPasswordReset?((0,o.wg)(),(0,o.iD)("div",ln," Password Reset sucessfull, redirecting to login... ")):(0,o.kq)("",!0)])),_:1})):(0,o.kq)("",!0),400===n.responseStatus?((0,o.wg)(),(0,o.j4)(J.C,{key:1,"min-width":"55%",class:"form-sheet mx-auto pa-5 d-flex flex-row justify-center align-center",rounded:""},{default:(0,o.w5)((()=>[(0,o.Uk)(" Link Expired ")])),_:1})):(0,o.kq)("",!0),404===n.responseStatus?((0,o.wg)(),(0,o.j4)(J.C,{key:2,"min-width":"55%",class:"form-sheet mx-auto pa-5 d-flex flex-row justify-center align-center",rounded:""},{default:(0,o.w5)((()=>[(0,o.Uk)(" Invalid URL ")])),_:1})):(0,o.kq)("",!0),n.pageLoading?((0,o.wg)(),(0,o.j4)(J.C,{key:3,"min-width":"55%",class:"form-sheet mx-auto pa-5 d-flex flex-row justify-center align-center",rounded:""},{default:(0,o.w5)((()=>[(0,o.Wm)(it.L,{indeterminate:"",color:"primary"})])),_:1})):(0,o.kq)("",!0)])),_:1})}var nn={data(){return{pageLoading:!0,form:!1,visible:!1,newPassword:null,confirmPassword:null,responseStatus:null,buttonLoading:!1,isPasswordReset:!1,errorMsg:"",confirmPasswordRule:e=>e===this.newPassword||"Password doesn't match"}},computed:{...(0,m.rn)(["fieldRules"]),...(0,m.Se)(["getHeaders"])},methods:{async checkResetPage(){this.pageLoading=!0;const{resetToken:e}=this.$route.params,t=`${this.$store.state.backendDomainUrl}/reset-link-verify/${e}`,a={method:"GET",...this.getHeaders},l=await fetch(t,a);if(this.responseStatus=l.status,console.log(this.responseStatus),500!==l.status){const e=await l.json();console.log(e.message)}this.pageLoading=!1},async onResetPassword(){this.buttonLoading=!0;const{resetToken:e}=this.$route.params,t=`${this.$store.state.backendDomainUrl}/reset-password/`,a={method:"PUT",...this.getHeaders,body:JSON.stringify({newPassword:this.newPassword,confirmPassword:this.confirmPassword,resetToken:e})},l=await fetch(t,a),o=await l.json();this.errorMsg=o.message,this.buttonLoading=!1,l.ok&&(this.isPasswordReset=!0,setTimeout((()=>{this.$router.replace("/login")}),2e3))}},mounted(){this.$store.commit("onLogout"),this.checkResetPage()}};const sn=(0,k.Z)(nn,[["render",on]]);var dn=sn;const rn=(0,G.p7)({history:(0,G.r5)("/timesheetDeploy/"),routes:[{name:"Login",path:"/login",component:fe},{name:"Home",path:"/",component:aa},{name:"Submit Timesheet",path:"/submit_timesheet",component:ei},{name:"Employee TimeSheet",path:"/employee_timesheet/:timeSheetId",component:Ja},{name:"Employee TimeSheets",path:"/employee_timesheets",component:va},{name:"Export",path:"/export",component:Aa},{name:"Employees",path:"/employees",component:ul},{name:"Projects",path:"/projects",component:xl},{name:"Customers",path:"/customers",component:Hl},{name:"Review Timesheet",path:"/review_timesheets",component:pi},{name:"Project Assignment",path:"/project_assignment/:employeeId",component:Ti},{name:"Profile",path:"/profile",component:Gi},{name:"Reset Password",path:"/reset-password/:resetToken",component:dn},{name:"Not Found",path:"/:catchAll(.*)",component:Ji}]});rn.beforeEach(((e,t,a)=>{const l=un.getters.getIsLogin;"/login"!==e.fullPath&&un.commit("setRedirectPath",e.fullPath),"Login"===e.name||l||"Reset Password"===e.name?a():a({name:"Login"})}));var mn=rn,un=(0,m.MT)({state:{backendDomainUrl:"http://localhost:8001",jwtToken:"",redirectPath:"/",employeeDetails:{},employeeId:null,employeeName:"",email:"",isAdmin:!1,isLogin:!1,daysOfWeek:[],selectedWeek:"2023-W36",startDate:"",endDate:"",projectList:[],notificationObj:{show:!1,message:""},fieldRules:{required(e){return null!==e&&""!==e||"Required"},email(e){return!(!e.includes("@")||!e.includes(".com"))||"Invalid Email Address"},password(e){return e.length>=8||"Password must be at least 8 characters"}}},mutations:{updateJwtToken(e,t){e.jwtToken=t,localStorage.setItem("timesheetJwtToken",JSON.stringify(t))},updateEmployeeDetailsAndLogin(e,t){e.employeeId=t.employeeId,e.employeeName=t.employeeName,e.email=t.officialMail,e.isAdmin=t.isAdmin,e.employeeDetails=t,e.isLogin=!0,mn.push(e.redirectPath)},setRedirectPath(e,t){e.redirectPath=t},updateDaysOfWeek(e){const{selectedWeek:t}=e,[a,l]=t.split("-W"),o=new Date(a,0,1);let i;i=(0,U.Z)(o)?o:(0,O.Z)(o)||(0,R.Z)(o)||(0,M.Z)(o)?(0,A.Z)(o):(0,H.Z)(o);const n=(0,z.Z)(i,l-1);console.log("first day of current week",n);const s=(0,q.Z)(n,"E,MMM dd"),d=[s];let r=null;for(let m=1;m<=6;m++)r=(0,Z.Z)(n,m),d.push((0,q.Z)(r,"E,MMM dd"));e.daysOfWeek=d,e.startDate=(0,q.Z)(n,"yyyy-MM-dd"),e.endDate=(0,q.Z)(r,"yyyy-MM-dd"),console.log("start date",e.startDate),console.log("end date",e.endDate)},updateRowInput(e,t){const{weeklyProjectHoursList:a,selectedWeek:l}=e,{id:o,name:i,value:n}=t,s=a[l].map((e=>{if(e.id===o){const t={...e};return t[i]=n,t}return e}));e.weeklyProjectHoursList[l]=s},updateSelectedWeek(e,t){e.selectedWeek=t},deleteRow(e,t){const{weeklyProjectHoursList:a,selectedWeek:l}=e,o=a[l].filter((e=>e.id!==t));e.weeklyProjectHoursList[l]=o},onLogout(e){e.isLogin=!1,localStorage.removeItem("timesheetJwtToken")},showNotification(e,t){e.notificationObj={show:!0,message:t}},hideNotification(e){e.notificationObj={show:!1,message:""}}},actions:{async onSuccesfullLogin(e,t){e.commit("updateJwtToken",t),await this.dispatch("getEmployeeProfileDetails")},checkUserValidity(e){let t=localStorage.getItem("timesheetJwtToken");t=JSON.parse(t),null!==t&&(e.state.jwtToken=t,this.dispatch("getEmployeeProfileDetails"))},async getEmployeeProfileDetails(e){const t=`${e.state.backendDomainUrl}/employee/profile`,a={method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${e.state.jwtToken}`}},l=await fetch(t,a);if(l.ok){const t=await l.json();console.log(t),e.commit("updateEmployeeDetailsAndLogin",t),this.dispatch("getProjectData")}},showNotification(e,t){e.commit("showNotification",t),setTimeout((()=>{e.commit("hideNotification")}))},hideNotification(e){e.commit("hideNotification")},updateRowInput(e,t){e.commit("updateRowInput",t)},updateSelectedWeek(e,t){e.commit("updateSelectedWeek",t),e.commit("updateDaysOfWeek")},onLogout(e){e.commit("onLogout"),mn.push("/login")},async getProjectData(e){const t=`${e.state.backendDomainUrl}/projects/employee/${e.state.employeeId}`,a={method:"GET",headers:{"Content-Type":"application/json"}},l=await fetch(t,a);if(l.ok){const t=await l.json();e.state.projectList=t,console.log(e.state.projectList)}},async approveTimeSheet(e,t){const a=`${e.state.backendDomainUrl}/timesheet/approve/${t}`,l={method:"PUT",headers:{"Content-Type":"application/json"}},o=await fetch(a,l);if(o.ok){const t=await o.json();e.commit("showNotification","Timesheet Approved"),console.log(t)}},async submitTimeSheet(e,t){const a=`${e.state.backendDomainUrl}/timesheet/submit/${t}`,l={method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json"}},o=await fetch(a,l);if(o.ok){const t=await o.json();e.commit("showNotification",t.text),console.log(t.text)}},async denyTimeSheet(e,t){const a=`${e.state.backendDomainUrl}/timesheet/deny/${t}`,l={method:"PUT",headers:{"Content-Type":"application/json"}},o=await fetch(a,l);if(o.ok){const t=await o.json();e.commit("showNotification","Timesheet Denied"),console.log(t)}},async openTimeSheet(e,t){const a=`${e.state.backendDomainUrl}/timesheet/open/${t}`,l={method:"PUT",headers:{"Content-Type":"application/json"}},o=await fetch(a,l);if(o.ok){const t=await o.json();e.commit("showNotification","Timesheet Re-opened"),console.log(t)}},async sendEmail(e,t){console.log(t)},async sendEmailOnAction(e,t){const{timeSheetId:a,employeeName:l,startDate:o,endDate:i,message:n,officialMail:s,action:d}=t;console.log(s),console.log(e.state.employeeDetails.officialMail);try{await F.ZP.send("service_evxhn1b","template_pdlg2yl",{action:d,employeeName:l,timeSheetId:a,startDate:o,endDate:i,message:n,toMail:null!==s?s:"",fromMail:e.state.employeeDetails.officialMail},"75B7CIXrKgR0C1weF")}catch(r){console.log(r)}}},getters:{getIsLogin(e){return e.isLogin},getFormatedDateString(){return e=>{if(null===e||""===e)return"-";const t=new Date(e),a=(0,q.Z)(t,"dd, MMM yyyy");return a}},getEmployeeDetails(e){return async t=>{const a=`${e.backendDomainUrl}/employee/${t}`,l={method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${e.jwtToken}`}},o=await fetch(a,l);return o.ok?await o.json():{}}},getHeaders(e){return{headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${e.jwtToken}`}}}}}),cn=(a(9773),a(8727)),pn=(0,cn.Rd)();async function hn(){const e=await a.e(461).then(a.t.bind(a,3657,23));e.load({google:{families:["Roboto:100,300,400,500,700,900&display=swap"]}})}hn(),(0,l.ri)($).use(un).use(pn).use(mn).mount("#app")}},t={};function a(l){var o=t[l];if(void 0!==o)return o.exports;var i=t[l]={exports:{}};return e[l].call(i.exports,i,i.exports,a),i.exports}a.m=e,function(){var e=[];a.O=function(t,l,o,i){if(!l){var n=1/0;for(m=0;m<e.length;m++){l=e[m][0],o=e[m][1],i=e[m][2];for(var s=!0,d=0;d<l.length;d++)(!1&i||n>=i)&&Object.keys(a.O).every((function(e){return a.O[e](l[d])}))?l.splice(d--,1):(s=!1,i<n&&(n=i));if(s){e.splice(m--,1);var r=o();void 0!==r&&(t=r)}}return t}i=i||0;for(var m=e.length;m>0&&e[m-1][2]>i;m--)e[m]=e[m-1];e[m]=[l,o,i]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};a.t=function(l,o){if(1&o&&(l=this(l)),8&o)return l;if("object"===typeof l&&l){if(4&o&&l.__esModule)return l;if(16&o&&"function"===typeof l.then)return l}var i=Object.create(null);a.r(i);var n={};e=e||[null,t({}),t([]),t(t)];for(var s=2&o&&l;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){n[e]=function(){return l[e]}}));return n["default"]=function(){return l},a.d(i,n),i}}(),function(){a.d=function(e,t){for(var l in t)a.o(t,l)&&!a.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}}(),function(){a.f={},a.e=function(e){return Promise.all(Object.keys(a.f).reduce((function(t,l){return a.f[l](e,t),t}),[]))}}(),function(){a.u=function(e){return"js/"+(461===e?"webfontloader":e)+"."+{269:"cd6ff2c2",297:"cf1c9643",461:"6e45b15f",617:"5a1749e4"}[e]+".js"}}(),function(){a.miniCssF=function(e){}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="timesheetapp:";a.l=function(l,o,i,n){if(e[l])e[l].push(o);else{var s,d;if(void 0!==i)for(var r=document.getElementsByTagName("script"),m=0;m<r.length;m++){var u=r[m];if(u.getAttribute("src")==l||u.getAttribute("data-webpack")==t+i){s=u;break}}s||(d=!0,s=document.createElement("script"),s.charset="utf-8",s.timeout=120,a.nc&&s.setAttribute("nonce",a.nc),s.setAttribute("data-webpack",t+i),s.src=l),e[l]=[o];var c=function(t,a){s.onerror=s.onload=null,clearTimeout(p);var o=e[l];if(delete e[l],s.parentNode&&s.parentNode.removeChild(s),o&&o.forEach((function(e){return e(a)})),t)return t(a)},p=setTimeout(c.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=c.bind(null,s.onerror),s.onload=c.bind(null,s.onload),d&&document.head.appendChild(s)}}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.p="/timesheetDeploy/"}(),function(){var e={143:0};a.f.j=function(t,l){var o=a.o(e,t)?e[t]:void 0;if(0!==o)if(o)l.push(o[2]);else{var i=new Promise((function(a,l){o=e[t]=[a,l]}));l.push(o[2]=i);var n=a.p+a.u(t),s=new Error,d=function(l){if(a.o(e,t)&&(o=e[t],0!==o&&(e[t]=void 0),o)){var i=l&&("load"===l.type?"missing":l.type),n=l&&l.target&&l.target.src;s.message="Loading chunk "+t+" failed.\n("+i+": "+n+")",s.name="ChunkLoadError",s.type=i,s.request=n,o[1](s)}};a.l(n,d,"chunk-"+t,t)}},a.O.j=function(t){return 0===e[t]};var t=function(t,l){var o,i,n=l[0],s=l[1],d=l[2],r=0;if(n.some((function(t){return 0!==e[t]}))){for(o in s)a.o(s,o)&&(a.m[o]=s[o]);if(d)var m=d(a)}for(t&&t(l);r<n.length;r++)i=n[r],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(m)},l=self["webpackChunktimesheetapp"]=self["webpackChunktimesheetapp"]||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))}();var l=a.O(void 0,[998],(function(){return a(2246)}));l=a.O(l)})();
//# sourceMappingURL=app.6db6059a.js.map