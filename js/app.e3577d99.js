(function(){"use strict";var e={4394:function(e,t,a){var o=a(9242),l=a(3396),n=a(7718),i=a(8106),s=a(4454),d=a(3140);function r(e,t,a,o,r,m){const u=(0,l.up)("NavigationDrawer"),c=(0,l.up)("NavBar"),p=(0,l.up)("router-view");return(0,l.wg)(),(0,l.j4)(n.q,null,{default:(0,l.w5)((()=>[(0,l.Wm)(s.s,null,{default:(0,l.w5)((()=>[e.isLogin?((0,l.wg)(),(0,l.j4)(u,{key:0})):(0,l.kq)("",!0),e.isLogin?((0,l.wg)(),(0,l.j4)(i.L,{key:1},{default:(0,l.w5)((()=>[(0,l.Wm)(c)])),_:1})):(0,l.kq)("",!0),(0,l.Wm)(d.O,{class:"d-flex align-center justify-center"},{default:(0,l.w5)((()=>[(0,l.Wm)(p)])),_:1})])),_:1})])),_:1})}var m=a(65),u=a(7312),c=a(3369),p=a(6824),h=a(8521);const w=(0,l._)("img",{class:"website-logo",src:"https://static.wixstatic.com/media/a2c5d8_c4200c39dc3647a0a3a0bebebd9ab1c3~mv2.png/v1/fill/w_640,h_184,al_c,q_85,usm_0.66_1.00_0.01,enc_auto/a2c5d8_c4200c39dc3647a0a3a0bebebd9ab1c3~mv2.png"},null,-1),f={class:"nav-items-card d-flex flex-row align-center justify-space-around"},g={class:"nav-item"};function y(e,t,a,o,n,i){const s=(0,l.up)("router-link");return(0,l.wg)(),(0,l.j4)(c.K,{fluid:""},{default:(0,l.w5)((()=>[(0,l.Wm)(p.o,{justify:"space-between",class:"nav-bar-card"},{default:(0,l.w5)((()=>[(0,l.Wm)(h.D,{cols:"4"},{default:(0,l.w5)((()=>[(0,l._)("div",null,[(0,l.Wm)(s,{to:"/"},{default:(0,l.w5)((()=>[w])),_:1})])])),_:1}),(0,l.Wm)(h.D,{cols:"2"},{default:(0,l.w5)((()=>[(0,l._)("div",f,[(0,l._)("div",g,[(0,l.Wm)(u.T,{variant:"outlined",color:"warning",onClick:t[0]||(t[0]=t=>e.$store.dispatch("onLogout"))},{default:(0,l.w5)((()=>[(0,l.Uk)(" Logout ")])),_:1})])])])),_:1})])),_:1})])),_:1})}var _={components:{},computed:{...(0,m.rn)(["isAdmin"])}},k=a(89);const D=(0,k.Z)(_,[["render",y]]);var v=D,j=a(4075),W=a(8777),b=a(6145),S=a(7754),C=a(9657);const I={class:"mb-5"},x={key:0};function V(e,t,a,o,n,i){const s=(0,l.up)("router-link");return(0,l.wg)(),(0,l.j4)(C.V,{"expand-on-hover":"",rail:""},{default:(0,l.w5)((()=>[(0,l.Wm)(s,{to:"/profile",class:"router-link"},{default:(0,l.w5)((()=>[(0,l.Wm)(W.l,{"prepend-avatar":"https://media.istockphoto.com/id/1300845620/vector/user-icon-flat-isolated-on-white-background-user-symbol-vector-illustration.jpg?s=612x612&w=0&k=20&c=yBeyba0hUkh14_jgv1OKqIH0CCSWU_4ckRkAoy2p73o=",title:e.$store.state.employeeName,nav:""},null,8,["title"])])),_:1}),(0,l.Wm)(j.J),(0,l.Wm)(b.i,{density:"compact",nav:""},{default:(0,l.w5)((()=>[(0,l._)("div",I,[(0,l.Wm)(S.b,{class:"text-subtitle-1"},{default:(0,l.w5)((()=>[(0,l.Uk)("EMPLOYEE")])),_:1}),(0,l.Wm)(s,{to:"/submit_timesheet/",class:"router-link"},{default:(0,l.w5)((()=>[(0,l.Wm)(W.l,{"prepend-icon":"mdi-file-send",title:"Submit Timesheet",value:"home"})])),_:1}),(0,l.Wm)(s,{to:"/",class:"router-link"},{default:(0,l.w5)((()=>[(0,l.Wm)(W.l,{"prepend-icon":"mdi-text-box-search",title:"Search Timesheet",value:"searchTimesheet"})])),_:1}),(0,l.Wm)(s,{to:"/review_timesheets",class:"router-link"},{default:(0,l.w5)((()=>[(0,l.Wm)(W.l,{"prepend-icon":"mdi-file-check",title:"Review Timesheets",value:"reviewTimesheets"})])),_:1})]),e.isAdmin?((0,l.wg)(),(0,l.iD)("div",x,[(0,l.Wm)(S.b,{class:"text-subtitle-1"},{default:(0,l.w5)((()=>[(0,l.Uk)("Admin")])),_:1}),(0,l.Wm)(s,{to:"/",class:"router-link"},{default:(0,l.w5)((()=>[(0,l.Wm)(W.l,{"prepend-icon":"mdi-account-search",title:"Employee Timesheet",value:"employeeTimesheet"})])),_:1}),(0,l.Wm)(s,{to:"/employees",class:"router-link"},{default:(0,l.w5)((()=>[(0,l.Wm)(W.l,{"prepend-icon":"mdi-account-supervisor",title:"Employees",value:"employees"})])),_:1}),(0,l.Wm)(s,{to:"/customers",class:"router-link"},{default:(0,l.w5)((()=>[(0,l.Wm)(W.l,{"prepend-icon":"mdi-domain",title:"Customers",value:"customers"})])),_:1}),(0,l.Wm)(s,{to:"/projects",class:"router-link"},{default:(0,l.w5)((()=>[(0,l.Wm)(W.l,{"prepend-icon":"mdi-file-multiple",title:"Projects",value:"projects"})])),_:1}),(0,l.Wm)(s,{to:"/export",class:"router-link"},{default:(0,l.w5)((()=>[(0,l.Wm)(W.l,{"prepend-icon":"mdi-export",title:"Export Timesheet",value:"export"})])),_:1})])):(0,l.kq)("",!0)])),_:1})])),_:1})}var T={data(){return{}},components:{},computed:{...(0,m.rn)(["isAdmin"])}};const P=(0,k.Z)(T,[["render",V],["__scopeId","data-v-0ce2d6b6"]]);var L=P,E={name:"App",data:()=>({isUserLogin:!1}),components:{NavBar:v,NavigationDrawer:L},computed:{...(0,m.rn)(["isLogin"])},created(){this.$store.dispatch("checkUserValidity")}};const N=(0,k.Z)(E,[["render",r]]);var $=N,U=(a(7658),a(493)),O=a(2890),R=a(6511),M=a(5174),H=a(4294),A=a(2483),z=a(7139),q=a(6422),Z=a(8694),F=a(4286),G=a(165),Y=a(8952);const B=e=>((0,l.dD)("data-v-bc684cda"),e=e(),(0,l.Cn)(),e),K=B((()=>(0,l._)("h1",{class:"user-login-heading"},"USER LOGIN",-1))),J={class:"w-100 d-flex flex-row justify-end"},X=B((()=>(0,l._)("br",null,null,-1))),Q={class:"error-msg"},ee=B((()=>(0,l._)("h1",{class:"user-login-heading"},"RESET PASSWORD",-1))),te={key:0},ae=B((()=>(0,l._)("p",{class:"reset-mail-para"}," Please enter your email address. We'll send you a link to reset your password ",-1))),oe={key:1,class:"reset-mail-para"},le={class:"email-highlight"},ne={class:"w-100 d-flex flex-row justify-end"},ie=B((()=>(0,l._)("br",null,null,-1))),se={class:"error-msg"};function de(e,t,a,n,i,s){return(0,l.wg)(),(0,l.j4)(c.K,{fluid:"",class:"login-bg-container d-flex align-center justify-center"},{default:(0,l.w5)((()=>[(0,l.Wm)(p.o,{justify:"center",align:"center",class:"row"},{default:(0,l.w5)((()=>[(0,l.Wm)(h.D,{cols:"12",sm:"12",md:"10",lg:"8",class:"column"},{default:(0,l.w5)((()=>[(0,l.Wm)(F.C,{class:"d-flex flex-row justify-center",height:"100%",rounded:""},{default:(0,l.w5)((()=>[(0,l.Wm)(F.C,{width:"55%",class:"pa-5 d-none d-sm-block",rounded:""},{default:(0,l.w5)((()=>[(0,l.Wm)(Z.f,{class:"flex-grow-0",width:"100%",cover:"",src:"https://img.freepik.com/free-vector/time-management-successful-teamwork-deadline-stress-overcoming-with-task-planning-control-alarm-clock-flat-composition-vector-illustration_1284-30802.jpg?w=740&t=st=1694003246~exp=1694003846~hmac=19639599c6bb0ae75a0c689223304441d8bf319b08536ff2f287e8401382c940"})])),_:1}),(0,l.Wm)(F.C,{"min-width":"45%",class:"d-flex flex-row align-center justify-center"},{default:(0,l.w5)((()=>[(0,l.Wm)(Y.Qn,null,{default:(0,l.w5)((()=>[i.isLoginView?((0,l.wg)(),(0,l.j4)(F.C,{key:0,"min-width":"95%",class:"form-sheet mx-auto pa-5 d-flex flex-column justify-center align-center",rounded:""},{default:(0,l.w5)((()=>[(0,l.Wm)(F.C,{width:"100%",class:"d-sm-none",rounded:""},{default:(0,l.w5)((()=>[(0,l.Wm)(Z.f,{class:"flex-grow-0",width:"100%",cover:"",src:"https://img.freepik.com/premium-vector/woman-sitting-hourglass_165488-4217.jpg?w=740"})])),_:1}),K,(0,l.Wm)(q.O,{modelValue:i.form,"onUpdate:modelValue":t[3]||(t[3]=e=>i.form=e),onSubmit:(0,o.iM)(s.onSubmit,["prevent"]),class:"w-100"},{default:(0,l.w5)((()=>[(0,l.Wm)(G.h,{density:"compact",placeholder:"Employee Id","prepend-inner-icon":"mdi-account",variant:"outlined",rules:[e.fieldRules.required],class:"mb-3",modelValue:i.employeeId,"onUpdate:modelValue":t[0]||(t[0]=e=>i.employeeId=e)},null,8,["rules","modelValue"]),(0,l.Wm)(G.h,{"append-inner-icon":i.visible?"mdi-eye-off":"mdi-eye",type:i.visible?"text":"password",density:"compact",placeholder:"Password","prepend-inner-icon":"mdi-lock-outline",variant:"outlined","onClick:appendInner":t[1]||(t[1]=e=>i.visible=!i.visible),rules:[e.fieldRules.required,i.rules.min],modelValue:i.password,"onUpdate:modelValue":t[2]||(t[2]=e=>i.password=e)},null,8,["append-inner-icon","type","rules","modelValue"]),(0,l._)("div",J,[(0,l.Wm)(u.T,{variant:"text",color:"blue",onClick:s.toggleLoginView},{default:(0,l.w5)((()=>[(0,l.Uk)("Forgot Password ?")])),_:1},8,["onClick"])]),X,(0,l._)("p",Q,(0,z.zw)(i.errorMsg),1),(0,l.Wm)(u.T,{disabled:!i.form,loading:i.loading,block:"",color:"primary",size:"large",type:"submit",variant:"elevated"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Log In ")])),_:1},8,["disabled","loading"])])),_:1},8,["modelValue","onSubmit"])])),_:1})):(0,l.kq)("",!0)])),_:1}),(0,l.Wm)(Y.Zy,null,{default:(0,l.w5)((()=>[i.isForgotView?((0,l.wg)(),(0,l.j4)(F.C,{key:0,"min-width":"95%",class:"form-sheet mx-auto pa-5 d-flex flex-column justify-center align-center",rounded:""},{default:(0,l.w5)((()=>[(0,l._)("div",null,[(0,l.Wm)(F.C,{width:"100%",class:"d-sm-none",rounded:""},{default:(0,l.w5)((()=>[(0,l.Wm)(Z.f,{class:"flex-grow-0",width:"100%",cover:"",src:"https://img.freepik.com/premium-vector/woman-sitting-hourglass_165488-4217.jpg?w=740"})])),_:1}),ee,(0,l.Wm)(q.O,{modelValue:i.form,"onUpdate:modelValue":t[5]||(t[5]=e=>i.form=e),onSubmit:(0,o.iM)(s.onSubmit,["prevent"]),class:"w-100"},{default:(0,l.w5)((()=>[i.isEmailVerified?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",te,[ae,(0,l.Wm)(G.h,{density:"compact",placeholder:"Verify you Email","prepend-inner-icon":"mdi-email",variant:"outlined",rules:[e.fieldRules.required,e.fieldRules.email],class:"mb-3",modelValue:i.email,"onUpdate:modelValue":t[4]||(t[4]=e=>i.email=e)},null,8,["rules","modelValue"])])),i.isEmailVerified?((0,l.wg)(),(0,l.iD)("div",oe,[(0,l._)("p",null,[(0,l.Uk)("Rest Password link sucessfully sent to "),(0,l._)("span",le,(0,z.zw)(i.email),1)])])):(0,l.kq)("",!0),(0,l._)("div",ne,[(0,l.Wm)(u.T,{variant:"text",color:"blue",onClick:s.goToLogin},{default:(0,l.w5)((()=>[(0,l.Uk)("Go To Login")])),_:1},8,["onClick"])]),ie,(0,l._)("p",se,(0,z.zw)(i.emailErrorMsg),1),i.isEmailVerified?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(u.T,{key:2,loading:i.emailVerifyLoading,block:"",color:"primary",size:"large",variant:"elevated",onClick:s.verifyAndSendLink},{default:(0,l.w5)((()=>[(0,l.Uk)(" Verify and Send ")])),_:1},8,["loading","onClick"]))])),_:1},8,["modelValue","onSubmit"])])])),_:1})):(0,l.kq)("",!0)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}var re={data(){return{visible:!1,loading:!1,form:!1,password:"",employeeId:"",errorMsg:"",isLoginView:!0,isForgotView:!1,emailErrorMsg:null,emailVerifyLoading:!1,isEmailVerified:!1,email:null,rules:{required:e=>!!e||"Required.",min:e=>e.length>=8||"Min 8 characters"},employeeIdRule:[e=>e.length>0||"Required"]}},computed:{...(0,m.rn)(["fieldRules"])},methods:{async onSubmit(){if(!this.form)return;this.loading=!0;const e={employeeId:this.employeeId,password:this.password},t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)},a=await fetch(`${this.$store.state.backendDomainUrl}/login`,t),o=await a.json();a.ok?await this.$store.dispatch("onSuccesfullLogin",o.jwtToken):this.errorMsg=o.text,this.loading=!1},toggleLoginView(){this.isLoginView=!this.isLoginView,setTimeout((()=>{this.isForgotView=!this.isForgotView}),400)},goToLogin(){this.isForgotView=!this.isForgotView,setTimeout((()=>{this.isLoginView=!this.isLoginView}),400),this.email=null,this.employeeId=null,this.password=null},async verifyAndSendLink(){this.emailVerifyLoading=!0;const e=`${this.$store.state.backendDomainUrl}/forgot-password/`,t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:this.email})},a=await fetch(e,t),o=await a.json();a.ok?(console.log(o),this.isEmailVerified=!0):this.emailErrorMsg=o.message,this.emailVerifyLoading=!1,console.log(o.message)}}};const me=(0,k.Z)(re,[["render",de],["__scopeId","data-v-bc684cda"]]);var ue=me;const ce={class:"home-bg-container"};function pe(e,t,a,o,n,i){const s=(0,l.up)("EmployeeTimesheet"),d=(0,l.up)("SearchTimesheet");return(0,l.wg)(),(0,l.iD)("div",ce,[e.$store.state.isAdmin?((0,l.wg)(),(0,l.j4)(s,{key:0})):((0,l.wg)(),(0,l.j4)(d,{key:1}))])}var he=a(11),we=a(6572),fe=a(1888),ge=a(1334),ye=a(9234),_e=a(4592),ke=a(4413),De=a(7471),ve=a(5030);const je=e=>((0,l.dD)("data-v-31f41c5a"),e=e(),(0,l.Cn)(),e),We={class:"d-flex flex-row align-center"},be=je((()=>(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",null," TimeSheet Id "),(0,l._)("th",{class:"text-left"}," Employee Id "),(0,l._)("th",{class:"text-left"}," employee Name "),(0,l._)("th",{class:"text-center"}," Week "),(0,l._)("th",{class:"text-center"}," Log Hours "),(0,l._)("th",{class:"text-center"}," Status ")])],-1))),Se={class:"text-left pa-0",width:"200px"},Ce={class:"text-left pa-0",width:"200px"},Ie={class:"text-left pa-0"},xe={class:"text-left pa-0",width:"250px"},Ve={class:"text-center pa-0",width:"150px"},Te={class:"text-center pa-0"},Pe={class:"text-center"},Le={class:"text-center"},Ee={class:"text-center"},Ne={key:0,class:"d-flex flex-row justify-center align-center"},$e=je((()=>(0,l._)("p",{class:"font-weight-medium"},"No Data Available",-1))),Ue=[$e];function Oe(e,t,a,o,n,i){const s=(0,l.up)("DateRange"),d=(0,l.up)("WeekSheet"),r=(0,l.up)("TimesheetStatus");return(0,l.wg)(),(0,l.j4)(c.K,{fluid:"",class:"w-100 h-100"},{default:(0,l.w5)((()=>[(0,l.Wm)(he._,{width:"100%",height:"100%",variant:"elevated",elevation:"10",loading:e.loading},{default:(0,l.w5)((()=>[(0,l.Wm)(De.i,{dark:"",color:"#6a70eb",height:"50"},{default:(0,l.w5)((()=>[(0,l.Wm)(ve.q,null,{default:(0,l.w5)((()=>[(0,l.Uk)("Employee TimeSheet")])),_:1})])),_:1}),(0,l.Wm)(we.E,null,{default:(0,l.w5)((()=>[(0,l.Wm)(p.o,{align:"end"},{default:(0,l.w5)((()=>["customDate"===e.timePeriod?((0,l.wg)(),(0,l.j4)(h.D,{key:0,cols:"12",md:"6"},{default:(0,l.w5)((()=>[(0,l._)("div",We,[(0,l.Wm)(s,{onUpdateDateRange:i.updateDateRange},null,8,["onUpdateDateRange"]),(0,l.Wm)(u.T,{variant:"text",icon:"mdi mdi-magnify",class:"mt-7",onClick:i.onupdateInput},null,8,["onClick"])])])),_:1})):(0,l.kq)("",!0)])),_:1})])),_:1}),(0,l.Wm)(fe.Z,null,{default:(0,l.w5)((()=>[(0,l.Wm)(ke.Y,{density:"compact"},{default:(0,l.w5)((()=>[be,(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",Se,[(0,l.Wm)(G.h,{loading:e.loading,density:"compact",variant:"outlined","hide-details":"",placeholder:"Search TimeSheet Id",type:"number",modelValue:e.timeSheetId,"onUpdate:modelValue":t[0]||(t[0]=t=>e.timeSheetId=t),onInput:i.onupdateInput},null,8,["loading","modelValue","onInput"])]),(0,l._)("th",Ce,[(0,l.Wm)(G.h,{loading:e.loading,density:"compact",variant:"outlined","hide-details":"",placeholder:"Search Employee Id",modelValue:e.employeeId,"onUpdate:modelValue":t[1]||(t[1]=t=>e.employeeId=t),onInput:i.onupdateInput},null,8,["loading","modelValue","onInput"])]),(0,l._)("th",Ie,[(0,l.Wm)(G.h,{loading:e.loading,density:"compact",variant:"outlined","hide-details":"",placeholder:"Search Name",modelValue:e.employeeName,"onUpdate:modelValue":t[2]||(t[2]=t=>e.employeeName=t),onInput:i.onupdateInput},null,8,["loading","modelValue","onInput"])]),(0,l._)("th",xe,[(0,l.Wm)(_e.rL,{items:e.timePeriodOptions,"item-title":"title","item-value":"value",density:"compact",variant:"outlined",placeholder:"Select a Time Period","hide-details":"",modelValue:e.timePeriod,"onUpdate:modelValue":[t[3]||(t[3]=t=>e.timePeriod=t),i.onupdateInput]},null,8,["items","modelValue","onUpdate:modelValue"])]),(0,l._)("th",Ve,[(0,l.Wm)(G.h,{loading:e.loading,density:"compact",variant:"outlined","hide-details":"",placeholder:"Search Hours",type:"number",modelValue:e.logHours,"onUpdate:modelValue":t[4]||(t[4]=t=>e.logHours=t),onInput:i.onupdateInput},null,8,["loading","modelValue","onInput"])]),(0,l._)("th",Te,[(0,l.Wm)(_e.rL,{items:e.statusOptions,"item-title":"title","item-value":"value",density:"compact",variant:"outlined",placeholder:"Status","hide-details":"",modelValue:e.status,"onUpdate:modelValue":[t[5]||(t[5]=t=>e.status=t),i.onupdateInput]},null,8,["items","modelValue","onUpdate:modelValue"])])])]),(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.timeSheets,(e=>((0,l.wg)(),(0,l.iD)("tr",{key:e.name},[(0,l._)("td",null,(0,z.zw)(e.timeSheetId),1),(0,l._)("td",null,(0,z.zw)(e.employeeId),1),(0,l._)("td",null,(0,z.zw)(e.employeeName),1),(0,l._)("td",Pe,[(0,l.Wm)(d,{title:e.week,timeSheet:e,onGetTimeSheets:i.getTimeSheets},null,8,["title","timeSheet","onGetTimeSheets"])]),(0,l._)("td",Le,(0,z.zw)(e.logHours),1),(0,l._)("td",Ee,[(0,l.Wm)(r,{status:e.status},null,8,["status"])])])))),128))])])),_:1})])),_:1}),0===e.timeSheets.length?((0,l.wg)(),(0,l.iD)("div",Ne,Ue)):(0,l.kq)("",!0),(0,l.Wm)(ge.h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(ye.C)])),_:1})])),_:1},8,["loading"])])),_:1})}var Re=a(1271),Me=a(3833);const He=e=>((0,l.dD)("data-v-4c8b82a4"),e=e(),(0,l.Cn)(),e),Ae={class:"d-flex flex-row align-center"},ze={class:"d-flex flex-column mr-3 w-50"},qe=He((()=>(0,l._)("label",{class:"calender-input-label"},"Start Date",-1))),Ze={class:"d-flex flex-column w-50"},Fe=He((()=>(0,l._)("label",{class:"calender-input-label"},"End Date",-1)));function Ge(e,t,a,n,i,s){return(0,l.wg)(),(0,l.iD)("div",Ae,[(0,l._)("div",ze,[qe,(0,l.wy)((0,l._)("input",{class:"calendar-input",type:"date","onUpdate:modelValue":t[0]||(t[0]=e=>i.startDate=e),onChange:t[1]||(t[1]=(...e)=>s.onDateChange&&s.onDateChange(...e))},null,544),[[o.nr,i.startDate]])]),(0,l._)("div",Ze,[Fe,(0,l.wy)((0,l._)("input",{class:"calendar-input",type:"date","onUpdate:modelValue":t[2]||(t[2]=e=>i.endDate=e),onChange:t[3]||(t[3]=(...e)=>s.onDateChange&&s.onDateChange(...e))},null,544),[[o.nr,i.endDate]])])])}var Ye={data(){return{startDate:null,endDate:null}},methods:{onDateChange(){this.$emit("updateDateRange",{startDate:new Date(this.startDate),endDate:new Date(this.endDate)})}}};const Be=(0,k.Z)(Ye,[["render",Ge],["__scopeId","data-v-4c8b82a4"]]);var Ke=Be,Je=a(3601);const Xe={class:"d-flex flex-row justify-space-between"},Qe={class:"text-h7"},et={style:{"font-size":"14px"}},tt={class:"text-h9"},at={key:0},ot={key:1},lt={key:2};function nt(e,t,a,o,n,i){const s=(0,l.up)("NonEditableTable"),d=(0,l.up)("AdminButton"),r=(0,l.up)("router-link");return(0,l.wg)(),(0,l.j4)(p.o,{justify:"center"},{default:(0,l.w5)((()=>[(0,l.Wm)(Je.B,{modelValue:e.dialog,"onUpdate:modelValue":t[1]||(t[1]=t=>e.dialog=t),persistent:"",width:"1024"},{activator:(0,l.w5)((({props:e})=>[(0,l.Wm)(u.T,(0,l.dG)({variant:"text"},e,{class:"week-number-link",onClick:i.onClickWeek}),{default:(0,l.w5)((()=>[(0,l.Uk)((0,z.zw)(a.title),1)])),_:2},1040,["onClick"])])),default:(0,l.w5)((()=>[(0,l.Wm)(he._,null,{default:(0,l.w5)((()=>[(0,l.Wm)(we.E,null,{default:(0,l.w5)((()=>[(0,l._)("div",Xe,[(0,l._)("span",Qe,"TimeSheet ID : "+(0,z.zw)(a.timeSheet.timeSheetId),1),(0,l._)("p",et,(0,z.zw)(e.getFormatedDateString(a.timeSheet.startDate))+" - "+(0,z.zw)(e.getFormatedDateString(a.timeSheet.endDate)),1),(0,l._)("span",tt,"Employee ID: "+(0,z.zw)(a.timeSheet.employeeId),1)])])),_:1}),(0,l.Wm)(fe.Z,null,{default:(0,l.w5)((()=>[(0,l.Wm)(s,{timeSheetObj:a.timeSheet},null,8,["timeSheetObj"])])),_:1}),(0,l.Wm)(ge.h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(ye.C),(0,l.Wm)(u.T,{color:"blue-darken-1",variant:"text",onClick:t[0]||(t[0]=t=>e.dialog=!1)},{default:(0,l.w5)((()=>[(0,l.Uk)(" Cancel ")])),_:1}),a.timeSheet.reportingManagerId!==e.employeeId&&!e.isAdmin||"submited"!==a.timeSheet.status?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",at,[(0,l.Wm)(d,{color:"warning",text:"Re-open",onOnClickOpen:i.onClickOpen,loading:e.openLoading},null,8,["onOnClickOpen","loading"]),(0,l.Wm)(d,{color:"red",text:"Deny",onOnClickDeny:i.onClickDeny,loading:e.denyLoading},null,8,["onOnClickDeny","loading"]),(0,l.Wm)(d,{color:"green",text:"Approve",onOnClickApprove:i.onClickApprove,loading:e.approveLoading},null,8,["onOnClickApprove","loading"])])),e.isAdmin||"open"!==a.timeSheet.status?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",ot,[(0,l.Wm)(r,{to:`submit_timesheet/?calendarValue=${a.timeSheet.week}`},{default:(0,l.w5)((()=>[(0,l.Wm)(u.T,{variant:"outlined",color:"green"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Edit & Submit ")])),_:1})])),_:1},8,["to"])])),e.isAdmin||"denied"!==a.timeSheet.status?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",lt,[(0,l.Wm)(r,{to:`submit_timesheet/?calendarValue=${a.timeSheet.week}`},{default:(0,l.w5)((()=>[(0,l.Wm)(u.T,{variant:"outlined",color:"green"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Re-Open ")])),_:1})])),_:1},8,["to"])]))])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}var it=a(3173);const st=e=>((0,l.dD)("data-v-04b707b5"),e=e(),(0,l.Cn)(),e),dt={key:0,class:"w-100 d-flex flex-row align-center justify-center",style:{height:"200px"}},rt=st((()=>(0,l._)("th",{class:"text-left",width:"250px"}," Projects ",-1))),mt=st((()=>(0,l._)("th",{style:{"font-size":"14px","font-weight":"bold",color:"black"}}," Total: ",-1))),ut={class:"mt-6 mb-6 font-weight-medium"},ct={class:"text-center"},pt={class:"text-center"},ht={class:"text-center"},wt={class:"text-center"},ft={class:"text-center"},gt={class:"text-center"},yt={class:"text-center"},_t={class:"text-center"},kt=st((()=>(0,l._)("td",null,[(0,l._)("p",null," Total : ")],-1))),Dt={class:"text-center"},vt={class:"text-center"},jt={class:"text-center"},Wt={class:"text-center"},bt={class:"text-center"},St={class:"text-center"},Ct={class:"text-center"},It={class:"text-center"};function xt(e,t,a,o,n,i){const s=(0,l.up)("CommentPopup");return(0,l.wg)(),(0,l.iD)("div",null,[n.loading?((0,l.wg)(),(0,l.iD)("div",dt,[(0,l.Wm)(it.L,{color:"primary",indeterminate:""})])):(0,l.kq)("",!0),n.loading?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(c.K,{key:1},{default:(0,l.w5)((()=>[(0,l.Wm)(p.o,null,{default:(0,l.w5)((()=>[(0,l.Wm)(ke.Y,null,{default:(0,l.w5)((()=>[(0,l._)("thead",null,[(0,l._)("tr",null,[rt,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.$store.state.daysOfWeek,(e=>((0,l.wg)(),(0,l.iD)("th",{style:{"font-size":"13px"},class:"text-left",key:e},(0,z.zw)(e),1)))),128)),mt])]),(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(n.timeSheetList,((e,t)=>((0,l.wg)(),(0,l.iD)("tr",{key:t},[(0,l._)("td",null,[(0,l._)("div",ut,[(0,l._)("p",null,(0,z.zw)(e.projectName),1)])]),(0,l._)("td",ct,[(0,l.Wm)(s,{comment:e.mondayComment},{default:(0,l.w5)((()=>[(0,l._)("p",null,(0,z.zw)(i.checkAndGetValue(e.monday)),1)])),_:2},1032,["comment"])]),(0,l._)("td",pt,[(0,l.Wm)(s,{comment:e.tuesdayComment},{default:(0,l.w5)((()=>[(0,l._)("p",null,(0,z.zw)(i.checkAndGetValue(e.tuesday)),1)])),_:2},1032,["comment"])]),(0,l._)("td",ht,[(0,l.Wm)(s,{comment:e.wednesdayComment},{default:(0,l.w5)((()=>[(0,l._)("p",null,(0,z.zw)(i.checkAndGetValue(e.wednesday)),1)])),_:2},1032,["comment"])]),(0,l._)("td",wt,[(0,l.Wm)(s,{comment:e.thursdayComment},{default:(0,l.w5)((()=>[(0,l._)("p",null,(0,z.zw)(i.checkAndGetValue(e.thursday)),1)])),_:2},1032,["comment"])]),(0,l._)("td",ft,[(0,l.Wm)(s,{comment:e.fridayComment},{default:(0,l.w5)((()=>[(0,l._)("p",null,(0,z.zw)(i.checkAndGetValue(e.friday)),1)])),_:2},1032,["comment"])]),(0,l._)("td",gt,[(0,l.Wm)(s,{comment:e.satuardayComment},{default:(0,l.w5)((()=>[(0,l._)("p",null,(0,z.zw)(i.checkAndGetValue(e.satuarday)),1)])),_:2},1032,["comment"])]),(0,l._)("td",yt,[(0,l.Wm)(s,{comment:e.sundayComment},{default:(0,l.w5)((()=>[(0,l._)("p",null,(0,z.zw)(i.checkAndGetValue(e.sunday)),1)])),_:2},1032,["comment"])]),(0,l._)("td",_t,[(0,l._)("p",null,(0,z.zw)(e.total),1)])])))),128)),(0,l._)("tr",null,[kt,(0,l._)("td",Dt,(0,z.zw)(i.getTotalHoursOfDay("monday")),1),(0,l._)("td",vt,(0,z.zw)(i.getTotalHoursOfDay("tuesday")),1),(0,l._)("td",jt,(0,z.zw)(i.getTotalHoursOfDay("wednesday")),1),(0,l._)("td",Wt,(0,z.zw)(i.getTotalHoursOfDay("thursday")),1),(0,l._)("td",bt,(0,z.zw)(i.getTotalHoursOfDay("friday")),1),(0,l._)("td",St,(0,z.zw)(i.getTotalHoursOfDay("satuarday")),1),(0,l._)("td",Ct,(0,z.zw)(i.getTotalHoursOfDay("sunday")),1),(0,l._)("td",It,(0,z.zw)(i.getTotal),1)])])])),_:1})])),_:1})])),_:1}))])}const Vt={class:"d-flex flex-row align-center justify-center"};function Tt(e,t,a,o,n,i){return(0,l.wg)(),(0,l.iD)("div",null,[(0,l.Wm)(he._,{variant:"text"},{default:(0,l.w5)((()=>[(0,l._)("div",Vt,[(0,l.WI)(e.$slots,"default"),i.isCommentValid?((0,l.wg)(),(0,l.j4)(u.T,{key:0,variant:"text",icon:"mdi-comment",size:"small",onClick:i.onClickIcon},null,8,["onClick"])):(0,l.kq)("",!0)])])),_:3}),(0,l.Wm)(Je.B,{width:"500",modelValue:n.dialog,"onUpdate:modelValue":t[0]||(t[0]=e=>n.dialog=e)},{default:(0,l.w5)((()=>[(0,l.Wm)(he._,null,{default:(0,l.w5)((()=>[(0,l.Wm)(fe.Z,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,z.zw)(a.comment),1)])),_:1}),(0,l.Wm)(ge.h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(ye.C),(0,l.Wm)(u.T,{text:"Close",onClick:i.onClose},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}var Pt={data(){return{dialog:!1}},props:["comment"],computed:{isCommentValid(){return"null"!==this.comment&&""!==this.comment&&null!==this.comment}},methods:{onClickIcon(){this.dialog=!0},onClose(){this.dialog=!1}}};const Lt=(0,k.Z)(Pt,[["render",Tt]]);var Et=Lt,Nt={data(){return{selectValue:"",loading:!1,timeSheetList:[],sheetObj:this.timeSheetObj}},props:["timeSheetObj"],components:{CommentPopup:Et},watch:{timeSheetObj(e){this.sheetObj=e,this.getTimeSheetData()}},computed:{...(0,m.Se)(["getHeaders"]),getTotal(){const e=this.timeSheetList;let t=0;return e.forEach((e=>{t+=e.monday+e.tuesday+e.wednesday+e.thursday+e.friday+e.satuarday+e.sunday})),t.toFixed(1)}},methods:{getTotalHoursOfDay(e){const t=this.timeSheetList;let a=0;return t.forEach((t=>{a+=t[e]})),a.toFixed(1)},async getTimeSheetData(){this.loading=!0;const e=`${this.$store.state.backendDomainUrl}/timesheet/projects/${this.sheetObj.timeSheetId}`,t={method:"GET",...this.getHeaders};try{const a=await fetch(e,t);if(a.ok){const e=await a.json();this.timeSheetList=e}}catch(a){console.log(a)}this.loading=!1},checkAndGetValue(e){return 0===e?null:e}},mounted(){this.getTimeSheetData()}};const $t=(0,k.Z)(Nt,[["render",xt],["__scopeId","data-v-04b707b5"]]);var Ut=$t,Ot=a(4842);function Rt(e,t,a,o,n,i){return(0,l.wg)(),(0,l.j4)(Je.B,{modelValue:n.dialog,"onUpdate:modelValue":t[1]||(t[1]=e=>n.dialog=e),width:"500",persistent:""},{activator:(0,l.w5)((({props:e})=>[(0,l.Wm)(u.T,(0,l.dG)(e,{variant:"outlined",color:a.color,text:a.text,loading:a.loading}),null,16,["color","text","loading"])])),default:(0,l.w5)((({isActive:e})=>[(0,l.Wm)(he._,{title:`Comment for ${a.text}`},{default:(0,l.w5)((()=>[(0,l.Wm)(fe.Z,null,{default:(0,l.w5)((()=>[(0,l.Wm)(Ot.z,{name:"input-7-1",variant:"outlined","auto-grow":"",modelValue:n.comment,"onUpdate:modelValue":t[0]||(t[0]=e=>n.comment=e),rules:n.commentRules},null,8,["modelValue","rules"])])),_:1}),(0,l.Wm)(ge.h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(ye.C),(0,l.Wm)(u.T,{text:"Cancel",onClick:t=>e.value=!1},null,8,["onClick"]),(0,l.Wm)(u.T,{variant:"outlined",onClick:i.onClickActionButton,text:a.text,color:a.color,disabled:n.comment.length<1},null,8,["onClick","text","color","disabled"])])),_:2},1024)])),_:2},1032,["title"])])),_:1},8,["modelValue"])}var Mt={data(){return{dialog:!1,comment:"",commentRules:[e=>e.length>0||"Comment Required"]}},props:["color","text","loading"],methods:{async onClickActionButton(){"Approve"===this.text?this.$emit("onClickApprove",this.comment):"Deny"===this.text?this.$emit("onClickDeny",this.comment):"Re-open"===this.text&&this.$emit("onClickOpen",this.comment),this.dialog=!1}}};const Ht=(0,k.Z)(Mt,[["render",Rt]]);var At=Ht,zt=a(8914),qt=(a(3579),{data:()=>({dialog:!1,isLoading:!1,approveLoading:!1,denyLoading:!1,openLoading:!1}),computed:{...(0,m.rn)(["employeeId","employeeName","isAdmin"]),...(0,m.Se)(["getFormatedDateString"])},components:{NonEditableTable:Ut,AdminButton:At},props:["title","timeSheet"],methods:{onClickWeek(){this.$store.dispatch("updateSelectedWeek",this.timeSheet.week)},async onClickApprove(e){const{timeSheetId:t,employeeName:a,startDate:o,endDate:l,officialMail:n}=this.timeSheet;this.approveLoading=!0,await this.$store.dispatch("approveTimeSheet",this.timeSheet.timeSheetId),await this.$store.dispatch("sendEmailOnAction",{timeSheetId:t,employeeName:a,startDate:o,endDate:l,message:e,officialMail:n,action:"Approved"}),this.$emit("getTimeSheets"),this.dialog=!1,this.approveLoading=!1,this.dialog=!1},async onClickOpen(e){const{timeSheetId:t,employeeName:a,startDate:o,endDate:l,officialMail:n}=this.timeSheet;this.openLoading=!0,await this.$store.dispatch("openTimeSheet",this.timeSheet.timeSheetId),await this.$store.dispatch("sendEmailOnAction",{timeSheetId:t,employeeName:a,startDate:o,endDate:l,message:e,officialMail:n,action:"Re-Opened"}),this.$emit("getTimeSheets"),this.openLoading=!1,this.dialog=!1},async onClickDeny(e){const{timeSheetId:t,employeeName:a,startDate:o,endDate:l,officialMail:n}=this.timeSheet;this.denyLoading=!0,await this.$store.dispatch("denyTimeSheet",this.timeSheet.timeSheetId),await this.$store.dispatch("sendEmailOnAction",{timeSheetId:t,employeeName:a,startDate:o,endDate:l,message:e,officialMail:n,action:"Denied"}),this.$emit("getTimeSheets"),this.denyLoading=!1,this.dialog=!1},async downloadPDF(){const e=new zt["default"];e.text(`Employee ID : ${this.timeSheet.employeeId}`,10,10),e.text(`Employee Name : ${this.timeSheet.employeeName}`,10,20),e.text(`Period : ${this.getFormatedDateString(this.timeSheet.startDate)} - ${this.getFormatedDateString(this.timeSheet.endDate)}`,10,30);const t={method:"GET","Content-Type":"application/json"},a=await fetch(`${this.$store.state.backendDomainUrl}/timesheet/export/${this.timeSheet.timeSheetId}`,t);if(a.ok){const t=await a.json(),o=["Project Id","Project Name","Hours","Cost (Euros)"];let l=0,n=0;const i=t.map((e=>(l+=e.cost,n+=e.total,[e.projectId,e.projectName,e.total,e.cost])));i.push(["Total","",n,l]),e.autoTable({head:[o],body:i,startY:50}),e.save("weekly_timesheet_report.pdf"),this.$store.dispatch("showNotification","Pdf Downloading..")}}}});const Zt=(0,k.Z)(qt,[["render",nt],["__scopeId","data-v-070dd06e"]]);var Ft=Zt,Gt=a(7103);function Yt(e,t,a,o,n,i){return(0,l.wg)(),(0,l.iD)("div",null,[(0,l.Wm)(Gt.v,{class:"ma-2",color:i.colorName},{default:(0,l.w5)((()=>[(0,l.Uk)((0,z.zw)(i.statusName),1)])),_:1},8,["color"])])}var Bt={props:["status"],computed:{colorName(){return"open"===this.status?"blue":"submited"===this.status?"success":"approved"===this.status?"teal":"denied"===this.status?"red":""},statusName(){return"open"===this.status?"Open":"submited"===this.status?"Submitted":"approved"===this.status?"Approved":"denied"===this.status?"Denied":"invalid"}}};const Kt=(0,k.Z)(Bt,[["render",Yt]]);var Jt=Kt,Xt={name:"TimeSheet",data:()=>({dialog:!1,loading:!1,timeSheetId:"",employeeId:"",employeeName:"",logHours:"",status:"",statusOptions:[{title:"All",value:""},{title:"Open",value:"open"},{title:"Submited",value:"submited"},{title:"Approved",value:"approved"},{title:"Denied",value:"denied"}],dateRange:{startDate:new Date,endDate:new Date},timePeriodOptions:[{value:"month1",title:"Last 1 Month"},{value:"month3",title:"Last 3 Months"},{value:"month6",title:"Last 6 Months"},{value:"lastYear",title:"Previous Year"},{value:"currentYear",title:"Current Year"},{value:"customDate",title:"Custom Date"}],timePeriod:null,timeSheets:[{employeeId:1001,employeeName:"vinith kumar",week:"2023-W37",logHours:"40",status:"Pending"},{employeeId:1002,employeeName:"Rahul",week:"2023-W36",logHours:"39",status:"submited"}]}),components:{DateRange:Ke,WeekSheet:Ft,TimesheetStatus:Jt},watch:{timeSheetId(e){null===e&&(this.timeSheetId="")},employeeId(e){null===e&&(this.employeeId="")},employeeName(e){null===e&&(this.employeeName="")},logHours(e){null===e&&(this.logHours="")},status(e){null===e&&(this.filterStatus="")}},computed:{...(0,m.Se)(["getHeaders"])},methods:{async onupdateInput(){this.loading=!0,await this.getTimeSheets(),this.loading=!1},getStartAndEndDate(){const e=new Date;let t=null,a=e;switch(this.timePeriod){case"month1":t=(0,Re.Z)(e,30);break;case"month3":t=(0,Re.Z)(e,90);break;case"month6":t=(0,Re.Z)(e,180);break;case"lastYear":t=(0,Me.Z)(new Date(e.getFullYear(),0,1),1),a=(0,Me.Z)(new Date(e.getFullYear(),11,31),1);break;case"currentYear":t=new Date(e.getFullYear(),0,1);break;case"customDate":t=this.dateRange.startDate,a=this.dateRange.endDate;break;default:t=new Date(e.getFullYear(),0,1);break}return{startDate:(0,R.Z)(t,"yyyy-MM-dd"),endDate:(0,R.Z)(a,"yyyy-MM-dd")}},async getTimeSheets(){const{startDate:e,endDate:t}=this.getStartAndEndDate(),a=`${this.$store.state.backendDomainUrl}/timesheets?timesheet_id=${this.timeSheetId}&&employee_id=${this.employeeId}&&employee_name=${this.employeeName}&&log_hours=${this.logHours}&&start_date=${e}&&end_date=${t}&&status=${this.status}`,o={method:"GET",...this.getHeaders},l=await fetch(a,o);if(l.ok){const e=await l.json();this.timeSheets=e}},updateDateRange(e){this.dateRange=e},async exportMonthly(){const e=`${this.$store.state.backendDomainUrl}/timesheet/monthly_report/1001`,t={method:"GET",...this.getHeaders},a=await fetch(e,t);if(a.ok){const e=await a.json();this.downloadPDF(e)}},async downloadPDF(e){const t=new zt["default"],a=["Project Id","Project Name","Hours","Cost"];let o=0,l=0;const n=e.map((e=>(o+=e.cost,l+=e.total,[e.projectId,e.projectName,e.total,e.cost])));n.push(["Total","",l,o]),t.autoTable({head:[a],body:n,startY:50}),t.save("monthly_timesheet_report.pdf"),this.$store.dispatch("showNotification","Pdf Downloading..")}},mounted(){this.getTimeSheets()}};const Qt=(0,k.Z)(Xt,[["render",Oe],["__scopeId","data-v-31f41c5a"]]);var ea=Qt;const ta=e=>((0,l.dD)("data-v-55afeeec"),e=e(),(0,l.Cn)(),e),aa={class:"d-flex flex-row align-center"},oa={class:"d-flex flex-row align-center"},la=ta((()=>(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",{class:"text-left"}," Timesheet Id "),(0,l._)("th",{class:"text-left"}," Employee Id "),(0,l._)("th",{class:"text-left"}," employee Name "),(0,l._)("th",{class:"text-center"}," Week "),(0,l._)("th",{class:"text-center"}," Log Hours "),(0,l._)("th",{class:"text-center"}," Status ")])],-1))),na={class:"text-center"},ia={class:"text-center"},sa={key:0,class:"d-flex flex-row justify-center align-center"},da=ta((()=>(0,l._)("p",{class:"font-weight-medium"},"No Data Available",-1))),ra=[da];function ma(e,t,a,o,n,i){const s=(0,l.up)("DateRange"),d=(0,l.up)("WeekSheet"),r=(0,l.up)("TimesheetStatus");return(0,l.wg)(),(0,l.j4)(c.K,{fluid:"",class:"w-100 h-100"},{default:(0,l.w5)((()=>[(0,l.Wm)(he._,{width:"100%",height:"100%",variant:"elevated",elevation:"10",loading:e.loading},{default:(0,l.w5)((()=>[(0,l.Wm)(De.i,{dark:"",color:"#6a70eb",height:"50"},{default:(0,l.w5)((()=>[(0,l.Wm)(ve.q,null,{default:(0,l.w5)((()=>[(0,l.Uk)("Search TimeSheet")])),_:1})])),_:1}),(0,l.Wm)(we.E,null,{default:(0,l.w5)((()=>[(0,l.Wm)(p.o,{align:"end"},{default:(0,l.w5)((()=>[(0,l.Wm)(h.D,{cols:"12",md:"3"},{default:(0,l.w5)((()=>[(0,l._)("div",aa,[(0,l.Wm)(_e.rL,{items:e.timePeriodOptions,"item-title":"title","item-value":"value",density:"compact",label:"Select a Time Period","hide-details":"",modelValue:e.timePeriod,"onUpdate:modelValue":[t[0]||(t[0]=t=>e.timePeriod=t),i.onupdateInput]},null,8,["items","modelValue","onUpdate:modelValue"])])])),_:1}),(0,l.Wm)(h.D,{cols:"12",md:"3"},{default:(0,l.w5)((()=>[(0,l.Wm)(_e.rL,{items:e.statusOptions,"item-title":"title","item-value":"value",density:"compact",variant:"outlined",placeholder:"Status","hide-details":"",modelValue:e.status,"onUpdate:modelValue":[t[1]||(t[1]=t=>e.status=t),i.onupdateInput]},null,8,["items","modelValue","onUpdate:modelValue"])])),_:1}),"customDate"===e.timePeriod?((0,l.wg)(),(0,l.j4)(h.D,{key:0,cols:"12",md:"12"},{default:(0,l.w5)((()=>[(0,l._)("div",oa,[(0,l.Wm)(s,{onUpdateDateRange:i.updateDateRange},null,8,["onUpdateDateRange"]),(0,l.Wm)(u.T,{variant:"text",icon:"mdi mdi-magnify",class:"mt-7",onClick:i.onupdateInput},null,8,["onClick"])])])),_:1})):(0,l.kq)("",!0)])),_:1})])),_:1}),(0,l.Wm)(fe.Z,null,{default:(0,l.w5)((()=>[(0,l.Wm)(ke.Y,{density:"compact"},{default:(0,l.w5)((()=>[la,(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.timeSheets,(e=>((0,l.wg)(),(0,l.iD)("tr",{key:e.name},[(0,l._)("td",null,(0,z.zw)(e.timeSheetId),1),(0,l._)("td",null,(0,z.zw)(e.employeeId),1),(0,l._)("td",null,(0,z.zw)(e.employeeName),1),(0,l._)("td",null,[(0,l.Wm)(d,{title:e.week,timeSheet:e,onGetTimeSheets:i.getTimeSheets},null,8,["title","timeSheet","onGetTimeSheets"])]),(0,l._)("td",na,(0,z.zw)(e.logHours),1),(0,l._)("td",ia,[(0,l.Wm)(r,{status:e.status},null,8,["status"])])])))),128))])])),_:1})])),_:1}),0===e.timeSheets.length?((0,l.wg)(),(0,l.iD)("div",sa,ra)):(0,l.kq)("",!0),(0,l.Wm)(ge.h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(ye.C)])),_:1})])),_:1},8,["loading"])])),_:1})}var ua={name:"TimeSheet",data:()=>({dialog:!1,loading:!1,status:"",dateRange:{startDate:new Date,endDate:new Date},statusOptions:[{title:"All",value:""},{title:"Open",value:"open"},{title:"Submited",value:"submited"},{title:"Approved",value:"approved"},{title:"Denied",value:"denied"}],timePeriodOptions:[{value:"month1",title:"Last 1 Month"},{value:"month3",title:"Last 3 Months"},{value:"month6",title:"Last 6 Months"},{value:"lastYear",title:"Previous Year"},{value:"currentYear",title:"Current Year"},{value:"customDate",title:"Custom Date"}],timePeriod:null,timeSheets:[{timeSheetId:1,employeeId:1001,employeeName:"vinith kumar",week:"2023-W37",logHours:"40",status:"open"},{timeSheetId:2,employeeId:1002,employeeName:"Rahul",week:"2023-W36",logHours:"39",status:"submited"}]}),components:{DateRange:Ke,WeekSheet:Ft,TimesheetStatus:Jt},computed:{...(0,m.rn)(["employeeId"]),...(0,m.Se)(["getHeaders"])},methods:{onupdateInput(){this.getTimeSheets()},getStartAndEndDate(){const e=new Date;let t=null,a=e;switch(this.timePeriod){case"month1":t=(0,Re.Z)(e,30);break;case"month3":t=(0,Re.Z)(e,90);break;case"month6":t=(0,Re.Z)(e,180);break;case"lastYear":t=(0,Me.Z)(new Date(e.getFullYear(),0,1),1),a=(0,Me.Z)(new Date(e.getFullYear(),11,31),1);break;case"currentYear":t=new Date(e.getFullYear(),0,1);break;case"customDate":t=this.dateRange.startDate,a=this.dateRange.endDate;break;default:t=new Date(e.getFullYear(),0,1);break}return{startDate:(0,R.Z)(t,"yyyy-MM-dd"),endDate:(0,R.Z)(a,"yyyy-MM-dd")}},async getTimeSheets(){this.loading=!0;const{startDate:e,endDate:t}=this.getStartAndEndDate(),a=`${this.$store.state.backendDomainUrl}/timesheets?employee_id=${this.employeeId}&&start_date=${e}&&end_date=${t}&&status=${this.status}`,o={method:"GET",...this.getHeaders},l=await fetch(a,o);if(l.ok){const e=await l.json();this.timeSheets=e}this.loading=!1},updateDateRange(e){this.dateRange=e}},mounted(){this.getTimeSheets()}};const ca=(0,k.Z)(ua,[["render",ma],["__scopeId","data-v-55afeeec"]]);var pa=ca,ha={components:{EmployeeTimesheet:ea,SearchTimesheet:pa}};const wa=(0,k.Z)(ha,[["render",pe],["__scopeId","data-v-389003e8"]]);var fa=wa,ga=a(1222),ya=a(4846),_a=a(1275);const ka=e=>((0,l.dD)("data-v-01118048"),e=e(),(0,l.Cn)(),e),Da={class:"d-flex flex-row align-center"},va={key:0},ja={key:1},Wa={key:2},ba={class:"errorMsg text-subtitle-2"},Sa={class:"errorMsg"},Ca={class:"errorMsg"},Ia=ka((()=>(0,l._)("th",null," Employee Id ",-1))),xa=ka((()=>(0,l._)("th",null," Employee Name ",-1))),Va=ka((()=>(0,l._)("th",null," Email ",-1))),Ta=ka((()=>(0,l._)("th",null," Position ",-1)));function Pa(e,t,a,n,i,s){const d=(0,l.up)("DateRange");return(0,l.wg)(),(0,l.j4)(c.K,{fluid:"",class:"w-100",style:{height:"100vh"}},{default:(0,l.w5)((()=>[(0,l.Wm)(he._,{class:"overflow-y-auto",width:"100%",height:"100%",variant:"elevated",elevation:"10"},{default:(0,l.w5)((()=>[(0,l.Wm)(De.i,{dark:"",color:"#6a70eb",height:"50"},{default:(0,l.w5)((()=>[(0,l.Wm)(ve.q,null,{default:(0,l.w5)((()=>[(0,l.Uk)("Export Timesheet")])),_:1})])),_:1}),(0,l.Wm)(we.E,null,{default:(0,l.w5)((()=>[(0,l.Wm)(p.o,null,{default:(0,l.w5)((()=>[(0,l.Wm)(h.D,{cols:"12",md:"3"},{default:(0,l.w5)((()=>[(0,l._)("div",Da,[(0,l.Wm)(_e.rL,{items:i.timePeriodOptions,"item-title":"title","item-value":"value",density:"compact",variant:"outlined",placeholder:"Time Period","hide-details":"",modelValue:i.timePeriod,"onUpdate:modelValue":[t[0]||(t[0]=e=>i.timePeriod=e),s.onSelectTimePeriod]},null,8,["items","modelValue","onUpdate:modelValue"])])])),_:1}),(0,l.Wm)(h.D,{cols:"12",md:"3"},{default:(0,l.w5)((()=>["week"===i.timePeriod?((0,l.wg)(),(0,l.iD)("div",va,[(0,l.wy)((0,l._)("input",{type:"week",class:"week-calendar-input","onUpdate:modelValue":t[1]||(t[1]=e=>i.weekValue=e)},null,512),[[o.nr,i.weekValue]])])):(0,l.kq)("",!0),"month"===i.timePeriod?((0,l.wg)(),(0,l.iD)("div",ja,[(0,l.wy)((0,l._)("input",{type:"month",class:"week-calendar-input","onUpdate:modelValue":t[2]||(t[2]=e=>i.monthValue=e)},null,512),[[o.nr,i.monthValue]])])):(0,l.kq)("",!0),"custom"===i.timePeriod?((0,l.wg)(),(0,l.iD)("div",Wa,[(0,l.Wm)(d,{onUpdateDateRange:s.updateDateRange},null,8,["onUpdateDateRange"])])):(0,l.kq)("",!0)])),_:1})])),_:1}),(0,l.Wm)(p.o,null,{default:(0,l.w5)((()=>[(0,l.Wm)(h.D,{cols:"2"},{default:(0,l.w5)((()=>[(0,l._)("div",null,[(0,l.Wm)(_a.r,{modelValue:i.exportType,"onUpdate:modelValue":t[3]||(t[3]=e=>i.exportType=e),inline:""},{default:(0,l.w5)((()=>[(0,l.Wm)(ya.R,{label:"PDF",value:"pdf"}),(0,l.Wm)(ya.R,{label:"EXCEL",value:"excel"})])),_:1},8,["modelValue"])])])),_:1}),(0,l.Wm)(h.D,{cols:"2"},{default:(0,l.w5)((()=>[(0,l._)("div",null,[(0,l.Wm)(u.T,{color:"success",onClick:s.onClickExportButton,loading:i.exportLoading},{default:(0,l.w5)((()=>[(0,l.Uk)(" Export ")])),_:1},8,["onClick","loading"]),(0,l._)("p",ba,(0,z.zw)(i.emptyMsg),1)])])),_:1})])),_:1}),(0,l.Wm)(p.o,{justify:"end"},{default:(0,l.w5)((()=>[(0,l.Wm)(h.D,{cols:"12",md:"3"},{default:(0,l.w5)((()=>[(0,l._)("div",null,[(0,l.Wm)(G.h,{density:"compact",variant:"outlined",type:"number","hide-details":"",placeholder:"Search Employee Id",modelValue:i.searchEmployeeId,"onUpdate:modelValue":t[4]||(t[4]=e=>i.searchEmployeeId=e),onInput:s.onupdateinput},null,8,["modelValue","onInput"]),(0,l._)("p",Sa,(0,z.zw)(i.employeeIdMsg),1)])])),_:1}),(0,l.Wm)(h.D,{cols:"12",md:"3"},{default:(0,l.w5)((()=>[(0,l._)("div",null,[(0,l.Wm)(G.h,{density:"compact",variant:"outlined","hide-details":"",placeholder:"Search Employee Name",modelValue:i.searchEmployeeName,"onUpdate:modelValue":t[5]||(t[5]=e=>i.searchEmployeeName=e),onInput:s.onupdateinput},null,8,["modelValue","onInput"]),(0,l._)("p",Ca,(0,z.zw)(i.employeeIdMsg),1)])])),_:1})])),_:1})])),_:1}),(0,l.Wm)(ke.Y,{density:"compact"},{default:(0,l.w5)((()=>[(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",null,[(0,l.Wm)(ga.x,{modelValue:i.isSelectAll,"onUpdate:modelValue":[t[6]||(t[6]=e=>i.isSelectAll=e),s.onClickSelectAll],label:"All",color:"primary","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),Ia,xa,Va,Ta])]),(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(i.employeesList,(e=>((0,l.wg)(),(0,l.iD)("tr",{key:e},[(0,l._)("td",null,[(0,l.Wm)(ga.x,{modelValue:i.selectedEmployeeIds,"onUpdate:modelValue":t[7]||(t[7]=e=>i.selectedEmployeeIds=e),color:"primary",value:e.employeeId,"hide-details":""},null,8,["modelValue","value"])]),(0,l._)("td",null,(0,z.zw)(e.employeeId),1),(0,l._)("td",null,(0,z.zw)(e.employeeName),1),(0,l._)("td",null,(0,z.zw)(e.employeeEmail),1),(0,l._)("td",null,(0,z.zw)(e.positionName),1)])))),128))])])),_:1}),(0,l.Wm)(fe.Z),(0,l.Wm)(ge.h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(ye.C)])),_:1})])),_:1})])),_:1})}var La=a(7092),Ea={data(){return{weekValue:"",monthValue:"",timePeriod:null,exportLoading:!1,emptyMsg:"",employeeIdMsg:"",searchEmployeeId:"",searchEmployeeName:"",employeesList:[],exportType:null,timePeriodOptions:[{title:"Export By Week",value:"week"},{title:"Export By Month",value:"month"},{title:"Custom Date",value:"custom"}],selectedEmployeeIds:[],isSelectAll:!1,startDate:null,endDate:null}},components:{DateRange:Ke},computed:{...(0,m.Se)(["getEmployeeDetails","getFormatedDateString","getHeaders"])},watch:{selectedEmployeeIds(e){e.length!==this.employeesList.length?this.isSelectAll=!1:this.isSelectAll=!0}},methods:{onClickSelectAll(e){this.selectedEmployeeIds=e?this.employeesList.map((e=>e.employeeId)):[]},onSelectTimePeriod(e){this.timePeriod=e},onupdateinput(){this.getEmployees()},updateDateRange({startDate:e,endDate:t}){this.startDate=(0,R.Z)(e,"yyyy-MM-dd"),this.endDate=(0,R.Z)(t,"yyyy-MM-dd")},async onClickExportButton(){this.emptyMsg="",this.employeeIdMsg="",this.exportLoading=!0;let e=[];for(let t of this.selectedEmployeeIds){const a=await this.getEmployeeDetails(t);let o=[];"week"===this.timePeriod?o=await this.getWeekData(t):"month"===this.timePeriod?o=await this.getMonthData(t):"custom"===this.timePeriod&&(o=await this.getCustomDateData(t)),e.push({employeeData:a,data:o})}0!==e.length?"pdf"===this.exportType?this.downloadPDF(e):this.downloadExcel(e):this.emptyMsg="Select Atleast One",this.exportLoading=!1},async getWeekData(e){const t=`${this.$store.state.backendDomainUrl}/timesheet/employee/${e}/weekly_export/${this.weekValue}`,a={method:"GET",...this.getHeaders},o=await fetch(t,a);return o.ok?await o.json():[]},getPeriod(){if("week"===this.timePeriod){const[e,t]=this.weekValue,a=new Date(e,0,1),o=(0,U.Z)(a,{weekStartsOn:1}),l=(0,O.Z)(o,t),n=(0,M.Z)(l,6);return`${(0,R.Z)(l,"MMM dd")} - ${(0,R.Z)(n,"MMM dd")} (${this.weekValue})`}if("month"===this.timePeriod){const[e,t]=this.monthValue.split("-"),a=new Date(e,t-1,1);return(0,R.Z)(a,"LLL-yyyy")}return"custom"===this.timePeriod?`${this.getFormatedDateString(this.startDate)} - ${this.getFormatedDateString(this.endDate)}`:"-"},async getMonthData(e){const t=`${this.$store.state.backendDomainUrl}/timesheet/employee/${e}/monthly_export/${this.monthValue}`,a={method:"GET",...this.getHeaders},o=await fetch(t,a);if(o.ok){const e=await o.json();return e}return[]},async getCustomDateData(e){const t=`${this.$store.state.backendDomainUrl}/timesheet/employee/${e}/custom_export/?startDate=${this.startDate}&&endDate=${this.endDate}`,a={method:"GET",...this.getHeaders},o=await fetch(t,a);if(o.ok){const e=await o.json();return e}return[]},async downloadPDF(e){const t=new zt["default"];for(let a of e){const{employeeData:o,data:l}=a;t.text(`Employee ID : ${o.employeeId}`,10,10),t.text(`Employee Name : ${o.employeeName}`,10,20),t.text(`Position : ${o.position}`,10,30),t.text(`Period : ${this.getPeriod()}`,10,40);const n=["Project Id","Project Name","Type","Role","Hours","Rate","Cost","Currency","Customer","Cost Type"];let i=0,s=0;const d=l.map((e=>(i+="Billable"===e.projectType?e.total:0,s+="Non-Billable"===e.projectType?e.total:0,[e.projectId,e.projectName,e.projectType,e.positionName,e.total,e.rate,e.cost,e.currency,e.customerName,e.costType])));d.push([]),d.push(["Total","","Billable","",i,""]),d.push(["Total","","Non-Billable","",s,"",""]),t.autoTable({head:[n],body:d,startY:50}),e[e.length-1]!==a&&t.addPage()}"week"===this.timePeriod?t.save("weekly_report_report.pdf"):"month"===this.timePeriod?t.save("monthly_report.pdf"):"custom"===this.timePeriod&&t.save("custom_date_report.pdf"),this.$store.dispatch("showNotification","Pdf Downloading..")},downloadExcel(e){const t=La.P6.book_new();for(let a of e){const{employeeData:e,data:o}=a;let l=0,n=0;const i=o.map((e=>(l+="Billable"===e.projectType?e.total:0,n+="Non-Billable"===e.projectType?e.total:0,[e.projectId,e.projectName,e.projectType,e.positionName,e.total,e.rate,e.cost,e.currency,e.customerName,e.costType]))),s=[["Employee Id",e.employeeId],["Employee name",e.employeeName],["Position",e.position],["Period",this.getPeriod()],[],["Project Id","Project Name","Type","Role","Hours","Rate","Cost","Currency","Customer","Cost Type"],...i,[],["Total","","Billable","",l],["Total","","Non-Billable","",n]],d=La.P6.json_to_sheet(s);La.P6.book_append_sheet(t,d,e.employeeName)}"week"===this.timePeriod?(0,La.NC)(t,"weekly_timesheet_report.xlsx"):"month"===this.timePeriod?(0,La.NC)(t,"monthly_timesheet_report.xlsx"):"custom"===this.timePeriod&&(0,La.NC)(t,"custom_date_timesheet_report.xlsx")},async getEmployees(){this.loading=!0;const e=`${this.$store.state.backendDomainUrl}/employees?employeeId=${this.searchEmployeeId}&&employeeName=${this.searchEmployeeName}`,t={method:"GET",...this.getHeaders},a=await fetch(e,t);if(a.ok){const e=await a.json();this.employeesList=e,this.loading=!1}}},mounted(){this.getEmployees()}};const Na=(0,k.Z)(Ea,[["render",Pa],["__scopeId","data-v-01118048"]]);var $a=Na;const Ua={key:0,class:"d-flex flex-row align-center justify-center",style:{height:"200px",width:"100%",border:"1px solid red"}},Oa={class:"d-flex flex-row justify-space-between"},Ra={class:"text-h7"},Ma={style:{"font-size":"14px"}},Ha={class:"text-h9"},Aa={key:0};function za(e,t,a,o,n,i){const s=(0,l.up)("NonEditableTable"),d=(0,l.up)("AdminButton");return(0,l.wg)(),(0,l.j4)(c.K,{class:"w-100 h-100 d-flex flex-row justify-center align-start"},{default:(0,l.w5)((()=>[n.loading?((0,l.wg)(),(0,l.iD)("div",Ua)):(0,l.kq)("",!0),n.loading?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(he._,{key:1,width:"1024",variant:"elevated",elevation:"10",loading:n.loading},{default:(0,l.w5)((()=>[(0,l.Wm)(De.i,{dark:"",color:"#6a70eb",height:"50"},{default:(0,l.w5)((()=>[(0,l.Wm)(ve.q,null,{default:(0,l.w5)((()=>[(0,l.Uk)("Week TimeSheet")])),_:1})])),_:1}),(0,l.Wm)(we.E,null,{default:(0,l.w5)((()=>[(0,l._)("div",Oa,[(0,l._)("span",Ra,"TimeSheet ID : "+(0,z.zw)(e.$route.params.timeSheetId),1),(0,l._)("p",Ma,(0,z.zw)(e.getFormatedDateString(e.timeSheet.startDate))+" - "+(0,z.zw)(e.getFormatedDateString(e.timeSheet.endDate)),1),(0,l._)("span",Ha,"Employee ID: "+(0,z.zw)(e.timeSheet.employeeId),1)])])),_:1}),(0,l.Wm)(fe.Z,null,{default:(0,l.w5)((()=>[(0,l._)("div",null,[(0,l.Wm)(s,{timeSheetObj:e.timeSheet},null,8,["timeSheetObj"])])])),_:1}),(0,l.Wm)(ge.h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(ye.C),e.timeSheet.reportingManagerId!==e.employeeId&&!e.isAdmin||"submited"!==e.timeSheet.status?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",Aa,[(0,l.Wm)(d,{color:"warning",text:"Re-open",onOnClickOpen:i.onClickOpen,loading:n.openLoading},null,8,["onOnClickOpen","loading"]),(0,l.Wm)(d,{color:"red",text:"Deny",onOnClickDeny:i.onClickDeny,loading:n.denyLoading},null,8,["onOnClickDeny","loading"]),(0,l.Wm)(d,{color:"green",text:"Approve",onOnClickApprove:i.onClickApprove,loading:n.approveLoading},null,8,["onOnClickApprove","loading"])]))])),_:1})])),_:1},8,["loading"]))])),_:1})}var qa={data(){return{loading:!0,timesheet:{},openLoading:!1,denyLoading:!1,approveLoading:!1,submitLoading:!1}},components:{NonEditableTable:Ut,AdminButton:At},computed:{...(0,m.rn)(["isAdmin","employeeId"]),...(0,m.Se)(["getFormatedDateString","getHeaders"])},methods:{async getTimeSheet(){this.loading=!0;const e=`${this.$store.state.backendDomainUrl}/timesheet/${this.$route.params.timeSheetId}`,t={method:"GET",...this.getHeaders},a=await fetch(e,t);if(a.ok){const e=await a.json();console.log(e),this.timeSheet=e,this.loading=!1}},async onClickApprove(e){const{timeSheetId:t,employeeName:a,startDate:o,endDate:l,officialMail:n}=this.timeSheet;this.approveLoading=!0,await this.$store.dispatch("approveTimeSheet",this.timeSheet.timeSheetId),await this.$store.dispatch("sendEmailOnAction",{timeSheetId:t,employeeName:a,startDate:o,endDate:l,message:e,officialMail:n,action:"Approved"}),this.getTimeSheet(),this.approveLoading=!1},async onClickSubmit(){this.submitLoading=!0,await this.$store.dispatch("submitTimeSheet",this.timeSheet.timeSheetId),await this.$store.dispatch("sendEmail",{timeSheetId:this.timeSheet.timeSheetId,startDate:this.timeSheet.startDate,endDate:this.timeSheet.endDate}),this.getTimeSheet(),this.submitLoading=!1,this.dialog=!1},async onClickOpen(e){const{timeSheetId:t,employeeName:a,startDate:o,endDate:l,officialMail:n}=this.timeSheet;this.openLoading=!0,await this.$store.dispatch("openTimeSheet",this.timeSheet.timeSheetId),await this.$store.dispatch("sendEmailOnAction",{timeSheetId:t,employeeName:a,startDate:o,endDate:l,message:e,officialMail:n,action:"Re-Opened"}),this.getTimeSheet(),this.openLoading=!1,this.dialog=!1},async onClickDeny(e){const{timeSheetId:t,employeeName:a,startDate:o,endDate:l,officialMail:n}=this.timeSheet;this.denyLoading=!0,await this.$store.dispatch("denyTimeSheet",this.timeSheet.timeSheetId),await this.$store.dispatch("sendEmailOnAction",{timeSheetId:t,employeeName:a,startDate:o,endDate:l,message:e,officialMail:n,action:"Denied"}),this.getTimeSheet(),this.denyLoading=!1,this.dialog=!1}},async mounted(){await this.getTimeSheet(),this.$store.dispatch("updateSelectedWeek",this.timeSheet.week)}};const Za=(0,k.Z)(qa,[["render",za]]);var Fa=Za;const Ga={key:1,class:"d-flex flex-row justify-center"},Ya={key:0,style:{height:"400px",width:"100%"},class:"d-flex flex-row align-center justify-center"};function Ba(e,t,a,o,n,i){const s=(0,l.up)("NewEmployeePopup"),d=(0,l.up)("router-link"),r=(0,l.up)("DeleteButton");return(0,l.wg)(),(0,l.j4)(c.K,{fluid:"",class:"w-100",style:{height:"100vh"}},{default:(0,l.w5)((()=>[(0,l.Wm)(he._,{class:"h-100 overflow-y-auto",variant:"elevated",elevation:"10"},{default:(0,l.w5)((()=>[(0,l.Wm)(De.i,{dark:"",color:"#6a70eb",height:"50"},{default:(0,l.w5)((()=>[(0,l.Wm)(ve.q,null,{default:(0,l.w5)((()=>[(0,l.Uk)("Employee TimeSheet")])),_:1})])),_:1}),(0,l.Wm)(we.E,null,{default:(0,l.w5)((()=>[(0,l.Wm)(p.o,null,{default:(0,l.w5)((()=>[(0,l.Wm)(h.D,{cols:"12",md:"3"},{default:(0,l.w5)((()=>[(0,l.Wm)(G.h,{loading:n.loading,density:"compact",variant:"outlined","hide-details":"",placeholder:"Search Employee Id",modelValue:n.employeeId,"onUpdate:modelValue":t[0]||(t[0]=e=>n.employeeId=e),onInput:i.onupdateInput},null,8,["loading","modelValue","onInput"])])),_:1}),(0,l.Wm)(h.D,{cols:"12",md:"3"},{default:(0,l.w5)((()=>[(0,l.Wm)(G.h,{loading:n.loading,density:"compact",variant:"outlined","hide-details":"",placeholder:"Search Name",modelValue:n.employeeName,"onUpdate:modelValue":t[1]||(t[1]=e=>n.employeeName=e),onInput:i.onupdateInput},null,8,["loading","modelValue","onInput"])])),_:1})])),_:1}),(0,l.Wm)(p.o,null,{default:(0,l.w5)((()=>[(0,l.Wm)(s,{onGetEmployees:i.getEmployees},null,8,["onGetEmployees"])])),_:1})])),_:1}),(0,l.Wm)(fe.Z,null,{default:(0,l.w5)((()=>[n.loading?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(b.i,{key:0},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(n.employeesList,(e=>((0,l.wg)(),(0,l.j4)(W.l,{key:e.employeeId,title:`${e.employeeId} - ${e.employeeName}`,subtitle:`Position : ${e.positionName}`,elevation:"4",lines:"three",variant:"elevated",class:"mb-2",rounded:!0},{default:(0,l.w5)((()=>[(0,l.Wm)(p.o,{justify:"end"},{default:(0,l.w5)((()=>[(0,l.Wm)(h.D,{cols:"2"},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{to:`project_assignment/${e.employeeId}`},{default:(0,l.w5)((()=>[(0,l.Wm)(u.T,{color:"primary"},{default:(0,l.w5)((()=>[(0,l.Uk)("Assign Projects")])),_:1})])),_:2},1032,["to"])])),_:2},1024),(0,l.Wm)(h.D,{cols:"2"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{onOnRemove:i.deleteEmployee,id:e.employeeId,text:"employee"},{default:(0,l.w5)((({onOpenDialog:e})=>[(0,l.Wm)(u.T,{color:"#ab1e02",onClick:e},{default:(0,l.w5)((()=>[(0,l.Uk)("DELETE EMPLOYEE")])),_:2},1032,["onClick"])])),_:2},1032,["onOnRemove","id"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["title","subtitle"])))),128))])),_:1})),0===n.employeesList.length?((0,l.wg)(),(0,l.iD)("div",Ga," No Data Found ")):(0,l.kq)("",!0)])),_:1}),n.loading?((0,l.wg)(),(0,l.iD)("div",Ya,[(0,l.Wm)(it.L,{indeterminate:"",color:"primary"})])):(0,l.kq)("",!0)])),_:1})])),_:1})}function Ka(e,t,a,o,n,i){return(0,l.wg)(),(0,l.j4)(c.K,null,{default:(0,l.w5)((()=>[(0,l.Wm)(Je.B,{modelValue:n.dialog,"onUpdate:modelValue":t[11]||(t[11]=e=>n.dialog=e),persistent:"",width:"1024"},{activator:(0,l.w5)((({props:e})=>[(0,l.Wm)(u.T,(0,l.dG)({variant:"outlined","prepend-icon":"mdi-plus",color:"primary"},e),{default:(0,l.w5)((()=>[(0,l.Uk)(" New ")])),_:2},1040)])),default:(0,l.w5)((()=>[(0,l.Wm)(he._,null,{default:(0,l.w5)((()=>[(0,l.Wm)(we.E,null,{default:(0,l.w5)((()=>[(0,l.Uk)(" Add Employee ")])),_:1}),(0,l.Wm)(fe.Z,null,{default:(0,l.w5)((()=>[(0,l.Wm)(q.O,{modelValue:n.form,"onUpdate:modelValue":t[9]||(t[9]=e=>n.form=e)},{default:(0,l.w5)((()=>[(0,l.Wm)(p.o,{align:"center"},{default:(0,l.w5)((()=>[(0,l.Wm)(h.D,{cols:"4"},{default:(0,l.w5)((()=>[(0,l.Wm)(G.h,{density:"compact",variant:"outlined",label:"Employee Name",rules:[n.rules.required],placeholder:"Employee Name",modelValue:n.employeeName,"onUpdate:modelValue":t[0]||(t[0]=e=>n.employeeName=e)},null,8,["rules","modelValue"])])),_:1}),(0,l.Wm)(h.D,{cols:"4"},{default:(0,l.w5)((()=>[(0,l.Wm)(G.h,{density:"compact",variant:"outlined",label:"Contact Number",type:"number",rules:[n.rules.required],placeholder:"Contact Number",modelValue:n.contactNumber,"onUpdate:modelValue":t[1]||(t[1]=e=>n.contactNumber=e)},null,8,["rules","modelValue"])])),_:1})])),_:1}),(0,l.Wm)(p.o,null,{default:(0,l.w5)((()=>[(0,l.Wm)(h.D,{cols:"4"},{default:(0,l.w5)((()=>[(0,l.Wm)(G.h,{density:"compact",variant:"outlined",label:"Personal Main Id",rules:[n.rules.required,n.rules.email],placeholder:"Personal Mail Id",modelValue:n.personalMail,"onUpdate:modelValue":t[2]||(t[2]=e=>n.personalMail=e)},null,8,["rules","modelValue"])])),_:1}),(0,l.Wm)(h.D,{cols:"4"},{default:(0,l.w5)((()=>[(0,l.Wm)(G.h,{density:"compact",variant:"outlined",label:"Official Mail Id",rules:[n.rules.required,n.rules.email],placeholder:"Official Mail Id",modelValue:n.officialMail,"onUpdate:modelValue":t[3]||(t[3]=e=>n.officialMail=e)},null,8,["rules","modelValue"])])),_:1})])),_:1}),(0,l.Wm)(p.o,null,{default:(0,l.w5)((()=>[(0,l.Wm)(h.D,{cols:"4"},{default:(0,l.w5)((()=>[(0,l.Wm)(G.h,{density:"compact",variant:"outlined",rules:[n.rules.required],placeholder:"Date Of Joining",label:"Date of Joining",modelValue:n.doj,"onUpdate:modelValue":t[4]||(t[4]=e=>n.doj=e),type:"date"},null,8,["rules","modelValue"])])),_:1}),(0,l.Wm)(h.D,{cols:"4"},{default:(0,l.w5)((()=>[(0,l.Wm)(_e.rL,{density:"compact",variant:"outlined",label:"Reporting Manger",items:n.employeesList,"item-value":"employeeId","item-title":"employeeName",rules:[n.rules.required],placeholder:"Reporting Manager",modelValue:n.reportingManagerId,"onUpdate:modelValue":t[5]||(t[5]=e=>n.reportingManagerId=e)},null,8,["items","rules","modelValue"])])),_:1})])),_:1}),(0,l.Wm)(p.o,null,{default:(0,l.w5)((()=>[(0,l.Wm)(h.D,{cols:"4"},{default:(0,l.w5)((()=>[(0,l.Wm)(_e.rL,{density:"compact",variant:"outlined",items:n.positionsList,"item-value":"positionId","item-title":"positionName",rules:[n.rules.required],placeholder:"Designation",modelValue:n.positionId,"onUpdate:modelValue":t[6]||(t[6]=e=>n.positionId=e)},null,8,["items","rules","modelValue"])])),_:1}),(0,l.Wm)(h.D,{cols:"4"},{default:(0,l.w5)((()=>[(0,l.Wm)(_e.rL,{density:"compact",variant:"outlined",items:n.departmentsList,"item-value":"departmentId","item-title":"departmentName",rules:[n.rules.required],placeholder:"Department",modelValue:n.departmentId,"onUpdate:modelValue":t[7]||(t[7]=e=>n.departmentId=e)},null,8,["items","rules","modelValue"])])),_:1})])),_:1}),(0,l.Wm)(p.o,null,{default:(0,l.w5)((()=>[(0,l.Wm)(h.D,{cols:"8"},{default:(0,l.w5)((()=>[(0,l.Wm)(Ot.z,{density:"compact",variant:"outlined",label:"Address",placeholder:"Address",modelValue:n.address,"onUpdate:modelValue":t[8]||(t[8]=e=>n.address=e),rules:[n.rules.required]},null,8,["modelValue","rules"])])),_:1})])),_:1}),(0,l.Wm)(p.o)])),_:1},8,["modelValue"])])),_:1}),(0,l.Wm)(ge.h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(ye.C),(0,l.Wm)(u.T,{color:"blue-darken-1",variant:"text",onClick:t[10]||(t[10]=e=>n.dialog=!1)},{default:(0,l.w5)((()=>[(0,l.Uk)(" Cancel ")])),_:1}),(0,l.Wm)(u.T,{disabled:!n.form,color:"primary",variant:"outlined",onClick:i.onAddEmployee,loading:n.addLoading},{default:(0,l.w5)((()=>[(0,l.Uk)(" Add ")])),_:1},8,["disabled","onClick","loading"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}var Ja={data(){return{dialog:!1,form:!1,employeeName:null,contactNumber:null,personalMail:null,officialMail:null,doj:null,address:null,positionId:null,positionsList:[],departmentId:null,departmentsList:[],reportingManagerId:null,employeesList:[],addLoading:!1,rules:{required(e){return null!==e&&""!==e||"Required"},email(e){return!(!e.includes("@")||!e.includes(".com"))||"Invalid Email Address"}}}},computed:{...(0,m.Se)(["getHeaders"])},methods:{async onAddEmployee(){this.addLoading=!0;const e=`${this.$store.state.backendDomainUrl}/employee/create/`,t={employeeName:this.employeeName,contactNumber:this.contactNumber,personalMail:this.personalMail,officialMail:this.officialMail,doj:this.doj,positionId:this.positionId,positionsList:[],departmentId:this.departmentId,address:this.address,reportingManagerId:this.reportingManagerId},a={method:"POST",...this.getHeaders,body:JSON.stringify(t)},o=await fetch(e,a);if(o.ok){const e=await o.json();console.log(`new employee id : ${e.employeeId}`),this.addLoading=!1,this.dialog=!1,this.employeeName=null,this.contactNumber=null,this.email=null,this.doj=null,this.designation=null,this.department=null,this.address=null,this.$emit("getEmployees")}},async getEmployeesList(){const e=`${this.$store.state.backendDomainUrl}/employees/`,t={method:"GET",...this.getHeaders},a=await fetch(e,t);if(a.ok){const e=await a.json();this.employeesList=e}},async getPositionsList(){const e=`${this.$store.state.backendDomainUrl}/positions`,t={method:"GET",...this.getHeaders},a=await fetch(e,t);if(a.ok){const e=await a.json();this.positionsList=e}},async getDepartementsList(){const e=`${this.$store.state.backendDomainUrl}/departments`,t={method:"GET",...this.getHeaders},a=await fetch(e,t);if(a.ok){const e=await a.json();this.departmentsList=e}}},created(){this.getEmployeesList(),this.getPositionsList(),this.getDepartementsList()}};const Xa=(0,k.Z)(Ja,[["render",Ka]]);var Qa=Xa;function eo(e,t,a,o,n,i){return(0,l.wg)(),(0,l.iD)("div",null,[(0,l.WI)(e.$slots,"default",{onOpenDialog:i.onOpenDialog}),(0,l.Wm)(Je.B,{modelValue:n.dialog,"onUpdate:modelValue":t[0]||(t[0]=e=>n.dialog=e),width:"300px",persistent:""},{default:(0,l.w5)((()=>[(0,l.Wm)(he._,null,{default:(0,l.w5)((()=>[(0,l.Wm)(fe.Z,null,{default:(0,l.w5)((()=>[(0,l.Uk)(" Are you sure want to remove "+(0,z.zw)(a.text),1)])),_:1}),(0,l.Wm)(ge.h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(ye.C),(0,l.Wm)(u.T,{text:"Remove",color:"red",onClick:i.onClickRemove},null,8,["onClick"]),(0,l.Wm)(u.T,{text:"Cancel",onClick:i.onCloseDialog},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}var to={data(){return{dialog:!1}},props:["id","text"],methods:{onOpenDialog(){this.dialog=!0},onCloseDialog(){this.dialog=!1},onClickRemove(){this.dialog=!1,this.$emit("onRemove",this.id)}}};const ao=(0,k.Z)(to,[["render",eo]]);var oo=ao,lo={data(){return{loading:!0,employeeId:"",employeeName:"",employeesList:[]}},components:{NewEmployeePopup:Qa,DeleteButton:oo},computed:{...(0,m.Se)(["getHeaders"])},methods:{onupdateInput(){this.getEmployees()},async getEmployees(){this.loading=!0;const e=`${this.$store.state.backendDomainUrl}/employees?employeeId=${this.employeeId}&&employeeName=${this.employeeName}`,t={method:"GET",...this.getHeaders},a=await fetch(e,t);if(a.ok){const e=await a.json();this.employeesList=e,this.loading=!1,console.log(e)}},async deleteEmployee(e){const t=`${this.$store.state.backendDomainUrl}/employee/delete/${e}`,a={method:"DELETE",...this.getHeaders},o=await fetch(t,a);o.ok&&this.getEmployees()}},mounted(){this.getEmployees()}};const no=(0,k.Z)(lo,[["render",Ba]]);var io=no;const so={class:"d-flex flex-row align-center"},ro=(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",null," Project Id "),(0,l._)("th",null," Project Name "),(0,l._)("th",null," Type "),(0,l._)("th",{class:"text-center"}," Start Date "),(0,l._)("th",{class:"text-center"}," End Date "),(0,l._)("th",{class:"text-center"}," Description "),(0,l._)("th",null," Customer "),(0,l._)("th",{class:"text-center"}," Cost ")])],-1),mo={class:"text-center"},uo={class:"text-center"},co={class:"d-flex flex-row aling-center"},po={key:0},ho={key:0,style:{"font-size":"12px"}},wo={key:0,class:"d-flex flex-row justify-center align-center"},fo=(0,l._)("p",{class:"font-weight-medium"},"No Data Available",-1),go=[fo];function yo(e,t,a,o,n,i){const s=(0,l.up)("NewProjectPopup"),d=(0,l.up)("CommentPopup"),r=(0,l.up)("DeleteButton");return(0,l.wg)(),(0,l.j4)(c.K,{fluid:"",class:"w-100 h-100"},{default:(0,l.w5)((()=>[(0,l.Wm)(he._,{width:"100%",height:"100%",variant:"elevated",elevation:"10",loading:n.searchLoading},{default:(0,l.w5)((()=>[(0,l.Wm)(De.i,{dark:"",color:"#6a70eb",height:"50"},{default:(0,l.w5)((()=>[(0,l.Wm)(ve.q,null,{default:(0,l.w5)((()=>[(0,l.Uk)("Projects")])),_:1})])),_:1}),(0,l.Wm)(we.E,null,{default:(0,l.w5)((()=>[(0,l.Wm)(p.o,{justify:"space-between",align:"center"},{default:(0,l.w5)((()=>[(0,l.Wm)(h.D,{cols:"12",md:"6"},{default:(0,l.w5)((()=>[(0,l._)("div",so,[(0,l.Wm)(s,{onGetProjectsList:i.getProjectsList},null,8,["onGetProjectsList"])])])),_:1}),(0,l.Wm)(h.D,{cols:"3"},{default:(0,l.w5)((()=>[(0,l._)("div",null,[(0,l.Wm)(G.h,{loading:n.searchLoading,density:"compact",variant:"outlined","prepend-icon":"mdi-filter","hide-details":"",placeholder:"Search Project Name",modelValue:n.searchProjectName,"onUpdate:modelValue":t[0]||(t[0]=e=>n.searchProjectName=e),onInput:i.onupdateInput},null,8,["loading","modelValue","onInput"])])])),_:1})])),_:1})])),_:1}),(0,l.Wm)(fe.Z,null,{default:(0,l.w5)((()=>[(0,l.Wm)(ke.Y,{density:"compact"},{default:(0,l.w5)((()=>[ro,(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(n.projectsList,(t=>((0,l.wg)(),(0,l.iD)("tr",{key:t},[(0,l._)("td",null,(0,z.zw)(t.projectId),1),(0,l._)("td",null,(0,z.zw)(t.projectName),1),(0,l._)("td",null,(0,z.zw)(t.projectType),1),(0,l._)("td",mo,(0,z.zw)(e.getFormatedDateString(t.startDate)),1),(0,l._)("td",uo,(0,z.zw)(e.getFormatedDateString(t.endDate)),1),(0,l._)("td",null,[(0,l.Wm)(d,{comment:t.description},null,8,["comment"])]),(0,l._)("td",null,(0,z.zw)(t.customer),1),(0,l._)("td",null,[(0,l._)("div",null,[(0,l._)("div",co,[(0,l.Uk)((0,z.zw)(t.cost),1),null!==t.cost?((0,l.wg)(),(0,l.iD)("p",po,"("+(0,z.zw)(t.currency)+")",1)):(0,l.kq)("",!0)]),"Billable"===t.projectType&&"Time & Material"===t.costType?((0,l.wg)(),(0,l.iD)("div",ho,"Time & Material")):(0,l.kq)("",!0)])]),(0,l._)("td",null,[(0,l.Wm)(r,{onOnRemove:i.onRemove,id:t.projectId,text:"project"},{default:(0,l.w5)((({onOpenDialog:e})=>[(0,l.Wm)(u.T,{icon:"mdi-delete",variant:"text",color:"#a11a1a",onClick:e},null,8,["onClick"])])),_:2},1032,["onOnRemove","id"])])])))),128))])])),_:1})])),_:1}),0===n.projectsList.length?((0,l.wg)(),(0,l.iD)("div",wo,go)):(0,l.kq)("",!0),(0,l.Wm)(ge.h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(ye.C)])),_:1})])),_:1},8,["loading"])])),_:1})}function _o(e,t,a,o,n,i){const s=(0,l.up)("DateRange");return(0,l.wg)(),(0,l.j4)(c.K,null,{default:(0,l.w5)((()=>[(0,l.Wm)(Je.B,{modelValue:n.dialog,"onUpdate:modelValue":t[9]||(t[9]=e=>n.dialog=e),persistent:"",width:"1024"},{activator:(0,l.w5)((({props:e})=>[(0,l.Wm)(u.T,(0,l.dG)({variant:"outlined","prepend-icon":"mdi-plus",color:"primary"},e),{default:(0,l.w5)((()=>[(0,l.Uk)(" New ")])),_:2},1040)])),default:(0,l.w5)((()=>[(0,l.Wm)(he._,null,{default:(0,l.w5)((()=>[(0,l.Wm)(we.E,null,{default:(0,l.w5)((()=>[(0,l.Uk)(" Add Project ")])),_:1}),(0,l.Wm)(fe.Z,null,{default:(0,l.w5)((()=>[(0,l.Wm)(q.O,{modelValue:n.form,"onUpdate:modelValue":t[7]||(t[7]=e=>n.form=e)},{default:(0,l.w5)((()=>[(0,l.Wm)(p.o,{align:"center"},{default:(0,l.w5)((()=>[(0,l.Wm)(h.D,{cols:"4"},{default:(0,l.w5)((()=>[(0,l.Wm)(G.h,{density:"compact",variant:"outlined",rules:n.projectNameRules,placeholder:"Select Project Name",modelValue:n.projectName,"onUpdate:modelValue":t[0]||(t[0]=e=>n.projectName=e)},null,8,["rules","modelValue"])])),_:1}),(0,l.Wm)(h.D,{cols:"4"},{default:(0,l.w5)((()=>[(0,l.Wm)(_e.rL,{density:"compact",variant:"outlined",rules:n.projectTypeRules,placeholder:"Project Type",modelValue:n.projectType,"onUpdate:modelValue":t[1]||(t[1]=e=>n.projectType=e),items:["Billable","Non-Billable"]},null,8,["rules","modelValue"])])),_:1})])),_:1}),"Billable"===n.projectType?((0,l.wg)(),(0,l.j4)(p.o,{key:0},{default:(0,l.w5)((()=>[(0,l.Wm)(h.D,{cols:"3"},{default:(0,l.w5)((()=>[(0,l.Wm)(_e.rL,{density:"compact",variant:"outlined",items:n.customersList,"item-title":"name","item-value":"customerId",placeholder:"Customers",modelValue:n.customerId,"onUpdate:modelValue":t[2]||(t[2]=e=>n.customerId=e)},null,8,["items","modelValue"])])),_:1}),(0,l.Wm)(h.D,{cols:"3"},{default:(0,l.w5)((()=>[(0,l.Wm)(_e.rL,{density:"compact",variant:"outlined",items:["Fixed Cost","Time & Material"],"item-title":"name","item-value":"customerId",placeholder:"Cost Type",modelValue:n.costType,"onUpdate:modelValue":t[3]||(t[3]=e=>n.costType=e)},null,8,["modelValue"])])),_:1}),"Fixed Cost"===n.costType?((0,l.wg)(),(0,l.j4)(h.D,{key:0,cols:"3"},{default:(0,l.w5)((()=>[(0,l.Wm)(G.h,{density:"compact",variant:"outlined",type:"number",rules:n.projectNameRules,placeholder:"cost",modelValue:n.cost,"onUpdate:modelValue":t[4]||(t[4]=e=>n.cost=e)},null,8,["rules","modelValue"])])),_:1})):(0,l.kq)("",!0),"Fixed Cost"===n.costType?((0,l.wg)(),(0,l.j4)(h.D,{key:1,cols:"3"},{default:(0,l.w5)((()=>[(0,l.Wm)(_e.rL,{density:"compact",variant:"outlined",rules:n.projectTypeRules,placeholder:"Currency",modelValue:n.currency,"onUpdate:modelValue":t[5]||(t[5]=e=>n.currency=e),items:["USD","Euro","INR","CHF"]},null,8,["rules","modelValue"])])),_:1})):(0,l.kq)("",!0)])),_:1})):(0,l.kq)("",!0),(0,l.Wm)(p.o,null,{default:(0,l.w5)((()=>[(0,l.Wm)(h.D,{cols:"8"},{default:(0,l.w5)((()=>[(0,l.Wm)(Ot.z,{density:"compact",variant:"outlined",label:"Description",placeholder:"Description",modelValue:n.description,"onUpdate:modelValue":t[6]||(t[6]=e=>n.description=e),rules:n.projectNameRules},null,8,["modelValue","rules"])])),_:1})])),_:1}),(0,l.Wm)(p.o,null,{default:(0,l.w5)((()=>[(0,l.Wm)(h.D,{cols:"8"},{default:(0,l.w5)((()=>[(0,l.Wm)(s,{onUpdateDateRange:i.updateDateRange},null,8,["onUpdateDateRange"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,l.Wm)(ge.h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(ye.C),(0,l.Wm)(u.T,{color:"blue-darken-1",variant:"text",onClick:t[8]||(t[8]=e=>n.dialog=!1)},{default:(0,l.w5)((()=>[(0,l.Uk)(" Cancel ")])),_:1}),(0,l.Wm)(u.T,{disabled:!n.form,color:"primary",variant:"outlined",onClick:i.onAddProject,loading:n.addLoading},{default:(0,l.w5)((()=>[(0,l.Uk)(" Add ")])),_:1},8,["disabled","onClick","loading"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}var ko={data(){return{dialog:!1,form:!1,projectName:null,addLoading:!1,projectNameRules:[e=>null!==e&&""!==e||"Required"],projectType:null,projectTypeRules:[e=>null!==e&&""!==e||"Required"],costType:null,customerId:null,customersList:[],cost:null,currency:null,description:null,startDate:null,endDate:null}},components:{DateRange:Ke},computed:{...(0,m.Se)(["getHeaders"])},methods:{updateDateRange({startDate:e,endDate:t}){this.startDate=(0,R.Z)(e,"yyyy-MM-dd"),this.endDate=(0,R.Z)(t,"yyyy-MM-dd")},async onAddProject(){this.addLoading=!0;const e=`${this.$store.state.backendDomainUrl}/project/create/`,t={projectName:this.projectName,projectType:this.projectType,customerId:"Billable"===this.projectType?this.customerId:null,costType:"Billable"===this.projectType?this.costType:null,cost:"Fixed Cost"===this.costType&&"Non-Billable"!==this.projectType?this.cost:null,currency:"Fixed Cost"===this.costType&&"Non-Billable"!==this.projectType?this.currency:null,description:this.description,startDate:this.startDate,endDate:this.endDate},a={method:"POST",...this.getHeaders,body:JSON.stringify(t)},o=await fetch(e,a);if(o.ok){const e=await o.json();console.log(`new project id : ${e.projectId}`),this.addLoading=!1,this.dialog=!1,this.projectName=null,this.projectType=null,this.customerId=null,this.cost=null,this.currency=null,this.description=null,this.startDate=null,this.endDate=null,this.$emit("getProjectsList")}},async getCustomersList(){const e=`${this.$store.state.backendDomainUrl}/customers/`,t={method:"GET",...this.getHeaders},a=await fetch(e,t);if(a.ok){const e=await a.json();this.customersList=e}}},created(){this.getCustomersList()}};const Do=(0,k.Z)(ko,[["render",_o]]);var vo=Do,jo={data(){return{searchProjectName:"",searchLoading:!1,projectsList:""}},components:{CommentPopup:Et,DeleteButton:oo,NewProjectPopup:vo},computed:{...(0,m.Se)(["getFormatedDateString","getHeaders"])},methods:{onupdateInput(){this.getProjectsList()},async getProjectsList(){this.searchLoading=!0;const e=`${this.$store.state.backendDomainUrl}/projects?projectName=${this.searchProjectName}`,t={method:"GET",...this.getHeaders},a=await fetch(e,t);if(a.ok){const e=await a.json();this.projectsList=e,this.searchLoading=!1}},async onRemove(e){console.log("project delete"),console.log(e);const t=`${this.$store.state.backendDomainUrl}/project/delete/${e}`,a={method:"DELETE",...this.getHeaders},o=await fetch(t,a);if(o.ok){const e=await o.json();console.log(e.message),this.getProjectsList()}}},mounted(){this.getProjectsList()}};const Wo=(0,k.Z)(jo,[["render",yo]]);var bo=Wo;const So={class:"d-flex flex-row align-center"},Co=(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",null," Id "),(0,l._)("th",null," Name "),(0,l._)("th",null," Email "),(0,l._)("th",null," Contact Person "),(0,l._)("th",null," Contact No "),(0,l._)("th",{class:"text-center"}," Address ")])],-1),Io={key:0,class:"d-flex flex-row justify-center align-center"},xo=(0,l._)("p",{class:"font-weight-medium"},"No Data Available",-1),Vo=[xo];function To(e,t,a,o,n,i){const s=(0,l.up)("NewCustomerPopup"),d=(0,l.up)("CommentPopup"),r=(0,l.up)("DeleteButton");return(0,l.wg)(),(0,l.j4)(c.K,{fluid:"",class:"w-100 h-100"},{default:(0,l.w5)((()=>[(0,l.Wm)(he._,{width:"100%",height:"100%",variant:"elevated",elevation:"10",loading:n.searchLoading},{default:(0,l.w5)((()=>[(0,l.Wm)(De.i,{dark:"",color:"#6a70eb",height:"50"},{default:(0,l.w5)((()=>[(0,l.Wm)(ve.q,null,{default:(0,l.w5)((()=>[(0,l.Uk)("Customers")])),_:1})])),_:1}),(0,l.Wm)(we.E,null,{default:(0,l.w5)((()=>[(0,l.Wm)(p.o,{justify:"space-between",align:"center"},{default:(0,l.w5)((()=>[(0,l.Wm)(h.D,{cols:"12",md:"6"},{default:(0,l.w5)((()=>[(0,l._)("div",So,[(0,l.Wm)(s,{onGetCustomersList:i.getCustomersList},null,8,["onGetCustomersList"])])])),_:1}),(0,l.Wm)(h.D,{cols:"3"},{default:(0,l.w5)((()=>[(0,l._)("div",null,[(0,l.Wm)(G.h,{loading:n.searchLoading,density:"compact",variant:"outlined","prepend-icon":"mdi-filter","hide-details":"",placeholder:"Search Customer",modelValue:n.searchCustomer,"onUpdate:modelValue":t[0]||(t[0]=e=>n.searchCustomer=e),onInput:i.onupdateInput},null,8,["loading","modelValue","onInput"])])])),_:1})])),_:1})])),_:1}),(0,l.Wm)(fe.Z,null,{default:(0,l.w5)((()=>[(0,l.Wm)(ke.Y,{density:"compact"},{default:(0,l.w5)((()=>[Co,(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(n.customersList,(e=>((0,l.wg)(),(0,l.iD)("tr",{key:e},[(0,l._)("td",null,(0,z.zw)(e.customerId),1),(0,l._)("td",null,(0,z.zw)(e.name),1),(0,l._)("td",null,(0,z.zw)(e.email),1),(0,l._)("td",null,(0,z.zw)(e.contactPerson),1),(0,l._)("td",null,(0,z.zw)(e.contactNumber),1),(0,l._)("td",null,[(0,l.Wm)(d,{comment:e.address},null,8,["comment"])]),(0,l._)("td",null,[(0,l.Wm)(r,{onOnRemove:i.onRemove,id:e.customerId,text:"customer"},{default:(0,l.w5)((({onOpenDialog:e})=>[(0,l.Wm)(u.T,{icon:"mdi-delete",variant:"text",color:"#a11a1a",onClick:e},null,8,["onClick"])])),_:2},1032,["onOnRemove","id"])])])))),128))])])),_:1})])),_:1}),0===n.customersList.length?((0,l.wg)(),(0,l.iD)("div",Io,Vo)):(0,l.kq)("",!0),(0,l.Wm)(ge.h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(ye.C)])),_:1})])),_:1},8,["loading"])])),_:1})}function Po(e,t,a,o,n,i){return(0,l.wg)(),(0,l.j4)(c.K,null,{default:(0,l.w5)((()=>[(0,l.Wm)(Je.B,{modelValue:n.dialog,"onUpdate:modelValue":t[7]||(t[7]=e=>n.dialog=e),persistent:"",width:"1024"},{activator:(0,l.w5)((({props:e})=>[(0,l.Wm)(u.T,(0,l.dG)({variant:"outlined","prepend-icon":"mdi-plus",color:"primary"},e),{default:(0,l.w5)((()=>[(0,l.Uk)(" New ")])),_:2},1040)])),default:(0,l.w5)((()=>[(0,l.Wm)(he._,null,{default:(0,l.w5)((()=>[(0,l.Wm)(we.E,null,{default:(0,l.w5)((()=>[(0,l.Uk)(" Add Customer ")])),_:1}),(0,l.Wm)(fe.Z,null,{default:(0,l.w5)((()=>[(0,l.Wm)(q.O,{modelValue:n.form,"onUpdate:modelValue":t[5]||(t[5]=e=>n.form=e)},{default:(0,l.w5)((()=>[(0,l.Wm)(p.o,{align:"center"},{default:(0,l.w5)((()=>[(0,l.Wm)(h.D,{cols:"4"},{default:(0,l.w5)((()=>[(0,l.Wm)(G.h,{density:"compact",variant:"outlined",label:"Customer",rules:[n.rules.required],placeholder:"Customer",modelValue:n.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.name=e)},null,8,["rules","modelValue"])])),_:1}),(0,l.Wm)(h.D,null,{default:(0,l.w5)((()=>[(0,l.Wm)(G.h,{density:"compact",variant:"outlined",label:"Contact Person",rules:[n.rules.required],placeholder:"Contact Person",modelValue:n.contactPerson,"onUpdate:modelValue":t[1]||(t[1]=e=>n.contactPerson=e)},null,8,["rules","modelValue"])])),_:1}),(0,l.Wm)(h.D,{cols:"4"},{default:(0,l.w5)((()=>[(0,l.Wm)(G.h,{density:"compact",variant:"outlined",label:"Contact Number",type:"number",rules:[n.rules.required],placeholder:"Contact Number",modelValue:n.number,"onUpdate:modelValue":t[2]||(t[2]=e=>n.number=e)},null,8,["rules","modelValue"])])),_:1})])),_:1}),(0,l.Wm)(p.o,null,{default:(0,l.w5)((()=>[(0,l.Wm)(h.D,{cols:"4"},{default:(0,l.w5)((()=>[(0,l.Wm)(G.h,{density:"compact",variant:"outlined",label:"Email",rules:[n.rules.required,n.rules.email],placeholder:"Email",modelValue:n.email,"onUpdate:modelValue":t[3]||(t[3]=e=>n.email=e)},null,8,["rules","modelValue"])])),_:1})])),_:1}),(0,l.Wm)(p.o,null,{default:(0,l.w5)((()=>[(0,l.Wm)(h.D,{cols:"8"},{default:(0,l.w5)((()=>[(0,l.Wm)(Ot.z,{density:"compact",variant:"outlined",label:"Address",placeholder:"Address",modelValue:n.address,"onUpdate:modelValue":t[4]||(t[4]=e=>n.address=e),rules:[n.rules.required]},null,8,["modelValue","rules"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,l.Wm)(ge.h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(ye.C),(0,l.Wm)(u.T,{color:"blue-darken-1",variant:"text",onClick:t[6]||(t[6]=e=>n.dialog=!1)},{default:(0,l.w5)((()=>[(0,l.Uk)(" Cancel ")])),_:1}),(0,l.Wm)(u.T,{disabled:!n.form,color:"primary",variant:"outlined",onClick:i.onAddCustomer,loading:n.addLoading},{default:(0,l.w5)((()=>[(0,l.Uk)(" Add ")])),_:1},8,["disabled","onClick","loading"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}var Lo={data(){return{dialog:!1,form:!1,name:null,number:null,email:null,contactPerson:null,addLoading:!1,rules:{required(e){return null!==e&&""!==e||"Required"},email(e){return!(!e.includes("@")||!e.includes(".com"))||"Invalid Email Address"}},address:null}},computed:{...(0,m.Se)(["getHeaders"])},methods:{async onAddCustomer(){this.addLoading=!0;const e="${this.$store.state.backendDomainUrl}/customer/create/",t={name:this.name,contactPerson:this.contactPerson,contactNumber:this.number,email:this.email,address:this.address},a={method:"POST",...this.getHeaders,body:JSON.stringify(t)},o=await fetch(e,a);if(o.ok){const e=await o.json();console.log(`new customer id : ${e.customerId}`),this.addLoading=!1,this.$emit("getCustomersList"),this.dialog=!1}}}};const Eo=(0,k.Z)(Lo,[["render",Po]]);var No=Eo,$o={data(){return{searchCustomer:"",searchLoading:!1,customersList:""}},components:{CommentPopup:Et,DeleteButton:oo,NewCustomerPopup:No},computed:{...(0,m.Se)(["getFormatedDateString","getHeaders"])},methods:{onupdateInput(){this.getCustomersList()},async getCustomersList(){this.searchLoading=!0;const e=`${this.$store.state.backendDomainUrl}/customers?name=${this.searchCustomer}`,t={method:"GET",...this.getHeaders},a=await fetch(e,t);if(a.ok){const e=await a.json();this.customersList=e,this.searchLoading=!1}},async onRemove(e){const t=`${this.$store.state.backendDomainUrl}/customer/delete/${e}`,a={method:"DELETE",...this.getHeaders},o=await fetch(t,a);if(o.ok){const e=await o.json();console.log(e.message),this.getCustomersList()}}},mounted(){this.getCustomersList()}};const Uo=(0,k.Z)($o,[["render",To]]);var Oo=Uo;const Ro=e=>((0,l.dD)("data-v-f8ddcbf2"),e=e(),(0,l.Cn)(),e),Mo={class:"w-100 d-flex flex-row justify-space-between"},Ho=Ro((()=>(0,l._)("span",{class:"text-h5"},"TimeSheet",-1))),Ao={key:0,class:"w-100 mt-5"},zo={key:0,class:"create-sheet-card d-flex flex-row align-center justify-center"};function qo(e,t,a,n,i,s){const d=(0,l.up)("TimesheetStatus"),r=(0,l.up)("EditableTable"),m=(0,l.up)("NonEditableTable");return(0,l.wg)(),(0,l.j4)(he._,{width:"1080","max-height":"600",variant:"elevated",elevation:"10"},{default:(0,l.w5)((()=>[(0,l.Wm)(De.i,{dark:"",color:"#6a70eb",height:"50"},{default:(0,l.w5)((()=>[(0,l.Wm)(ve.q,null,{default:(0,l.w5)((()=>[(0,l.Uk)("Submit Timesheet")])),_:1})])),_:1}),(0,l.Wm)(we.E,null,{default:(0,l.w5)((()=>[(0,l._)("div",Mo,[Ho,void 0!==e.timeSheetObj?((0,l.wg)(),(0,l.j4)(d,{key:0,status:e.timeSheetObj.status},null,8,["status"])):(0,l.kq)("",!0),(0,l.wy)((0,l._)("input",{class:"week-calendar-input",type:"week","onUpdate:modelValue":t[0]||(t[0]=t=>e.calendarValue=t),onChange:t[1]||(t[1]=(...e)=>s.onChangeWeek&&s.onChangeWeek(...e))},null,544),[[o.nr,e.calendarValue]])]),void 0!==e.timeSheetObj&&"denied"===e.timeSheetObj.status?((0,l.wg)(),(0,l.iD)("div",Ao,[(0,l.Wm)(u.T,{color:"#a83299",loading:e.createSheetLoading,onClick:s.onClickReCreate},{default:(0,l.w5)((()=>[(0,l.Uk)(" Re-create Sheet ")])),_:1},8,["loading","onClick"])])):(0,l.kq)("",!0)])),_:1}),(0,l.Wm)(fe.Z,null,{default:(0,l.w5)((()=>[(0,l._)("div",null,[void 0===e.timeSheetObj?((0,l.wg)(),(0,l.iD)("div",zo,[(0,l.Wm)(u.T,{color:"#a83299",onClick:s.createSheet,loading:e.createSheetLoading},{default:(0,l.w5)((()=>[(0,l.Uk)(" Create Sheet ")])),_:1},8,["onClick","loading"])])):"open"===e.timeSheetObj.status?((0,l.wg)(),(0,l.j4)(r,{key:1,timeSheetObj:e.timeSheetObj,onGetTimeSheet:s.getTimeSheet},null,8,["timeSheetObj","onGetTimeSheet"])):((0,l.wg)(),(0,l.j4)(m,{key:2,timeSheetObj:e.timeSheetObj},null,8,["timeSheetObj"]))])])),_:1}),(0,l.Wm)(ge.h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(ye.C)])),_:1})])),_:1})}const Zo=e=>((0,l.dD)("data-v-16c20628"),e=e(),(0,l.Cn)(),e),Fo={class:"w-100 d-flex flex-row align-center justify-end"},Go={class:"d-flex flex-row justify-space-between"},Yo={class:"text-h7"},Bo={class:"text-h9"},Ko=Zo((()=>(0,l._)("th",{class:"text-left",width:"250px"}," Projects ",-1))),Jo=Zo((()=>(0,l._)("th",{style:{"font-size":"14px","font-weight":"bold",color:"black"}}," Total: ",-1))),Xo={class:"text-center pa-1",style:{width:"95px"}},Qo={class:"text-center pa-1",style:{width:"95px"}},el={class:"text-center pa-1",style:{width:"95px"}},tl={class:"text-center pa-1",style:{width:"95px"}},al={class:"text-center pa-1",style:{width:"95px"}},ol={class:"text-center pa-1",style:{width:"95px"}},ll={class:"text-center pa-1",style:{width:"95px"}},nl={class:"text-center"},il={class:"pa-0"},sl=Zo((()=>(0,l._)("td",null,[(0,l._)("p",null," Total : ")],-1))),dl={key:0,class:"error-message error"},rl={class:"text-center"},ml={key:0,class:"error-message error"},ul={class:"mt-4 d-flex flex-row align-center justify-space-between"},cl=Zo((()=>(0,l._)("div",null,[(0,l._)("p",{class:"error-message"},"*Maxmium 8 hours per day allowed"),(0,l._)("p",{class:"error-message"},"*40 hours per week allowed")],-1)));function pl(e,t,a,o,n,i){const s=(0,l.up)("ReviewTable"),d=(0,l.up)("InputField");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l._)("div",Fo,[!n.isSaved&&!i.isMoreEightHours&&i.getTotal<=40?((0,l.wg)(),(0,l.j4)(u.T,{key:0,color:"primary",class:"mr-2",onClick:i.onClickSave,loading:n.saveLodaing,disabled:!n.form},{default:(0,l.w5)((()=>[(0,l.Uk)(" Save ")])),_:1},8,["onClick","loading","disabled"])):(0,l.kq)("",!0),(0,l.Wm)(Je.B,{modelValue:n.dialog,"onUpdate:modelValue":t[1]||(t[1]=e=>n.dialog=e),persistent:"",width:"auto"},{activator:(0,l.w5)((({props:e})=>[(0,l.Wm)(u.T,(0,l.dG)({variant:"outlined",color:"#b93bd9"},e,{disabled:!n.isSaved||i.isMoreEightHours||i.getTotal<40||i.getTotal>40||i.isTimeSheetValid||!n.form}),{default:(0,l.w5)((()=>[(0,l.Uk)(" Review and Submit ")])),_:2},1040,["disabled"])])),default:(0,l.w5)((()=>[(0,l.Wm)(he._,null,{default:(0,l.w5)((()=>[(0,l.Wm)(we.E,{class:"text-h5"},{default:(0,l.w5)((()=>[(0,l._)("div",Go,[(0,l._)("span",Yo,"TimeSheet ID : "+(0,z.zw)(n.sheetObj.timeSheetId),1),(0,l._)("span",Bo,"Employee ID: "+(0,z.zw)(e.employeeId),1)])])),_:1}),(0,l.Wm)(fe.Z,null,{default:(0,l.w5)((()=>[(0,l.Wm)(s,{weekData:n.timeSheetList},null,8,["weekData"])])),_:1}),(0,l.Wm)(ge.h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(ye.C),(0,l.Wm)(u.T,{variant:"text",onClick:t[0]||(t[0]=e=>n.dialog=!1),color:"#454df5"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Cancel ")])),_:1}),(0,l.Wm)(u.T,{variant:"outlined",color:"#b93bd9",loading:n.submitLoading,onClick:i.onClickSubmit},{default:(0,l.w5)((()=>[(0,l.Uk)(" Submit ")])),_:1},8,["loading","onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])]),(0,l.Wm)(c.K,null,{default:(0,l.w5)((()=>[(0,l.Wm)(q.O,{modelValue:n.form,"onUpdate:modelValue":t[2]||(t[2]=e=>n.form=e)},{default:(0,l.w5)((()=>[(0,l.Wm)(p.o,null,{default:(0,l.w5)((()=>[(0,l.Wm)(ke.Y,{height:"400px"},{default:(0,l.w5)((()=>[(0,l._)("thead",null,[(0,l._)("tr",null,[Ko,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.$store.state.daysOfWeek,(e=>((0,l.wg)(),(0,l.iD)("th",{style:{"font-size":"13px"},class:"text-left",key:e},(0,z.zw)(e),1)))),128)),Jo])]),(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(n.timeSheetList,(e=>((0,l.wg)(),(0,l.iD)("tr",{key:e.id},[(0,l._)("td",null,[(0,l._)("div",null,[(0,l.Wm)(_e.rL,{class:"mt-6",label:"Select Project",items:n.localProjectsList,variant:"outlined","model-value":e.projectName,rules:n.projectSelectRules,"onUpdate:modelValue":t=>i.setProjectValue(t,{rowId:e.id,name:"projectName"})},null,8,["items","model-value","rules","onUpdate:modelValue"])])]),(0,l._)("td",Xo,[(0,l.Wm)(d,{comment:e.mondayComment,obj:{rowId:e.id,name:"mondayComment"},onSetRowValue:i.setRowValue},{default:(0,l.w5)((({isHovered:t,onClickIcon:a})=>[(0,l.Wm)(G.h,{variant:"outlined",density:"comfortable","hide-details":"",onInput:t=>i.restrictChar(t,{rowId:e.id,name:"monday"}),"model-value":e.monday,type:"number","v-model":e.monday,"append-inner-icon":t?"mdi-comment":"","onClick:appendInner":a},null,8,["onInput","model-value","v-model","append-inner-icon","onClick:appendInner"])])),_:2},1032,["comment","obj","onSetRowValue"])]),(0,l._)("td",Qo,[(0,l.Wm)(d,{comment:e.tuesdayComment,obj:{rowId:e.id,name:"tuesdayComment"},onSetRowValue:i.setRowValue},{default:(0,l.w5)((({isHovered:t,onClickIcon:a})=>[(0,l.Wm)(G.h,{variant:"outlined",density:"comfortable","hide-details":"",onInput:t=>i.restrictChar(t,{rowId:e.id,name:"tuesday"}),"model-value":e.tuesday,type:"number","append-inner-icon":t?"mdi-comment":"","onClick:appendInner":a},null,8,["onInput","model-value","append-inner-icon","onClick:appendInner"])])),_:2},1032,["comment","obj","onSetRowValue"])]),(0,l._)("td",el,[(0,l.Wm)(d,{comment:e.wednesdayComment,obj:{rowId:e.id,name:"wednesdayComment"},onSetRowValue:i.setRowValue},{default:(0,l.w5)((({isHovered:t,onClickIcon:a})=>[(0,l.Wm)(G.h,{variant:"outlined",density:"comfortable","hide-details":"",onInput:t=>i.restrictChar(t,{rowId:e.id,name:"wednesday"}),"model-value":e.wednesday,type:"number","append-inner-icon":t?"mdi-comment":"","onClick:appendInner":a},null,8,["onInput","model-value","append-inner-icon","onClick:appendInner"])])),_:2},1032,["comment","obj","onSetRowValue"])]),(0,l._)("td",tl,[(0,l.Wm)(d,{comment:e.thursdayComment,obj:{rowId:e.id,name:"thursdayComment"},onSetRowValue:i.setRowValue},{default:(0,l.w5)((({isHovered:t,onClickIcon:a})=>[(0,l.Wm)(G.h,{variant:"outlined",density:"comfortable","hide-details":"",onInput:t=>i.restrictChar(t,{rowId:e.id,name:"thursday"}),"model-value":e.thursday,type:"number","append-inner-icon":t?"mdi-comment":"","onClick:appendInner":a},null,8,["onInput","model-value","append-inner-icon","onClick:appendInner"])])),_:2},1032,["comment","obj","onSetRowValue"])]),(0,l._)("td",al,[(0,l.Wm)(d,{comment:e.fridayComment,obj:{rowId:e.id,name:"fridayComment"},onSetRowValue:i.setRowValue},{default:(0,l.w5)((({isHovered:t,onClickIcon:a})=>[(0,l.Wm)(G.h,{variant:"outlined",density:"comfortable","hide-details":"",onInput:t=>i.restrictChar(t,{rowId:e.id,name:"friday"}),"model-value":e.friday,type:"number","append-inner-icon":t?"mdi-comment":"","onClick:appendInner":a},null,8,["onInput","model-value","append-inner-icon","onClick:appendInner"])])),_:2},1032,["comment","obj","onSetRowValue"])]),(0,l._)("td",ol,[(0,l.Wm)(d,{comment:e.satuardayComment,obj:{rowId:e.id,name:"satuardayComment"},onSetRowValue:i.setRowValue},{default:(0,l.w5)((({isHovered:t,onClickIcon:a})=>[(0,l.Wm)(G.h,{variant:"outlined",density:"comfortable","hide-details":"",onInput:t=>i.restrictChar(t,{rowId:e.id,name:"satuarday"}),"model-value":e.satuarday,type:"number","append-inner-icon":t?"mdi-comment":"","onClick:appendInner":a},null,8,["onInput","model-value","append-inner-icon","onClick:appendInner"])])),_:2},1032,["comment","obj","onSetRowValue"])]),(0,l._)("td",ll,[(0,l.Wm)(d,{comment:e.sundayComment,obj:{rowId:e.id,name:"sundayComment"},onSetRowValue:i.setRowValue},{default:(0,l.w5)((({isHovered:t,onClickIcon:a})=>[(0,l.Wm)(G.h,{variant:"outlined",density:"comfortable","hide-details":"",onInput:t=>i.restrictChar(t,{rowId:e.id,name:"sunday"}),"model-value":e.sunday,type:"number","append-inner-icon":t?"mdi-comment":"","onClick:appendInner":a},null,8,["onInput","model-value","append-inner-icon","onClick:appendInner"])])),_:2},1032,["comment","obj","onSetRowValue"])]),(0,l._)("td",nl,[(0,l._)("p",null,(0,z.zw)(i.totalHoursOnProject(e)),1)]),(0,l._)("td",il,[(0,l.Wm)(u.T,{icon:"mdi-close",variant:"text",size:"small",onClick:t=>i.onClickDelete(e.id)},null,8,["onClick"])])])))),128)),(0,l._)("tr",null,[sl,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(n.daysList,(e=>((0,l.wg)(),(0,l.iD)("td",{class:"text-center",key:e},[(0,l._)("div",null,[(0,l._)("p",{class:(0,z.C_)(i.getTotalHoursOfDay(e)>8?"error":"")},(0,z.zw)(i.getTotalHoursOfDay(e)),3),i.getTotalHoursOfDay(e)>8?((0,l.wg)(),(0,l.iD)("p",dl,"8 Hours allowed")):(0,l.kq)("",!0)])])))),128)),(0,l._)("td",rl,[(0,l._)("p",{class:(0,z.C_)(i.getTotal>40?"error":"")},(0,z.zw)(i.getTotal),3),i.getTotal>40?((0,l.wg)(),(0,l.iD)("p",ml,"40HRS allowed")):(0,l.kq)("",!0)])])])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,l._)("div",ul,[n.timeSheetList.length<e.projectList.length?((0,l.wg)(),(0,l.j4)(u.T,{key:0,color:"#0047ba","prepend-icon":"mdi-plus",onClick:i.addNewRow},{default:(0,l.w5)((()=>[(0,l.Uk)(" New Row ")])),_:1},8,["onClick"])):(0,l.kq)("",!0),cl])])),_:1})])}var hl=a(3029);const wl=(0,l._)("th",{class:"text-left",width:"250px"}," Projects ",-1),fl=(0,l._)("th",{style:{"font-size":"14px","font-weight":"bold",color:"black"}}," Total: ",-1),gl={class:"mt-6 mb-6 font-weight-medium"},yl={class:"text-center"},_l={class:"text-center"},kl={class:"text-center"},Dl={class:"text-center"},vl={class:"text-center"},jl={class:"text-center"},Wl={class:"text-center"},bl={class:"text-center"},Sl=(0,l._)("td",null,[(0,l._)("p",null," Total : ")],-1),Cl={class:"text-center"},Il={class:"text-center"},xl={class:"text-center"},Vl={class:"text-center"},Tl={class:"text-center"},Pl={class:"text-center"},Ll={class:"text-center"},El={class:"text-center"};function Nl(e,t,a,o,n,i){const s=(0,l.up)("CommentPopup");return(0,l.wg)(),(0,l.j4)(c.K,null,{default:(0,l.w5)((()=>[(0,l.Wm)(p.o,null,{default:(0,l.w5)((()=>[(0,l.Wm)(ke.Y,null,{default:(0,l.w5)((()=>[(0,l._)("thead",null,[(0,l._)("tr",null,[wl,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.$store.state.daysOfWeek,(e=>((0,l.wg)(),(0,l.iD)("th",{style:{"font-size":"13px"},class:"text-left",key:e},(0,z.zw)(e),1)))),128)),fl])]),(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(n.timeSheetList,((e,t)=>((0,l.wg)(),(0,l.iD)("tr",{key:t},[(0,l._)("td",null,[(0,l._)("div",gl,[(0,l._)("p",null,(0,z.zw)(i.getProjectName(e.projectId)),1)])]),(0,l._)("td",yl,[(0,l.Wm)(s,{comment:e.mondayComment},{default:(0,l.w5)((()=>[(0,l._)("p",null,(0,z.zw)(i.checkAndGetValue(e.monday)),1)])),_:2},1032,["comment"])]),(0,l._)("td",_l,[(0,l.Wm)(s,{comment:e.tuesdayComment},{default:(0,l.w5)((()=>[(0,l._)("p",null,(0,z.zw)(i.checkAndGetValue(e.tuesday)),1)])),_:2},1032,["comment"])]),(0,l._)("td",kl,[(0,l.Wm)(s,{comment:e.wednesdayComment},{default:(0,l.w5)((()=>[(0,l._)("p",null,(0,z.zw)(i.checkAndGetValue(e.wednesday)),1)])),_:2},1032,["comment"])]),(0,l._)("td",Dl,[(0,l.Wm)(s,{comment:e.thursdayComment},{default:(0,l.w5)((()=>[(0,l._)("p",null,(0,z.zw)(i.checkAndGetValue(e.thursday)),1)])),_:2},1032,["comment"])]),(0,l._)("td",vl,[(0,l.Wm)(s,{comment:e.fridayComment},{default:(0,l.w5)((()=>[(0,l._)("p",null,(0,z.zw)(i.checkAndGetValue(e.friday)),1)])),_:2},1032,["comment"])]),(0,l._)("td",jl,[(0,l.Wm)(s,{comment:e.satuardayComment},{default:(0,l.w5)((()=>[(0,l._)("p",null,(0,z.zw)(i.checkAndGetValue(e.satuarday)),1)])),_:2},1032,["comment"])]),(0,l._)("td",Wl,[(0,l.Wm)(s,{comment:e.sundayComment},{default:(0,l.w5)((()=>[(0,l._)("p",null,(0,z.zw)(i.checkAndGetValue(e.sunday)),1)])),_:2},1032,["comment"])]),(0,l._)("td",bl,[(0,l._)("p",null,(0,z.zw)(i.totalHoursOnProject(e)),1)])])))),128)),(0,l._)("tr",null,[Sl,(0,l._)("td",Cl,(0,z.zw)(i.getTotalHoursOfDay("monday")),1),(0,l._)("td",Il,(0,z.zw)(i.getTotalHoursOfDay("tuesday")),1),(0,l._)("td",xl,(0,z.zw)(i.getTotalHoursOfDay("wednesday")),1),(0,l._)("td",Vl,(0,z.zw)(i.getTotalHoursOfDay("thursday")),1),(0,l._)("td",Tl,(0,z.zw)(i.getTotalHoursOfDay("friday")),1),(0,l._)("td",Pl,(0,z.zw)(i.getTotalHoursOfDay("satuarday")),1),(0,l._)("td",Ll,(0,z.zw)(i.getTotalHoursOfDay("sunday")),1),(0,l._)("td",El,(0,z.zw)(i.getTotal),1)])])])),_:1})])),_:1})])),_:1})}var $l={data(){return{timeSheetList:this.weekData}},props:["weekData"],components:{CommentPopup:Et},watch:{weekData(e){this.timeSheetList=e}},computed:{...(0,m.rn)(["projectList"]),getTotal(){const e=this.timeSheetList;let t=0;return e.forEach((e=>{t+=e.monday+e.tuesday+e.wednesday+e.thursday+e.friday+e.satuarday+e.sunday})),t.toFixed(1)}},methods:{getTotalHoursOfDay(e){const t=this.timeSheetList;let a=0;return t.forEach((t=>{a+=t[e]})),a.toFixed(1)},totalHoursOnProject(e){const t=e.monday+e.tuesday+e.wednesday+e.thursday+e.friday+e.satuarday+e.sunday;return t.toFixed(1)},getProjectName(e){const t=this.projectList.find((t=>t.projectId===e));return t.projectName},checkAndGetValue(e){return 0===e?null:e}}};const Ul=(0,k.Z)($l,[["render",Nl]]);var Ol=Ul;function Rl(e,t,a,o,n,i){return(0,l.wg)(),(0,l.iD)("div",null,[(0,l.Wm)(he._,{onMouseenter:i.onHover,onMouseleave:i.offHover},{default:(0,l.w5)((()=>[(0,l.WI)(e.$slots,"default",{isHovered:n.isHovered,onClickIcon:i.onClickIcon})])),_:3},8,["onMouseenter","onMouseleave"]),(0,l.Wm)(Je.B,{width:"500",modelValue:n.dialog,"onUpdate:modelValue":t[1]||(t[1]=e=>n.dialog=e),persistent:""},{default:(0,l.w5)((()=>[(0,l.Wm)(he._,{title:"Add Comment"},{default:(0,l.w5)((()=>[(0,l.Wm)(Ot.z,{variant:"outlined",modelValue:n.newComment,"onUpdate:modelValue":t[0]||(t[0]=e=>n.newComment=e)},null,8,["modelValue"]),(0,l.Wm)(ge.h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(ye.C),(0,l.Wm)(u.T,{text:"Save Changes",onClick:i.onSaveClicked,color:"#4287f5"},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}var Ml={data(){return{isHovered:!1,dialog:!1,newComment:this.comment}},props:["comment","obj"],watch:{comment(e){this.newComment=e,console.log(e),console.log(this.newComment)}},methods:{onHover(){this.isHovered=!0},offHover(){this.isHovered=!1},onClickIcon(){this.dialog=!0},onSaveClicked(){this.dialog=!1,this.$emit("setRowValue",this.newComment,this.obj)}}};const Hl=(0,k.Z)(Ml,[["render",Rl]]);var Al=Hl,zl={data(){return{form:!0,isHovering:!1,dialog:!1,sheetObj:this.timeSheetObj,saveLodaing:!1,isSaved:!0,timeSheetList:[],localProjectsList:[],submitLoading:!1,daysList:["monday","tuesday","wednesday","thursday","friday","satuarday","sunday"],projectSelectRules:[e=>{const t=this.projectList.find((t=>t.projectName===e));return void 0===t?"Select Project":t.startDate>this.endDate?"Project Not yet Started":!(t.endDate<this.startDate)||"Project Deadline Exceeded"}]}},props:["timeSheetObj"],watch:{timeSheetObj(e){this.sheetObj=e,this.getTimeSheetData()},timeSheetList(){this.updateLocalProjectList()}},components:{ReviewTable:Ol,InputField:Al},computed:{...(0,m.rn)(["employeeId","employeeName","selectedWeek","projectList","startDate","endDate"]),...(0,m.Se)(["getHeaders"]),getTotal(){const e=this.timeSheetList;let t=0;return e.forEach((e=>{t+=e.monday+e.tuesday+e.wednesday+e.thursday+e.friday+e.satuarday+e.sunday})),t.toFixed(1)},isMoreEightHours(){for(let e of this.daysList)if(this.getTotalHoursOfDay(e)>8)return!0;return!1},isTimeSheetValid(){return!(this.timeSheetList.length>0)||null===this.timeSheetList[0].projectId}},methods:{restrictChar(e,t){let a=e.target.value;(parseFloat(a)>8||parseFloat(a)<0)&&(e.target.value=null,a=null),a=isNaN(parseFloat(a))?null:parseFloat(parseFloat(a).toFixed(1)),this.setRowValue(a,t)},isTotalMoreThanEight(e,t){const{rowId:a,name:o}=t,l=this.timeSheetList.map((t=>{if(t.id===a){const a={...t};return a[o]=e,a}return{...t}}));let n=0;return l.forEach((e=>{n+=e[o]})),n>8},getTotalHoursOfDay(e){const t=this.timeSheetList;let a=0;return t.forEach((t=>{a+=t[e]})),a.toFixed(1)},addNewRow(){const e={id:(0,hl.Z)(),projectId:null,projectName:null,monday:null,tuesday:null,wednesday:null,thursday:null,friday:null,satuarday:null,sunday:null,total:null,mondayComment:null,tuesdayComment:null,wednesdayComment:null,thursdayComment:null,fridayComment:null,satuardayComment:null,sundayComment:null};this.timeSheetList=[...this.timeSheetList,e]},setProjectValue(e,t){const a=this.projectList.find((t=>t.projectName===e));this.setRowValue(a.projectId,{...t,name:"projectId"}),this.setRowValue(a.projectName,t),this.updateLocalProjectList()},setRowValue(e,t){const{rowId:a,name:o}=t,l=this.timeSheetList.find((e=>e.id===a));l&&(l[o]=e),this.isSaved=!1},updateLocalProjectList(){const e=this.projectList.filter((e=>{const t=this.timeSheetList.every((t=>t.projectId!==e.projectId));return t}));this.localProjectsList=e.map((e=>e.projectName))},totalHoursOnProject(e){const t=e.monday+e.tuesday+e.wednesday+e.thursday+e.friday+e.satuarday+e.sunday;return t.toFixed(1)},onClickDelete(e){this.isSaved=!1;const t=this.timeSheetList.filter((t=>t.id!==e));this.timeSheetList=t},async getProjectData(){await this.$store.dispatch("getProjectData"),this.localProjectsList=this.projectList.map((e=>e.projectName))},async getTimeSheetData(){const e=`${this.$store.state.backendDomainUrl}/timesheet/projects/${this.sheetObj.timeSheetId}`,t={method:"GET",...this.getHeaders},a=await fetch(e,t);if(a.ok){const e=await a.json();this.timeSheetList=e,0===this.timeSheetList.length&&this.addNewRow()}},async onClickSave(){this.saveLodaing=!0;const e=`${this.$store.state.backendDomainUrl}/timesheet/save/${this.sheetObj.timeSheetId}`,t={method:"PUT",...this.getHeaders,body:JSON.stringify({arr:this.timeSheetList})},a=await fetch(e,t);if(a.ok){const e=await a.json();console.log(e.text)}this.saveLodaing=!1,this.isSaved=!0},async onClickSubmit(){this.submitLoading=!0,await this.$store.dispatch("submitTimeSheet",this.sheetObj.timeSheetId),await this.$store.dispatch("sendEmail",{timeSheetId:this.sheetObj.timeSheetId,startDate:this.sheetObj.startDate,endDate:this.sheetObj.endDate}),this.dialog=!1,this.submitLoading=!1,this.$emit("getTimeSheet")}},created(){this.getProjectData(),this.getTimeSheetData()}};const ql=(0,k.Z)(zl,[["render",pl],["__scopeId","data-v-16c20628"]]);var Zl=ql,Fl=a(3841),Gl={name:"TimeSheet",data:()=>({createSheetLoading:!1,calendarValue:"",timeSheetObj:void 0}),components:{EditableTable:Zl,NonEditableTable:Ut,TimesheetStatus:Jt},computed:{...(0,m.rn)(["startDate","endDate","employeeId"]),...(0,m.Se)(["getHeaders"]),checkWeekDataExist(){return this.$store.getters.isWeekDataExist}},methods:{onChangeWeek(){""!==this.calendarValue&&(this.$store.dispatch("updateSelectedWeek",this.calendarValue),this.getTimeSheet())},async getTimeSheet(){const e=`${this.$store.state.backendDomainUrl}/timesheet/employee/${this.employeeId}?start_date=${this.startDate}&&end_date=${this.endDate}`,t={method:"GET",...this.getHeaders},a=await fetch(e,t);if(a.ok){const e=await a.json();this.timeSheetObj=e.data}},async createSheet(){this.createSheetLoading=!0;const e=`${this.$store.state.backendDomainUrl}/timesheet/create`,t={employeeId:this.employeeId,week:this.calendarValue,startDate:this.startDate,endDate:this.endDate},a={method:"POST",...this.getHeaders,body:JSON.stringify(t)},o=await fetch(e,a);if(o.ok){const e=await o.json();console.log(e.timeSheetId),this.timeSheetObj={timeSheetId:e.timeSheetId,week:this.calendarValue,status:"open"}}this.createSheetLoading=!1},async onClickReCreate(){this.createSheetLoading=!0;const e=`${this.$store.state.backendDomainUrl}/timesheet/recreate/${this.timeSheetObj.timeSheetId}`,t=await fetch(e,{method:"POST",...this.getHeaders});if(t.ok){const e=await t.json();console.log(e.message),this.getTimeSheet()}this.createSheetLoading=!1}},created(){if(void 0!==this.$route.query.calendarValue)this.calendarValue=this.$route.query.calendarValue;else{const e=new Date,t=`${e.getFullYear()}-W${(0,Fl.Z)(e,{weekStartsOn:1,firstWeekContainsDate:2})}`;this.calendarValue=t}this.$store.dispatch("updateSelectedWeek",this.calendarValue)},mounted(){this.getTimeSheet(),this.$store.commit("updateDaysOfWeek")}};const Yl=(0,k.Z)(Gl,[["render",qo],["__scopeId","data-v-f8ddcbf2"]]);var Bl=Yl;const Kl=e=>((0,l.dD)("data-v-25e12231"),e=e(),(0,l.Cn)(),e),Jl={class:"d-flex flex-row align-center"},Xl={class:"d-flex flex-row align-center"},Ql=Kl((()=>(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",{class:"text-left"}," Timesheet Id "),(0,l._)("th",{class:"text-left"}," Employee Id "),(0,l._)("th",{class:"text-left"}," employee Name "),(0,l._)("th",{class:"text-center"}," Week "),(0,l._)("th",{class:"text-center"}," Log Hours "),(0,l._)("th",{class:"text-center"}," Status ")])],-1))),en={class:"text-center"},tn={class:"text-center"},an={key:0,class:"d-flex flex-row justify-center align-center"},on=Kl((()=>(0,l._)("p",{class:"font-weight-medium"},"No Data Available",-1))),ln=[on];function nn(e,t,a,o,n,i){const s=(0,l.up)("DateRange"),d=(0,l.up)("WeekSheet"),r=(0,l.up)("TimesheetStatus");return(0,l.wg)(),(0,l.j4)(c.K,{fluid:"",class:"w-100 h-100"},{default:(0,l.w5)((()=>[(0,l.Wm)(he._,{width:"100%",height:"100%",variant:"elevated",elevation:"10",loading:e.loading},{default:(0,l.w5)((()=>[(0,l.Wm)(De.i,{dark:"",color:"#6a70eb",height:"50"},{default:(0,l.w5)((()=>[(0,l.Wm)(ve.q,null,{default:(0,l.w5)((()=>[(0,l.Uk)("Review TimeSheet")])),_:1})])),_:1}),(0,l.Wm)(we.E,null,{default:(0,l.w5)((()=>[(0,l.Wm)(p.o,{align:"end"},{default:(0,l.w5)((()=>[(0,l.Wm)(h.D,{cols:"12",md:"3"},{default:(0,l.w5)((()=>[(0,l._)("div",Jl,[(0,l.Wm)(_e.rL,{items:e.timePeriodOptions,"item-title":"title","item-value":"value",density:"compact",label:"Select a Time Period","hide-details":"",modelValue:e.timePeriod,"onUpdate:modelValue":[t[0]||(t[0]=t=>e.timePeriod=t),i.onupdateInput]},null,8,["items","modelValue","onUpdate:modelValue"])])])),_:1}),(0,l.Wm)(h.D,{cols:"12",md:"3"},{default:(0,l.w5)((()=>[(0,l.Wm)(G.h,{density:"compact",variant:"outlined",placeholder:"Employee Id",type:"number","hide-details":"",modelValue:e.searchEmployeeId,"onUpdate:modelValue":[t[1]||(t[1]=t=>e.searchEmployeeId=t),i.onupdateInput]},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,l.Wm)(h.D,{cols:"12",md:"3"},{default:(0,l.w5)((()=>[(0,l.Wm)(G.h,{density:"compact",variant:"outlined",placeholder:"Employee Name",type:"number","hide-details":"",modelValue:e.searchEmployeeId,"onUpdate:modelValue":[t[2]||(t[2]=t=>e.searchEmployeeId=t),i.onupdateInput]},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),"customDate"===e.timePeriod?((0,l.wg)(),(0,l.j4)(h.D,{key:0,cols:"12",md:"12"},{default:(0,l.w5)((()=>[(0,l._)("div",Xl,[(0,l.Wm)(s,{onUpdateDateRange:i.updateDateRange},null,8,["onUpdateDateRange"]),(0,l.Wm)(u.T,{variant:"text",icon:"mdi mdi-magnify",class:"mt-7",onClick:i.onupdateInput},null,8,["onClick"])])])),_:1})):(0,l.kq)("",!0)])),_:1})])),_:1}),(0,l.Wm)(fe.Z,null,{default:(0,l.w5)((()=>[(0,l.Wm)(ke.Y,{density:"compact"},{default:(0,l.w5)((()=>[Ql,(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.timeSheets,(e=>((0,l.wg)(),(0,l.iD)("tr",{key:e.name},[(0,l._)("td",null,(0,z.zw)(e.timeSheetId),1),(0,l._)("td",null,(0,z.zw)(e.employeeId),1),(0,l._)("td",null,(0,z.zw)(e.employeeName),1),(0,l._)("td",null,[(0,l.Wm)(d,{title:e.week,timeSheet:e,onGetTimeSheets:i.getTimeSheets},null,8,["title","timeSheet","onGetTimeSheets"])]),(0,l._)("td",en,(0,z.zw)(e.logHours),1),(0,l._)("td",tn,[(0,l.Wm)(r,{status:e.status},null,8,["status"])])])))),128))])])),_:1})])),_:1}),0===e.timeSheets.length?((0,l.wg)(),(0,l.iD)("div",an,ln)):(0,l.kq)("",!0),(0,l.Wm)(ge.h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(ye.C)])),_:1})])),_:1},8,["loading"])])),_:1})}var sn={name:"TimeSheet",data:()=>({dialog:!1,loading:!1,status:"",searchEmployeeId:"",searchEmployeeName:"",dateRange:{startDate:new Date,endDate:new Date},statusOptions:[{title:"All",value:""},{title:"Open",value:"open"},{title:"Submited",value:"submited"},{title:"Approved",value:"approved"},{title:"Denied",value:"denied"}],timePeriodOptions:[{value:"month1",title:"Last 1 Month"},{value:"month3",title:"Last 3 Months"},{value:"month6",title:"Last 6 Months"},{value:"lastYear",title:"Previous Year"},{value:"currentYear",title:"Current Year"},{value:"customDate",title:"Custom Date"}],timePeriod:null,timeSheets:[]}),components:{DateRange:Ke,WeekSheet:Ft,TimesheetStatus:Jt},computed:{...(0,m.rn)(["employeeId"]),...(0,m.Se)(["getHeaders"])},methods:{onupdateInput(){this.getTimeSheets()},getStartAndEndDate(){const e=new Date;let t=null,a=e;switch(this.timePeriod){case"month1":t=(0,Re.Z)(e,30);break;case"month3":t=(0,Re.Z)(e,90);break;case"month6":t=(0,Re.Z)(e,180);break;case"lastYear":t=(0,Me.Z)(new Date(e.getFullYear(),0,1),1),a=(0,Me.Z)(new Date(e.getFullYear(),11,31),1);break;case"currentYear":t=new Date(e.getFullYear(),0,1);break;case"customDate":t=this.dateRange.startDate,a=this.dateRange.endDate;break;default:t=new Date(e.getFullYear(),0,1);break}return{startDate:(0,R.Z)(t,"yyyy-MM-dd"),endDate:(0,R.Z)(a,"yyyy-MM-dd")}},async getTimeSheets(){this.loading=!0;const{startDate:e,endDate:t}=this.getStartAndEndDate(),a=`${this.$store.state.backendDomainUrl}/reporting_manager/employees/pending_timesheets/${this.employeeId}?employee_id=${this.searchEmployeeId}&&employee_name=${this.searchEmployeeName}&&start_date=${e}&&end_date=${t}&&status=${this.status}`,o={method:"GET",...this.getHeaders},l=await fetch(a,o);if(l.ok){const e=await l.json();this.timeSheets=e,console.log(this.timeSheets)}this.loading=!1},updateDateRange(e){this.dateRange=e}},mounted(){this.getTimeSheets()}};const dn=(0,k.Z)(sn,[["render",nn],["__scopeId","data-v-25e12231"]]);var rn=dn,mn=a(4108),un=a(3446),cn=a(4580),pn=a(6191),hn=a(1615);const wn={class:"font-weight-medium text-uppercase"},fn={class:"font-weight-medium text-uppercase"},gn={class:"text-subtitle-2 font-weight-light"},yn={key:0,class:"d-flex justify-center text-subtitle-1"},_n={key:0,class:"d-flex justify-center text-subtitle-1"},kn={key:1,style:{height:"400px",width:"100%"},class:"d-flex flex-row align-center justify-center"};function Dn(e,t,a,o,n,i){const s=(0,l.up)("ProjectAssignmentExpansion");return(0,l.wg)(),(0,l.j4)(c.K,{fluid:"",class:"h-100 w-100"},{default:(0,l.w5)((()=>[n.loading?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(F.C,{key:0,variant:"elevated"},{default:(0,l.w5)((()=>[(0,l.Wm)(De.i,{height:"50",theme:"dark",color:"primary"},{default:(0,l.w5)((()=>[(0,l.Wm)(ve.q,null,{default:(0,l.w5)((()=>[(0,l.Uk)("PROJECT ASSIGNMENT")])),_:1}),(0,l.Wm)(hn.l)])),_:1}),(0,l.Wm)(c.K,{fluid:""},{default:(0,l.w5)((()=>[(0,l.Wm)(p.o,null,{default:(0,l.w5)((()=>[(0,l.Wm)(h.D,{cols:"12"},{default:(0,l.w5)((()=>[(0,l._)("div",wn,(0,z.zw)(`Employee id : ${n.employeeObj.employeeId}`),1),(0,l._)("div",fn,(0,z.zw)(`Name : ${n.employeeObj.employeeName}`),1),(0,l._)("div",null,(0,z.zw)(`Email : ${n.employeeObj.employeeEmail}`),1),(0,l._)("div",gn,(0,z.zw)(`Position :${n.employeeObj.position}`),1)])),_:1})])),_:1}),(0,l.Wm)(p.o,null,{default:(0,l.w5)((()=>[(0,l.Wm)(h.D,{cols:"6"},{default:(0,l.w5)((()=>[(0,l.Wm)(he._,null,{default:(0,l.w5)((()=>[(0,l.Wm)(De.i,{dark:"",color:"#6a70eb",height:"40"},{default:(0,l.w5)((()=>[(0,l.Wm)(ve.q,null,{default:(0,l.w5)((()=>[(0,l.Uk)("Projects List")])),_:1})])),_:1}),(0,l.Wm)(he._,{height:"500",class:"overflow-y-auto"},{default:(0,l.w5)((()=>[(0,l.Wm)(we.E,null,{default:(0,l.w5)((()=>[(0,l.Wm)(G.h,{variant:"outlined",placeholder:"Search Project",onInput:i.onSearchProjects,modelValue:n.searchProjectName,"onUpdate:modelValue":t[0]||(t[0]=e=>n.searchProjectName=e)},null,8,["onInput","modelValue"])])),_:1}),(0,l.Wm)(fe.Z,null,{default:(0,l.w5)((()=>[(0,l.Wm)(mn.Vc,null,{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(i.distinctProjectsList,(e=>((0,l.wg)(),(0,l.j4)(un.M,{key:e.projectId,title:e.projectName},{default:(0,l.w5)((()=>[(0,l.Wm)(cn.H,null,{default:(0,l.w5)((()=>[(0,l.Wm)(s,{projectData:{projectId:e.projectId,projectType:e.projectType,startDate:null,endDate:null,roleId:null}},{default:(0,l.w5)((({form:e,projectDetails:t})=>[(0,l.Wm)(p.o,{justify:"end"},{default:(0,l.w5)((()=>[(0,l.Wm)(h.D,{cols:"2",class:"mt-1"},{default:(0,l.w5)((()=>[(0,l.Wm)(u.T,{disabled:!e,onClick:e=>i.onClickAddProject(t),color:"primary",loading:n.addLoading},{default:(0,l.w5)((()=>[(0,l.Uk)(" Add ")])),_:2},1032,["disabled","onClick","loading"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["projectData"])])),_:2},1024)])),_:2},1032,["title"])))),128))])),_:1}),0===i.distinctProjectsList.length?((0,l.wg)(),(0,l.iD)("div",yn," No Projects Available ")):(0,l.kq)("",!0)])),_:1})])),_:1})])),_:1})])),_:1}),(0,l.Wm)(h.D,{cols:"6"},{default:(0,l.w5)((()=>[(0,l.Wm)(he._,null,{default:(0,l.w5)((()=>[(0,l.Wm)(De.i,{dark:"",color:"#95d3f0",height:"40"},{default:(0,l.w5)((()=>[(0,l.Wm)(ve.q,null,{default:(0,l.w5)((()=>[(0,l.Uk)("Assigned Projects")])),_:1})])),_:1}),(0,l.Wm)(he._,{height:"500",class:"overflow-y-auto"},{default:(0,l.w5)((()=>[(0,l.Wm)(fe.Z,null,{default:(0,l.w5)((()=>[(0,l.Wm)(mn.Vc,null,{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(n.employeeProjectsList,(e=>((0,l.wg)(),(0,l.j4)(un.M,{key:e.projectId},{default:(0,l.w5)((()=>[(0,l.Wm)(pn.V,null,{default:(0,l.w5)((()=>[(0,l.Wm)(p.o,{"no-gutters":"",justify:"space-between"},{default:(0,l.w5)((()=>[(0,l.Wm)(h.D,{cols:"4"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,z.zw)(e.projectName),1)])),_:2},1024),(0,l.Wm)(h.D,{cols:"4"},{default:(0,l.w5)((()=>[(0,l._)("div",{style:(0,z.j5)({color:i.getProjectStatusColor(e)})},(0,z.zw)(i.getProjectStatus(e)),5)])),_:2},1024)])),_:2},1024)])),_:2},1024),(0,l.Wm)(cn.H,null,{default:(0,l.w5)((()=>[(0,l.Wm)(s,{projectData:e},{default:(0,l.w5)((({form:t,projectDetails:a})=>[(0,l.Wm)(p.o,{justify:"end"},{default:(0,l.w5)((()=>[(0,l.Wm)(h.D,{cols:"3"},{default:(0,l.w5)((()=>[(0,l.Wm)(u.T,{disabled:!t,color:"primary",variant:"outlined",onClick:e=>i.onClickUpdateProject(a),loading:n.updateLoading},{default:(0,l.w5)((()=>[(0,l.Uk)(" Update ")])),_:2},1032,["disabled","onClick","loading"])])),_:2},1024),(0,l.Wm)(h.D,{cols:"3"},{default:(0,l.w5)((()=>[(0,l.Wm)(u.T,{color:"red",variant:"outlined",onClick:t=>i.onClickRemoveProject(e.projectId),loading:n.removeLoading},{default:(0,l.w5)((()=>[(0,l.Uk)(" Remove ")])),_:2},1032,["onClick","loading"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["projectData"])])),_:2},1024)])),_:2},1024)))),128))])),_:1}),0===n.employeeProjectsList.length?((0,l.wg)(),(0,l.iD)("div",_n," No Projects Available ")):(0,l.kq)("",!0)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})),n.loading?((0,l.wg)(),(0,l.iD)("div",kn,[(0,l.Wm)(it.L,{indeterminate:"",color:"primary"})])):(0,l.kq)("",!0)])),_:1})}function vn(e,t,a,o,n,i){return(0,l.wg)(),(0,l.j4)(q.O,{modelValue:n.form,"onUpdate:modelValue":t[5]||(t[5]=e=>n.form=e)},{default:(0,l.w5)((()=>[(0,l.Wm)(p.o,null,{default:(0,l.w5)((()=>[(0,l.Wm)(h.D,{cols:"12"},{default:(0,l.w5)((()=>[(0,l.Wm)(_e.rL,{density:"compact",variant:"outlined",items:n.positionsList,"item-value":"positionId","item-title":"positionName",rules:[e.fieldRules.required],placeholder:"Select Role",modelValue:n.projectDetails.roleId,"onUpdate:modelValue":t[0]||(t[0]=e=>n.projectDetails.roleId=e)},null,8,["items","rules","modelValue"])])),_:1})])),_:1}),"Billable"===n.projectDetails.projectType?((0,l.wg)(),(0,l.j4)(p.o,{key:0},{default:(0,l.w5)((()=>[(0,l.Wm)(h.D,{cols:"6"},{default:(0,l.w5)((()=>[(0,l.Wm)(G.h,{density:"compact",variant:"outlined",type:"number",rules:[e.fieldRules.required],placeholder:"rate",modelValue:n.projectDetails.rate,"onUpdate:modelValue":t[1]||(t[1]=e=>n.projectDetails.rate=e)},null,8,["rules","modelValue"])])),_:1}),(0,l.Wm)(h.D,{cols:"6"},{default:(0,l.w5)((()=>[(0,l.Wm)(_e.rL,{density:"compact",variant:"outlined",rules:[e.fieldRules.required],placeholder:"Currency",modelValue:n.projectDetails.currency,"onUpdate:modelValue":t[2]||(t[2]=e=>n.projectDetails.currency=e),items:["USD","Euro","INR","CHF"]},null,8,["rules","modelValue"])])),_:1})])),_:1})):(0,l.kq)("",!0),(0,l.Wm)(p.o,null,{default:(0,l.w5)((()=>[(0,l.Wm)(h.D,{cols:"6"},{default:(0,l.w5)((()=>[(0,l.Wm)(G.h,{rules:[e.fieldRules.required],label:"Start date",type:"date",modelValue:n.projectDetails.startDate,"onUpdate:modelValue":t[3]||(t[3]=e=>n.projectDetails.startDate=e)},null,8,["rules","modelValue"])])),_:1}),(0,l.Wm)(h.D,{cols:"6"},{default:(0,l.w5)((()=>[(0,l.Wm)(G.h,{rules:[e.fieldRules.required],label:"End date",type:"date",modelValue:n.projectDetails.endDate,"onUpdate:modelValue":t[4]||(t[4]=e=>n.projectDetails.endDate=e)},null,8,["rules","modelValue"])])),_:1})])),_:1}),(0,l.WI)(e.$slots,"default",{form:n.form,projectDetails:n.projectDetails})])),_:3},8,["modelValue"])}var jn={data(){return{form:!1,projectDetails:{projectId:this.projectData.projectId,projectType:this.projectData.projectType,startDate:this.projectData.startDate,endDate:this.projectData.endDate,roleId:this.projectData.roleId,rate:this.projectData.rate,currency:this.projectData.currency},positionsList:[]}},props:["projectData"],computed:{...(0,m.rn)(["fieldRules"]),...(0,m.Se)(["getHeaders"])},methods:{async getPositionsList(){const e=`${this.$store.state.backendDomainUrl}/positions`,t={method:"GET",...this.getHeaders},a=await fetch(e,t);if(a.ok){const e=await a.json();this.positionsList=e}}},mounted(){this.getPositionsList()}};const Wn=(0,k.Z)(jn,[["render",vn]]);var bn=Wn,Sn={data(){return{employeeObj:{},loading:!1,projectsLoading:!1,employeeProjectsLoading:!1,addLoading:!1,removeLoading:!1,updateLoading:!1,projectsList:[],employeeProjectsList:[],searchProjectName:"",costPerHour:null,role:null,positionsList:[],positionId:null}},props:[],components:{ProjectAssignmentExpansion:bn},computed:{...(0,m.rn)(["fieldRules"]),...(0,m.Se)(["getEmployeeDetails","getHeaders"]),distinctProjectsList(){return this.projectsList.filter((e=>this.employeeProjectsList.every((t=>t.projectId!==e.projectId))))}},methods:{openDialog(){this.dialog=!0},onSearchProjects(){this.getProjectsList()},getProjectStatusColor(e){const t=this.getProjectStatus(e);return"Deadline Exceeded"===t?"red":"Not Yet Started"===t?"blue":"In Progress"===t?"green":""},getProjectStatus(e){const t=new Date,a=(0,R.Z)(t,"yyyy-MM-dd");return e.endDate<a?"Deadline Exceeded":e.startDate>a?"Not Yet Started":"In Progress"},async onClickAddProject(e){this.addLoading=!0;const t=`${this.$store.state.backendDomainUrl}/project/employee/save/${this.employeeObj.employeeId}`,a={method:"PUT",...this.getHeaders,body:JSON.stringify(e)},o=await fetch(t,a);o.ok&&(this.getEmployeeProjectsList(),this.$store.dispatch("showNotification","Project Added")),this.addLoading=!1},async onClickRemoveProject(e){this.removeLoading=!0;const t=`${this.$store.state.backendDomainUrl}/project/employee/remove/${this.employeeObj.employeeId}`,a={projectId:e},o={method:"DELETE",...this.getHeaders,body:JSON.stringify(a)},l=await fetch(t,o);l.ok&&(this.getEmployeeProjectsList(),this.$store.dispatch("showNotification","Project Removed")),this.removeLoading=!1},async onClickUpdateProject(e){this.updateLoading=!0;const t=`${this.$store.state.backendDomainUrl}/project/employee/update/${this.employeeObj.employeeId}`,a={method:"PUT",...this.getHeaders,body:JSON.stringify(e)},o=await fetch(t,a);o.ok&&(this.getEmployeeProjectsList(),this.$store.dispatch("showNotification","Project updated")),this.updateLoading=!1},async onClickSave(){const e=`${this.$store.state.backendDomainUrl}/projects/save/${this.employeeObj.employeeId}`,t={method:"PUT",...this.getHeaders,body:JSON.stringify({projectsList:this.employeeProjectsList})},a=await fetch(e,t);a.ok&&(this.dialog=!1,this.$store.dispatch("showNotification","Projects List Updated"))},async getEmployeeData(){const e=await this.getEmployeeDetails(this.$route.params.employeeId);this.employeeObj=e},async getProjectsList(){this.projectsLoading=!0;const e=`${this.$store.state.backendDomainUrl}/projects?projectName=${this.searchProjectName}`,t={method:"GET",...this.getHeaders},a=await fetch(e,t);if(a.ok){const e=await a.json();this.projectsList=e,this.projectsLoading=!1}},async getEmployeeProjectsList(){this.employeeProjectsLoading=!0;const e=`${this.$store.state.backendDomainUrl}/projects/employee/${this.employeeObj.employeeId}`,t={method:"GET",...this.getHeaders},a=await fetch(e,t);if(a.ok){const e=await a.json();this.employeeProjectsList=e,this.employeeProjectsLoading=!1}}},async mounted(){await this.getEmployeeData(),await this.getProjectsList(),await this.getEmployeeProjectsList()}};const Cn=(0,k.Z)(Sn,[["render",Dn]]);var In=Cn,xn=a(652);const Vn={class:"text-h5"},Tn={class:"text-h5"},Pn={class:"w-100 d-flex flex-row align-center justify-space-between"},Ln={style:{"font-size":"11px",color:"red"}},En=(0,l._)("span",{class:"font-weight-medium"},"Personal Mail: ",-1),Nn=(0,l._)("span",{class:"font-weight-medium"},"Official Mail: ",-1),$n=(0,l._)("span",{class:"font-weight-medium"},"Position : ",-1),Un=(0,l._)("span",{class:"font-weight-medium"},"Department : ",-1),On=(0,l._)("span",{class:"font-weight-medium"},"Admin : ",-1),Rn=(0,l._)("span",{class:"font-weight-medium"},"Reporting Manager : ",-1);function Mn(e,t,a,n,i,s){return(0,l.wg)(),(0,l.j4)(c.K,{fluid:"",class:"h-100 w-100"},{default:(0,l.w5)((()=>[(0,l.Wm)(F.C,{variant:"elevated"},{default:(0,l.w5)((()=>[(0,l.Wm)(De.i,{height:"50",theme:"dark",color:"primary"},{default:(0,l.w5)((()=>[(0,l.Wm)(ve.q,null,{default:(0,l.w5)((()=>[(0,l.Uk)("PROFILE")])),_:1}),(0,l.Wm)(hn.l)])),_:1}),(0,l.Wm)(c.K,{fluid:""},{default:(0,l.w5)((()=>[(0,l.Wm)(p.o,{justify:"center"},{default:(0,l.w5)((()=>[(0,l.Wm)(h.D,{cols:"1"},{default:(0,l.w5)((()=>[(0,l.Wm)(xn.V,{color:"brown",size:"large"},{default:(0,l.w5)((()=>[(0,l._)("span",Vn,(0,z.zw)(e.employeeDetails.employeeName[0]),1)])),_:1})])),_:1}),(0,l.Wm)(h.D,{cols:"3"},{default:(0,l.w5)((()=>[(0,l._)("div",Tn,(0,z.zw)(e.employeeDetails.employeeName),1),(0,l._)("div",null,(0,z.zw)(`Id:  ${e.employeeDetails.employeeId} `),1)])),_:1}),(0,l.Wm)(h.D,{cols:"4"},{default:(0,l.w5)((()=>[(0,l.Wm)(Je.B,{height:"480",width:"400"},{activator:(0,l.w5)((({props:e})=>[(0,l.Wm)(u.T,(0,l.dG)({variant:"text",color:"blue"},e),{default:(0,l.w5)((()=>[(0,l.Uk)(" Change Password ")])),_:2},1040)])),default:(0,l.w5)((({isActive:a})=>[(0,l.Wm)(he._,{width:"400",height:"480"},{default:(0,l.w5)((()=>[(0,l.Wm)(we.E,null,{default:(0,l.w5)((()=>[(0,l._)("div",Pn,[(0,l.Uk)(" Change Password "),(0,l.Wm)(u.T,{onClick:e=>s.onCloseDialog(a),icon:"mdi-close",variant:"text"},null,8,["onClick"])])])),_:2},1024),(0,l.Wm)(fe.Z,null,{default:(0,l.w5)((()=>[(0,l.Wm)(q.O,{modelValue:i.changePasswordForm,"onUpdate:modelValue":t[6]||(t[6]=e=>i.changePasswordForm=e),onSubmit:(0,o.iM)((e=>s.onClickChangePassword(a)),["prevent"])},{default:(0,l.w5)((()=>[(0,l.Wm)(p.o,null,{default:(0,l.w5)((()=>[(0,l.Wm)(h.D,{cols:"12"},{default:(0,l.w5)((()=>[(0,l.Wm)(G.h,{modelValue:i.currentPassword,"onUpdate:modelValue":t[0]||(t[0]=e=>i.currentPassword=e),label:"Current Password",type:i.currentPasswordVisible?"text":"password","append-inner-icon":i.currentPasswordVisible?"mdi-eye-off":"mdi-eye","onClick:appendInner":t[1]||(t[1]=e=>i.currentPasswordVisible=!i.currentPasswordVisible),rules:[e.fieldRules.required,e.fieldRules.password]},null,8,["modelValue","type","append-inner-icon","rules"])])),_:1}),(0,l.Wm)(h.D,{cols:"12"},{default:(0,l.w5)((()=>[(0,l.Wm)(G.h,{modelValue:i.newPassword,"onUpdate:modelValue":t[2]||(t[2]=e=>i.newPassword=e),label:"New Password",type:i.newPasswordVisible?"text":"password","append-inner-icon":i.newPasswordVisible?"mdi-eye-off":"mdi-eye","onClick:appendInner":t[3]||(t[3]=e=>i.newPasswordVisible=!i.newPasswordVisible),rules:[e.fieldRules.required,e.fieldRules.password]},null,8,["modelValue","type","append-inner-icon","rules"])])),_:1}),(0,l.Wm)(h.D,{cols:"12"},{default:(0,l.w5)((()=>[(0,l.Wm)(G.h,{label:"Confirm New Password",modelValue:i.confirmNewPassword,"onUpdate:modelValue":t[4]||(t[4]=e=>i.confirmNewPassword=e),rules:[e.fieldRules.required,i.passwordMatchRule],type:i.confirmNewPasswordVisible?"text":"password","append-inner-icon":i.confirmNewPasswordVisible?"mdi-eye-off":"mdi-eye","onClick:appendInner":t[5]||(t[5]=e=>i.confirmNewPasswordVisible=!i.confirmNewPasswordVisible)},null,8,["modelValue","rules","type","append-inner-icon"])])),_:1})])),_:1}),(0,l.Wm)(p.o,null,{default:(0,l.w5)((()=>[i.isPasswordValid?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(h.D,{key:0},{default:(0,l.w5)((()=>[(0,l._)("p",Ln,(0,z.zw)(i.passwordError),1)])),_:1})),(0,l.Wm)(h.D,{cols:"12"},{default:(0,l.w5)((()=>[(0,l.Wm)(u.T,{type:"submit",block:"",color:"blue",text:"Change Password",disabled:!i.changePasswordForm,loading:i.changePasswordLoading},null,8,["disabled","loading"])])),_:1})])),_:1})])),_:2},1032,["modelValue","onSubmit"])])),_:2},1024)])),_:2},1024)])),_:1})])),_:1})])),_:1}),(0,l.Wm)(p.o,{justify:"center"},{default:(0,l.w5)((()=>[(0,l.Wm)(h.D,{cols:"4"},{default:(0,l.w5)((()=>[(0,l._)("div",null,[En,(0,l.Uk)(" "+(0,z.zw)(`${e.employeeDetails.personalMail} `),1)])])),_:1}),(0,l.Wm)(h.D,{cols:"4"},{default:(0,l.w5)((()=>[(0,l._)("div",null,[Nn,(0,l.Uk)(" "+(0,z.zw)(` ${e.employeeDetails.officialMail} `),1)])])),_:1})])),_:1}),(0,l.Wm)(p.o,{justify:"center"},{default:(0,l.w5)((()=>[(0,l.Wm)(h.D,{cols:"4"},{default:(0,l.w5)((()=>[(0,l._)("div",null,[$n,(0,l.Uk)(" "+(0,z.zw)(` ${e.employeeDetails.positionName} `),1)])])),_:1}),(0,l.Wm)(h.D,{cols:"4"},{default:(0,l.w5)((()=>[(0,l._)("div",null,[Un,(0,l.Uk)(" "+(0,z.zw)(` ${e.employeeDetails.departmentName} `),1)])])),_:1})])),_:1}),(0,l.Wm)(p.o,{justify:"center"},{default:(0,l.w5)((()=>[(0,l.Wm)(h.D,{cols:"4"},{default:(0,l.w5)((()=>[On,(0,l.Uk)(" "+(0,z.zw)(" "+(1===e.employeeDetails.isAdmin?"Yes":"No")),1)])),_:1}),(0,l.Wm)(h.D,{cols:"4"},{default:(0,l.w5)((()=>[(0,l._)("div",null,[Rn,(0,l.Uk)(" "+(0,z.zw)(`${e.employeeDetails.reportingManagerName} `),1)])])),_:1})])),_:1}),(0,l.Wm)(p.o,null,{default:(0,l.w5)((()=>[(0,l.Wm)(h.D,{cols:"6"},{default:(0,l.w5)((()=>[(0,l.Wm)(he._,{"min-width":"400",height:"400",class:"overflow-y-auto"},{default:(0,l.w5)((()=>[(0,l.Wm)(De.i,null,{default:(0,l.w5)((()=>[(0,l.Wm)(ve.q,null,{default:(0,l.w5)((()=>[(0,l.Uk)(" Assigned Projects ")])),_:1})])),_:1}),(0,l.Wm)(fe.Z,null,{default:(0,l.w5)((()=>[(0,l.Wm)(b.i,{lines:"one"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.projectList,((e,t)=>((0,l.wg)(),(0,l.j4)(W.l,{key:e.projectId,title:`${t+1} ${e.projectName}`},null,8,["title"])))),128)),0===e.projectList.length?((0,l.wg)(),(0,l.j4)(W.l,{key:0,title:"No Projects Assigned"})):(0,l.kq)("",!0)])),_:1})])),_:1})])),_:1})])),_:1}),(0,l.Wm)(h.D,{cols:"6"},{default:(0,l.w5)((()=>[(0,l.Wm)(he._,{"min-width":"400",height:"400",class:"overflow-y-auto"},{default:(0,l.w5)((()=>[(0,l.Wm)(De.i,null,{default:(0,l.w5)((()=>[(0,l.Wm)(ve.q,null,{default:(0,l.w5)((()=>[(0,l.Uk)(" Assigned Employees ")])),_:1})])),_:1}),(0,l.Wm)(fe.Z,null,{default:(0,l.w5)((()=>[(0,l.Wm)(b.i,{lines:"one"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(i.reportingManagerEmployeesList,(e=>((0,l.wg)(),(0,l.j4)(W.l,{key:e.employeeId,title:`${e.employeeId} - ${e.employeeName}`},null,8,["title"])))),128)),0===i.reportingManagerEmployeesList.length?((0,l.wg)(),(0,l.j4)(W.l,{key:0,title:"No Employees Assigned"})):(0,l.kq)("",!0)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}var Hn={data(){return{changePasswordForm:!1,currentPassword:null,newPassword:null,confirmNewPassword:null,reportingManagerEmployeesList:[],currentPasswordVisible:!1,newPasswordVisible:!1,confirmNewPasswordVisible:!1,isPasswordValid:!0,passwordError:null,changePasswordLoading:!1,passwordMatchRule:()=>this.newPassword===this.confirmNewPassword||"Password Doesn't Match"}},computed:{...(0,m.rn)(["employeeDetails","projectList","employeeId","fieldRules"]),...(0,m.Se)(["getHeaders"])},methods:{async getReportingManagerEmployees(){const e=`${this.$store.state.backendDomainUrl}/reporting_manager/employees/${this.employeeId}`,t={method:"GET",...this.getHeaders},a=await fetch(e,t);a.ok&&(this.reportingManagerEmployeesList=await a.json())},async onClickChangePassword(e){this.changePasswordLoading=!0;const t=`${this.$store.state.backendDomainUrl}/password/reset`,a={method:"PUT",...this.getHeaders,body:JSON.stringify({currentPassword:this.currentPassword,newPassword:this.newPassword})},o=await fetch(t,a),l=await o.json();o.ok?this.onCloseDialog(e):(this.isPasswordValid=!1,this.passwordError=l.message,console.log(l.message)),this.changePasswordLoading=!1},onCloseDialog(e){e.value=!1,this.changePasswordForm=!1,this.currentPassword=null,this.newPassword=null,this.confirmNewPassword=null,this.currentPasswordVisible=!1,this.newPasswordVisible=!1,this.confirmNewPasswordVisible=!1,this.isPasswordValid=!0,this.passwordError=null}},mounted(){this.getReportingManagerEmployees()}};const An=(0,k.Z)(Hn,[["render",Mn]]);var zn=An;function qn(e,t){return(0,l.wg)(),(0,l.j4)(c.K,{fluid:"",class:"h-100 w-100 d-flex flex-row align-center justify-center"},{default:(0,l.w5)((()=>[(0,l.Wm)(he._,{variant:"text"},{default:(0,l.w5)((()=>[(0,l.Wm)(Z.f,{src:"https://img.freepik.com/free-vector/page-found-with-people-connecting-plug-concept-illustration_114360-1939.jpg?w=740&t=st=1697115751~exp=1697116351~hmac=a36924e825b54a15fae1862dac081aaca0c951eed47c80bd0df93c72c19b2015",width:"500",height:"500"})])),_:1})])),_:1})}const Zn={},Fn=(0,k.Z)(Zn,[["render",qn]]);var Gn=Fn;const Yn={class:"w-50 d-none d-md-block"},Bn={key:0,style:{"min-width":"50%"}},Kn=(0,l._)("h1",{class:"user-login-heading"},"RESET PASSWORD",-1),Jn=(0,l._)("br",null,null,-1),Xn={class:"error-msg"},Qn={key:1};function ei(e,t,a,n,i,s){return(0,l.wg)(),(0,l.j4)(c.K,{fluid:"",class:"container w-100 h-100 d-flex flex-row justify-center align-center"},{default:(0,l.w5)((()=>[200===i.responseStatus?((0,l.wg)(),(0,l.j4)(F.C,{key:0,"min-width":"55%",class:"form-sheet mx-auto pa-5 d-flex flex-row justify-center align-center",rounded:""},{default:(0,l.w5)((()=>[(0,l._)("div",Yn,[(0,l.Wm)(Z.f,{class:"flex-grow-0",cover:"",src:"https://img.freepik.com/free-vector/forgot-password-concept-illustration_114360-1123.jpg?w=740&t=st=1698296974~exp=1698297574~hmac=40d9021866084c2ec121b0099c9ca32ae990d76c3d02080043fdc18d554f8f72"})]),i.isPasswordReset?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",Bn,[Kn,(0,l.Wm)(q.O,{modelValue:i.form,"onUpdate:modelValue":t[3]||(t[3]=e=>i.form=e),onSubmit:(0,o.iM)(s.onResetPassword,["prevent"]),class:"w-100"},{default:(0,l.w5)((()=>[(0,l.Wm)(G.h,{density:"compact",placeholder:"New Password","prepend-inner-icon":"mdi-lock-outline",variant:"outlined",rules:[e.fieldRules.required,e.fieldRules.password],class:"mb-3",modelValue:i.newPassword,"onUpdate:modelValue":t[0]||(t[0]=e=>i.newPassword=e),"append-inner-icon":i.visible?"mdi-eye-off":"mdi-eye","onClick:appendInner":t[1]||(t[1]=e=>i.visible=!i.visible),type:i.visible?"text":"password"},null,8,["rules","modelValue","append-inner-icon","type"]),(0,l.Wm)(G.h,{density:"compact",placeholder:"Confirm Password","prepend-inner-icon":"mdi-lock-outline",variant:"outlined",rules:[e.fieldRules.required,e.fieldRules.password,i.confirmPasswordRule],modelValue:i.confirmPassword,"onUpdate:modelValue":t[2]||(t[2]=e=>i.confirmPassword=e)},null,8,["rules","modelValue"]),Jn,(0,l._)("p",Xn,(0,z.zw)(i.errorMsg),1),(0,l.Wm)(u.T,{disabled:!i.form,block:"",color:"primary",size:"large",type:"submit",variant:"elevated",loading:i.buttonLoading},{default:(0,l.w5)((()=>[(0,l.Uk)(" Reset Password ")])),_:1},8,["disabled","loading"])])),_:1},8,["modelValue","onSubmit"])])),i.isPasswordReset?((0,l.wg)(),(0,l.iD)("div",Qn," Password Reset sucessfull, redirecting to login... ")):(0,l.kq)("",!0)])),_:1})):(0,l.kq)("",!0),400===i.responseStatus?((0,l.wg)(),(0,l.j4)(F.C,{key:1,"min-width":"55%",class:"form-sheet mx-auto pa-5 d-flex flex-row justify-center align-center",rounded:""},{default:(0,l.w5)((()=>[(0,l.Uk)(" Link Expired ")])),_:1})):(0,l.kq)("",!0),404===i.responseStatus?((0,l.wg)(),(0,l.j4)(F.C,{key:2,"min-width":"55%",class:"form-sheet mx-auto pa-5 d-flex flex-row justify-center align-center",rounded:""},{default:(0,l.w5)((()=>[(0,l.Uk)(" Invalid URL ")])),_:1})):(0,l.kq)("",!0),i.pageLoading?((0,l.wg)(),(0,l.j4)(F.C,{key:3,"min-width":"55%",class:"form-sheet mx-auto pa-5 d-flex flex-row justify-center align-center",rounded:""},{default:(0,l.w5)((()=>[(0,l.Wm)(it.L,{indeterminate:"",color:"primary"})])),_:1})):(0,l.kq)("",!0)])),_:1})}var ti={data(){return{pageLoading:!0,form:!1,visible:!1,newPassword:null,confirmPassword:null,responseStatus:null,buttonLoading:!1,isPasswordReset:!1,errorMsg:"",confirmPasswordRule:e=>e===this.newPassword||"Password doesn't match"}},computed:{...(0,m.rn)(["fieldRules"]),...(0,m.Se)(["getHeaders"])},methods:{async checkResetPage(){this.pageLoading=!0;const{resetToken:e}=this.$route.params,t=`${this.$store.state.backendDomainUrl}/reset-link-verify/${e}`,a={method:"GET",...this.getHeaders},o=await fetch(t,a);if(this.responseStatus=o.status,console.log(this.responseStatus),500!==o.status){const e=await o.json();console.log(e.message)}this.pageLoading=!1},async onResetPassword(){this.buttonLoading=!0;const{resetToken:e}=this.$route.params,t=`${this.$store.state.backendDomainUrl}/reset-password/`,a={method:"PUT",...this.getHeaders,body:JSON.stringify({newPassword:this.newPassword,confirmPassword:this.confirmPassword,resetToken:e})},o=await fetch(t,a),l=await o.json();this.errorMsg=l.message,this.buttonLoading=!1,o.ok&&(this.isPasswordReset=!0,setTimeout((()=>{this.$router.replace("/login")}),2e3))}},mounted(){this.$store.commit("onLogout"),this.checkResetPage()}};const ai=(0,k.Z)(ti,[["render",ei]]);var oi=ai;const li=(0,A.p7)({history:(0,A.r5)("/timesheetDeploy/"),routes:[{name:"Login",path:"/login",component:ue},{name:"Home",path:"/",component:fa},{name:"Submit Timesheet",path:"/submit_timesheet",component:Bl},{name:"Employee TimeSheet",path:"/employee_timesheet/:timeSheetId",component:Fa},{name:"Search TimeSheet",path:"/search_timesheet",component:pa},{name:"Export",path:"/export",component:$a},{name:"Employees",path:"/employees",component:io},{name:"Projects",path:"/projects",component:bo},{name:"Customers",path:"/customers",component:Oo},{name:"Review Timesheet",path:"/review_timesheets",component:rn},{name:"Project Assignment",path:"/project_assignment/:employeeId",component:In},{name:"Profile",path:"/profile",component:zn},{name:"Reset Password",path:"/reset-password/:resetToken",component:oi},{name:"Not Found",path:"/:catchAll(.*)",component:Gn}]});li.beforeEach(((e,t,a)=>{const o=ii.getters.getIsLogin;"/login"!==e.fullPath&&ii.commit("setRedirectPath",e.fullPath),"Login"===e.name||o||"Reset Password"===e.name?a():a({name:"Login"})}));var ni=li,ii=(0,m.MT)({state:{backendDomainUrl:"https://employee-management-app-ytz4.onrender.com",jwtToken:"",redirectPath:"/",employeeDetails:{},employeeId:null,employeeName:"",email:"",isAdmin:!1,isLogin:!1,daysOfWeek:[],selectedWeek:"2023-W36",startDate:"",endDate:"",projectList:[],notificationObj:{show:!1,message:""},fieldRules:{required(e){return null!==e&&""!==e||"Required"},email(e){return!(!e.includes("@")||!e.includes(".com"))||"Invalid Email Address"},password(e){return e.length>=8||"Password must be at least 8 characters"}}},mutations:{updateJwtToken(e,t){e.jwtToken=t,localStorage.setItem("timesheetJwtToken",JSON.stringify(t))},updateEmployeeDetailsAndLogin(e,t){e.employeeId=t.employeeId,e.employeeName=t.employeeName,e.email=t.officialMail,e.isAdmin=t.isAdmin,e.employeeDetails=t,e.isLogin=!0,ni.push(e.redirectPath)},setRedirectPath(e,t){e.redirectPath=t},updateDaysOfWeek(e){const{selectedWeek:t}=e,[a,o]=t.split("-W"),l=new Date(a,0,1),n=(0,U.Z)(l,{weekStartsOn:1}),i=(0,O.Z)(n,o),s=(0,R.Z)(i,"E,MMM dd"),d=[s];let r=null;for(let m=1;m<=6;m++)r=(0,M.Z)(i,m),d.push((0,R.Z)(r,"E,MMM dd"));e.daysOfWeek=d,e.startDate=(0,R.Z)(i,"yyyy-MM-dd"),e.endDate=(0,R.Z)(r,"yyyy-MM-dd")},updateRowInput(e,t){const{weeklyProjectHoursList:a,selectedWeek:o}=e,{id:l,name:n,value:i}=t,s=a[o].map((e=>{if(e.id===l){const t={...e};return t[n]=i,t}return e}));e.weeklyProjectHoursList[o]=s},updateSelectedWeek(e,t){e.selectedWeek=t},deleteRow(e,t){const{weeklyProjectHoursList:a,selectedWeek:o}=e,l=a[o].filter((e=>e.id!==t));e.weeklyProjectHoursList[o]=l},onLogout(e){e.isLogin=!1,localStorage.removeItem("timesheetJwtToken")},showNotification(e,t){e.notificationObj={show:!0,message:t}},hideNotification(e){e.notificationObj={show:!1,message:""}}},actions:{async onSuccesfullLogin(e,t){e.commit("updateJwtToken",t),await this.dispatch("getEmployeeProfileDetails")},checkUserValidity(e){let t=localStorage.getItem("timesheetJwtToken");t=JSON.parse(t),null!==t&&(e.state.jwtToken=t,this.dispatch("getEmployeeProfileDetails"))},async getEmployeeProfileDetails(e){const t=`${e.state.backendDomainUrl}/employee/profile`,a={method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${e.state.jwtToken}`}},o=await fetch(t,a);if(o.ok){const t=await o.json();console.log(t),e.commit("updateEmployeeDetailsAndLogin",t),this.dispatch("getProjectData")}},showNotification(e,t){e.commit("showNotification",t),setTimeout((()=>{e.commit("hideNotification")}))},hideNotification(e){e.commit("hideNotification")},updateRowInput(e,t){e.commit("updateRowInput",t)},updateSelectedWeek(e,t){e.commit("updateSelectedWeek",t),e.commit("updateDaysOfWeek")},onLogout(e){e.commit("onLogout"),ni.push("/login")},async getProjectData(e){const t=`${e.state.backendDomainUrl}/projects/employee/${e.state.employeeId}`,a={method:"GET",headers:{"Content-Type":"application/json"}},o=await fetch(t,a);if(o.ok){const t=await o.json();e.state.projectList=t,console.log(e.state.projectList)}},async approveTimeSheet(e,t){const a=`${e.state.backendDomainUrl}/timesheet/approve/${t}`,o={method:"PUT",headers:{"Content-Type":"application/json"}},l=await fetch(a,o);if(l.ok){const t=await l.json();e.commit("showNotification","Timesheet Approved"),console.log(t)}},async submitTimeSheet(e,t){const a=`${e.state.backendDomainUrl}/timesheet/submit/${t}`,o={method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json"}},l=await fetch(a,o);if(l.ok){const t=await l.json();e.commit("showNotification",t.text),console.log(t.text)}},async denyTimeSheet(e,t){const a=`${e.state.backendDomainUrl}/timesheet/deny/${t}`,o={method:"PUT",headers:{"Content-Type":"application/json"}},l=await fetch(a,o);if(l.ok){const t=await l.json();e.commit("showNotification","Timesheet Denied"),console.log(t)}},async openTimeSheet(e,t){const a=`${e.state.backendDomainUrl}/timesheet/open/${t}`,o={method:"PUT",headers:{"Content-Type":"application/json"}},l=await fetch(a,o);if(l.ok){const t=await l.json();e.commit("showNotification","Timesheet Re-opened"),console.log(t)}},async sendEmail(e,t){console.log(t)},async sendEmailOnAction(e,t){const{timeSheetId:a,employeeName:o,startDate:l,endDate:n,message:i,officialMail:s,action:d}=t;console.log(s),console.log(e.state.employeeDetails.officialMail);try{await H.ZP.send("service_evxhn1b","template_pdlg2yl",{action:d,employeeName:o,timeSheetId:a,startDate:l,endDate:n,message:i,toMail:null!==s?s:"",fromMail:e.state.employeeDetails.officialMail},"75B7CIXrKgR0C1weF")}catch(r){console.log(r)}}},getters:{getIsLogin(e){return e.isLogin},getFormatedDateString(){return e=>{if(null===e||""===e)return"-";const t=new Date(e),a=(0,R.Z)(t,"dd, MMM yyyy");return a}},getEmployeeDetails(e){return async t=>{const a=`${e.backendDomainUrl}/employee/${t}`,o={method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${e.jwtToken}`}},l=await fetch(a,o);return l.ok?await l.json():{}}},getHeaders(e){return{headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${e.jwtToken}`}}}}}),si=(a(9773),a(8727)),di=(0,si.Rd)();async function ri(){const e=await a.e(461).then(a.t.bind(a,3657,23));e.load({google:{families:["Roboto:100,300,400,500,700,900&display=swap"]}})}ri(),(0,o.ri)($).use(ii).use(di).use(ni).mount("#app")}},t={};function a(o){var l=t[o];if(void 0!==l)return l.exports;var n=t[o]={exports:{}};return e[o].call(n.exports,n,n.exports,a),n.exports}a.m=e,function(){var e=[];a.O=function(t,o,l,n){if(!o){var i=1/0;for(m=0;m<e.length;m++){o=e[m][0],l=e[m][1],n=e[m][2];for(var s=!0,d=0;d<o.length;d++)(!1&n||i>=n)&&Object.keys(a.O).every((function(e){return a.O[e](o[d])}))?o.splice(d--,1):(s=!1,n<i&&(i=n));if(s){e.splice(m--,1);var r=l();void 0!==r&&(t=r)}}return t}n=n||0;for(var m=e.length;m>0&&e[m-1][2]>n;m--)e[m]=e[m-1];e[m]=[o,l,n]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};a.t=function(o,l){if(1&l&&(o=this(o)),8&l)return o;if("object"===typeof o&&o){if(4&l&&o.__esModule)return o;if(16&l&&"function"===typeof o.then)return o}var n=Object.create(null);a.r(n);var i={};e=e||[null,t({}),t([]),t(t)];for(var s=2&l&&o;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){i[e]=function(){return o[e]}}));return i["default"]=function(){return o},a.d(n,i),n}}(),function(){a.d=function(e,t){for(var o in t)a.o(t,o)&&!a.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){a.f={},a.e=function(e){return Promise.all(Object.keys(a.f).reduce((function(t,o){return a.f[o](e,t),t}),[]))}}(),function(){a.u=function(e){return"js/"+(461===e?"webfontloader":e)+"."+{269:"cd6ff2c2",297:"cf1c9643",461:"6e45b15f",617:"5a1749e4"}[e]+".js"}}(),function(){a.miniCssF=function(e){}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="timesheetapp:";a.l=function(o,l,n,i){if(e[o])e[o].push(l);else{var s,d;if(void 0!==n)for(var r=document.getElementsByTagName("script"),m=0;m<r.length;m++){var u=r[m];if(u.getAttribute("src")==o||u.getAttribute("data-webpack")==t+n){s=u;break}}s||(d=!0,s=document.createElement("script"),s.charset="utf-8",s.timeout=120,a.nc&&s.setAttribute("nonce",a.nc),s.setAttribute("data-webpack",t+n),s.src=o),e[o]=[l];var c=function(t,a){s.onerror=s.onload=null,clearTimeout(p);var l=e[o];if(delete e[o],s.parentNode&&s.parentNode.removeChild(s),l&&l.forEach((function(e){return e(a)})),t)return t(a)},p=setTimeout(c.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=c.bind(null,s.onerror),s.onload=c.bind(null,s.onload),d&&document.head.appendChild(s)}}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.p="/timesheetDeploy/"}(),function(){var e={143:0};a.f.j=function(t,o){var l=a.o(e,t)?e[t]:void 0;if(0!==l)if(l)o.push(l[2]);else{var n=new Promise((function(a,o){l=e[t]=[a,o]}));o.push(l[2]=n);var i=a.p+a.u(t),s=new Error,d=function(o){if(a.o(e,t)&&(l=e[t],0!==l&&(e[t]=void 0),l)){var n=o&&("load"===o.type?"missing":o.type),i=o&&o.target&&o.target.src;s.message="Loading chunk "+t+" failed.\n("+n+": "+i+")",s.name="ChunkLoadError",s.type=n,s.request=i,l[1](s)}};a.l(i,d,"chunk-"+t,t)}},a.O.j=function(t){return 0===e[t]};var t=function(t,o){var l,n,i=o[0],s=o[1],d=o[2],r=0;if(i.some((function(t){return 0!==e[t]}))){for(l in s)a.o(s,l)&&(a.m[l]=s[l]);if(d)var m=d(a)}for(t&&t(o);r<i.length;r++)n=i[r],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(m)},o=self["webpackChunktimesheetapp"]=self["webpackChunktimesheetapp"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=a.O(void 0,[998],(function(){return a(4394)}));o=a.O(o)})();
//# sourceMappingURL=app.e3577d99.js.map